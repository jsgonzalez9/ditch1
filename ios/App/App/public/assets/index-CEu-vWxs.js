(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Bu={exports:{}},Ai={},Wu={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=Symbol.for("react.element"),Xf=Symbol.for("react.portal"),Zf=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),tm=Symbol.for("react.profiler"),rm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),am=Symbol.for("react.memo"),om=Symbol.for("react.lazy"),ac=Symbol.iterator;function lm(t){return t===null||typeof t!="object"?null:(t=ac&&t[ac]||t["@@iterator"],typeof t=="function"?t:null)}var qu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hu=Object.assign,Vu={};function dn(t,e,r){this.props=t,this.context=e,this.refs=Vu,this.updater=r||qu}dn.prototype.isReactComponent={};dn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ku(){}Ku.prototype=dn.prototype;function Jo(t,e,r){this.props=t,this.context=e,this.refs=Vu,this.updater=r||qu}var Xo=Jo.prototype=new Ku;Xo.constructor=Jo;Hu(Xo,dn.prototype);Xo.isPureReactComponent=!0;var oc=Array.isArray,Gu=Object.prototype.hasOwnProperty,Zo={current:null},Yu={key:!0,ref:!0,__self:!0,__source:!0};function Qu(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Gu.call(e,n)&&!Yu.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ds,type:t,key:i,ref:o,props:s,_owner:Zo.current}}function cm(t,e){return{$$typeof:ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function el(t){return typeof t=="object"&&t!==null&&t.$$typeof===ds}function um(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var lc=/\/+/g;function oa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?um(""+t.key):e.toString(36)}function qs(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ds:case Xf:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+oa(o,0):n,oc(s)?(r="",t!=null&&(r=t.replace(lc,"$&/")+"/"),qs(s,e,r,"",function(u){return u})):s!=null&&(el(s)&&(s=cm(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lc,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",oc(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+oa(i,l);o+=qs(i,e,r,c,s)}else if(c=lm(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+oa(i,l++),o+=qs(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function js(t,e,r){if(t==null)return t;var n=[],s=0;return qs(t,n,"","",function(i){return e.call(r,i,s++)}),n}function dm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ke={current:null},Hs={transition:null},hm={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:Hs,ReactCurrentOwner:Zo};function Ju(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:js,forEach:function(t,e,r){js(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return js(t,function(){e++}),e},toArray:function(t){return js(t,function(e){return e})||[]},only:function(t){if(!el(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=dn;F.Fragment=Zf;F.Profiler=tm;F.PureComponent=Jo;F.StrictMode=em;F.Suspense=im;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hm;F.act=Ju;F.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Hu({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Zo.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Gu.call(e,c)&&!Yu.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ds,type:t.type,key:s,ref:i,props:n,_owner:o}};F.createContext=function(t){return t={$$typeof:nm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rm,_context:t},t.Consumer=t};F.createElement=Qu;F.createFactory=function(t){var e=Qu.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:sm,render:t}};F.isValidElement=el;F.lazy=function(t){return{$$typeof:om,_payload:{_status:-1,_result:t},_init:dm}};F.memo=function(t,e){return{$$typeof:am,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=Hs.transition;Hs.transition={};try{t()}finally{Hs.transition=e}};F.unstable_act=Ju;F.useCallback=function(t,e){return ke.current.useCallback(t,e)};F.useContext=function(t){return ke.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return ke.current.useDeferredValue(t)};F.useEffect=function(t,e){return ke.current.useEffect(t,e)};F.useId=function(){return ke.current.useId()};F.useImperativeHandle=function(t,e,r){return ke.current.useImperativeHandle(t,e,r)};F.useInsertionEffect=function(t,e){return ke.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return ke.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return ke.current.useMemo(t,e)};F.useReducer=function(t,e,r){return ke.current.useReducer(t,e,r)};F.useRef=function(t){return ke.current.useRef(t)};F.useState=function(t){return ke.current.useState(t)};F.useSyncExternalStore=function(t,e,r){return ke.current.useSyncExternalStore(t,e,r)};F.useTransition=function(){return ke.current.useTransition()};F.version="18.3.1";Wu.exports=F;var v=Wu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm=v,mm=Symbol.for("react.element"),pm=Symbol.for("react.fragment"),gm=Object.prototype.hasOwnProperty,ym=fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xm={key:!0,ref:!0,__self:!0,__source:!0};function Xu(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)gm.call(e,n)&&!xm.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:mm,type:t,key:i,ref:o,props:s,_owner:ym.current}}Ai.Fragment=pm;Ai.jsx=Xu;Ai.jsxs=Xu;Bu.exports=Ai;var a=Bu.exports,Zu={exports:{}},Me={},ed={exports:{}},td={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,D){var U=O.length;O.push(D);e:for(;0<U;){var te=U-1>>>1,le=O[te];if(0<s(le,D))O[te]=D,O[U]=le,U=te;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var D=O[0],U=O.pop();if(U!==D){O[0]=U;e:for(var te=0,le=O.length,ws=le>>>1;te<ws;){var sr=2*(te+1)-1,aa=O[sr],ir=sr+1,bs=O[ir];if(0>s(aa,U))ir<le&&0>s(bs,aa)?(O[te]=bs,O[ir]=U,te=ir):(O[te]=aa,O[sr]=U,te=sr);else if(ir<le&&0>s(bs,U))O[te]=bs,O[ir]=U,te=ir;else break e}}return D}function s(O,D){var U=O.sortIndex-D.sortIndex;return U!==0?U:O.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,y=!1,x=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(O){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=O)n(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=r(u)}}function j(O){if(b=!1,m(O),!x)if(r(c)!==null)x=!0,Q(_);else{var D=r(u);D!==null&&Ce(j,D.startTime-O)}}function _(O,D){x=!1,b&&(b=!1,g(k),k=-1),y=!0;var U=f;try{for(m(D),h=r(c);h!==null&&(!(h.expirationTime>D)||O&&!A());){var te=h.callback;if(typeof te=="function"){h.callback=null,f=h.priorityLevel;var le=te(h.expirationTime<=D);D=t.unstable_now(),typeof le=="function"?h.callback=le:h===r(c)&&n(c),m(D)}else n(c);h=r(c)}if(h!==null)var ws=!0;else{var sr=r(u);sr!==null&&Ce(j,sr.startTime-D),ws=!1}return ws}finally{h=null,f=U,y=!1}}var C=!1,w=null,k=-1,S=5,T=-1;function A(){return!(t.unstable_now()-T<S)}function P(){if(w!==null){var O=t.unstable_now();T=O;var D=!0;try{D=w(!0,O)}finally{D?L():(C=!1,w=null)}}else C=!1}var L;if(typeof p=="function")L=function(){p(P)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ve=G.port2;G.port1.onmessage=P,L=function(){ve.postMessage(null)}}else L=function(){N(P,0)};function Q(O){w=O,C||(C=!0,L())}function Ce(O,D){k=N(function(){O(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,Q(_))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var U=f;f=D;try{return O()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,D){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=f;f=O;try{return D()}finally{f=U}},t.unstable_scheduleCallback=function(O,D,U){var te=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?te+U:te):U=te,O){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=U+le,O={id:d++,callback:D,priorityLevel:O,startTime:U,expirationTime:le,sortIndex:-1},U>te?(O.sortIndex=U,e(u,O),r(c)===null&&O===r(u)&&(b?(g(k),k=-1):b=!0,Ce(j,U-te))):(O.sortIndex=le,e(c,O),x||y||(x=!0,Q(_))),O},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(O){var D=f;return function(){var U=f;f=D;try{return O.apply(this,arguments)}finally{f=U}}}})(td);ed.exports=td;var vm=ed.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm=v,De=vm;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rd=new Set,Hn={};function kr(t,e){tn(t,e),tn(t+"Capture",e)}function tn(t,e){for(Hn[t]=e,t=0;t<e.length;t++)rd.add(e[t])}var vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=Object.prototype.hasOwnProperty,bm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cc={},uc={};function jm(t){return Wa.call(uc,t)?!0:Wa.call(cc,t)?!1:bm.test(t)?uc[t]=!0:(cc[t]=!0,!1)}function _m(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function km(t,e,r,n){if(e===null||typeof e>"u"||_m(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ne(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){me[t]=new Ne(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];me[e]=new Ne(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){me[t]=new Ne(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){me[t]=new Ne(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){me[t]=new Ne(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){me[t]=new Ne(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){me[t]=new Ne(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){me[t]=new Ne(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){me[t]=new Ne(t,5,!1,t.toLowerCase(),null,!1,!1)});var tl=/[\-:]([a-z])/g;function rl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tl,rl);me[e]=new Ne(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tl,rl);me[e]=new Ne(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tl,rl);me[e]=new Ne(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){me[t]=new Ne(t,1,!1,t.toLowerCase(),null,!1,!1)});me.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){me[t]=new Ne(t,1,!1,t.toLowerCase(),null,!0,!0)});function nl(t,e,r,n){var s=me.hasOwnProperty(e)?me[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(km(e,r,s,n)&&(r=null),n||s===null?jm(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var _t=wm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_s=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),Ir=Symbol.for("react.fragment"),sl=Symbol.for("react.strict_mode"),qa=Symbol.for("react.profiler"),nd=Symbol.for("react.provider"),sd=Symbol.for("react.context"),il=Symbol.for("react.forward_ref"),Ha=Symbol.for("react.suspense"),Va=Symbol.for("react.suspense_list"),al=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),id=Symbol.for("react.offscreen"),dc=Symbol.iterator;function yn(t){return t===null||typeof t!="object"?null:(t=dc&&t[dc]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Object.assign,la;function Cn(t){if(la===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);la=e&&e[1]||""}return`
`+la+t}var ca=!1;function ua(t,e){if(!t||ca)return"";ca=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{ca=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Cn(t):""}function Nm(t){switch(t.tag){case 5:return Cn(t.type);case 16:return Cn("Lazy");case 13:return Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 2:case 15:return t=ua(t.type,!1),t;case 11:return t=ua(t.type.render,!1),t;case 1:return t=ua(t.type,!0),t;default:return""}}function Ka(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ir:return"Fragment";case Lr:return"Portal";case qa:return"Profiler";case sl:return"StrictMode";case Ha:return"Suspense";case Va:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sd:return(t.displayName||"Context")+".Consumer";case nd:return(t._context.displayName||"Context")+".Provider";case il:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case al:return e=t.displayName||null,e!==null?e:Ka(t.type)||"Memo";case Pt:e=t._payload,t=t._init;try{return Ka(t(e))}catch{}}return null}function Sm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ka(e);case 8:return e===sl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ad(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cm(t){var e=ad(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ks(t){t._valueTracker||(t._valueTracker=Cm(t))}function od(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ad(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ii(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ga(t,e){var r=e.checked;return Z({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function hc(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Gt(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ld(t,e){e=e.checked,e!=null&&nl(t,"checked",e,!1)}function Ya(t,e){ld(t,e);var r=Gt(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qa(t,e.type,r):e.hasOwnProperty("defaultValue")&&Qa(t,e.type,Gt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fc(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Qa(t,e,r){(e!=="number"||ii(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var En=Array.isArray;function Kr(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Gt(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ja(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return Z({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mc(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(E(92));if(En(r)){if(1<r.length)throw Error(E(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Gt(r)}}function cd(t,e){var r=Gt(e.value),n=Gt(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function pc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ud(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ud(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ns,dd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ns=Ns||document.createElement("div"),Ns.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ns.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var $n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Em=["Webkit","ms","Moz","O"];Object.keys($n).forEach(function(t){Em.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$n[e]=$n[t]})});function hd(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||$n.hasOwnProperty(t)&&$n[t]?(""+e).trim():e+"px"}function fd(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=hd(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Pm=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Za(t,e){if(e){if(Pm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function eo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var to=null;function ol(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ro=null,Gr=null,Yr=null;function gc(t){if(t=ms(t)){if(typeof ro!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Ui(e),ro(t.stateNode,t.type,e))}}function md(t){Gr?Yr?Yr.push(t):Yr=[t]:Gr=t}function pd(){if(Gr){var t=Gr,e=Yr;if(Yr=Gr=null,gc(t),e)for(t=0;t<e.length;t++)gc(e[t])}}function gd(t,e){return t(e)}function yd(){}var da=!1;function xd(t,e,r){if(da)return t(e,r);da=!0;try{return gd(t,e,r)}finally{da=!1,(Gr!==null||Yr!==null)&&(yd(),pd())}}function Kn(t,e){var r=t.stateNode;if(r===null)return null;var n=Ui(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(E(231,e,typeof r));return r}var no=!1;if(vt)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){no=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{no=!1}function Tm(t,e,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Rn=!1,ai=null,oi=!1,so=null,Om={onError:function(t){Rn=!0,ai=t}};function $m(t,e,r,n,s,i,o,l,c){Rn=!1,ai=null,Tm.apply(Om,arguments)}function Rm(t,e,r,n,s,i,o,l,c){if($m.apply(this,arguments),Rn){if(Rn){var u=ai;Rn=!1,ai=null}else throw Error(E(198));oi||(oi=!0,so=u)}}function Nr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function vd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yc(t){if(Nr(t)!==t)throw Error(E(188))}function Am(t){var e=t.alternate;if(!e){if(e=Nr(t),e===null)throw Error(E(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return yc(s),t;if(i===n)return yc(s),e;i=i.sibling}throw Error(E(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(E(189))}}if(r.alternate!==n)throw Error(E(190))}if(r.tag!==3)throw Error(E(188));return r.stateNode.current===r?t:e}function wd(t){return t=Am(t),t!==null?bd(t):null}function bd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bd(t);if(e!==null)return e;t=t.sibling}return null}var jd=De.unstable_scheduleCallback,xc=De.unstable_cancelCallback,Lm=De.unstable_shouldYield,Im=De.unstable_requestPaint,re=De.unstable_now,Dm=De.unstable_getCurrentPriorityLevel,ll=De.unstable_ImmediatePriority,_d=De.unstable_UserBlockingPriority,li=De.unstable_NormalPriority,Mm=De.unstable_LowPriority,kd=De.unstable_IdlePriority,Li=null,at=null;function Um(t){if(at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(Li,t,void 0,(t.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:Bm,zm=Math.log,Fm=Math.LN2;function Bm(t){return t>>>=0,t===0?32:31-(zm(t)/Fm|0)|0}var Ss=64,Cs=4194304;function Pn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ci(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Pn(l):(i&=o,i!==0&&(n=Pn(i)))}else o=r&~s,o!==0?n=Pn(o):i!==0&&(n=Pn(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ze(e),s=1<<r,n|=t[r],e&=~s;return n}function Wm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qm(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ze(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Wm(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function io(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nd(){var t=Ss;return Ss<<=1,!(Ss&4194240)&&(Ss=64),t}function ha(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function hs(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ze(e),t[e]=r}function Hm(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Ze(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function cl(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ze(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var W=0;function Sd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cd,ul,Ed,Pd,Td,ao=!1,Es=[],Dt=null,Mt=null,Ut=null,Gn=new Map,Yn=new Map,Ot=[],Vm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vc(t,e){switch(t){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Gn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(e.pointerId)}}function vn(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ms(e),e!==null&&ul(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Km(t,e,r,n,s){switch(e){case"focusin":return Dt=vn(Dt,t,e,r,n,s),!0;case"dragenter":return Mt=vn(Mt,t,e,r,n,s),!0;case"mouseover":return Ut=vn(Ut,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Gn.set(i,vn(Gn.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Yn.set(i,vn(Yn.get(i)||null,t,e,r,n,s)),!0}return!1}function Od(t){var e=hr(t.target);if(e!==null){var r=Nr(e);if(r!==null){if(e=r.tag,e===13){if(e=vd(r),e!==null){t.blockedOn=e,Td(t.priority,function(){Ed(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=oo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);to=n,r.target.dispatchEvent(n),to=null}else return e=ms(r),e!==null&&ul(e),t.blockedOn=r,!1;e.shift()}return!0}function wc(t,e,r){Vs(t)&&r.delete(e)}function Gm(){ao=!1,Dt!==null&&Vs(Dt)&&(Dt=null),Mt!==null&&Vs(Mt)&&(Mt=null),Ut!==null&&Vs(Ut)&&(Ut=null),Gn.forEach(wc),Yn.forEach(wc)}function wn(t,e){t.blockedOn===e&&(t.blockedOn=null,ao||(ao=!0,De.unstable_scheduleCallback(De.unstable_NormalPriority,Gm)))}function Qn(t){function e(s){return wn(s,t)}if(0<Es.length){wn(Es[0],t);for(var r=1;r<Es.length;r++){var n=Es[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Dt!==null&&wn(Dt,t),Mt!==null&&wn(Mt,t),Ut!==null&&wn(Ut,t),Gn.forEach(e),Yn.forEach(e),r=0;r<Ot.length;r++)n=Ot[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ot.length&&(r=Ot[0],r.blockedOn===null);)Od(r),r.blockedOn===null&&Ot.shift()}var Qr=_t.ReactCurrentBatchConfig,ui=!0;function Ym(t,e,r,n){var s=W,i=Qr.transition;Qr.transition=null;try{W=1,dl(t,e,r,n)}finally{W=s,Qr.transition=i}}function Qm(t,e,r,n){var s=W,i=Qr.transition;Qr.transition=null;try{W=4,dl(t,e,r,n)}finally{W=s,Qr.transition=i}}function dl(t,e,r,n){if(ui){var s=oo(t,e,r,n);if(s===null)ja(t,e,n,di,r),vc(t,n);else if(Km(s,t,e,r,n))n.stopPropagation();else if(vc(t,n),e&4&&-1<Vm.indexOf(t)){for(;s!==null;){var i=ms(s);if(i!==null&&Cd(i),i=oo(t,e,r,n),i===null&&ja(t,e,n,di,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ja(t,e,n,null,r)}}var di=null;function oo(t,e,r,n){if(di=null,t=ol(n),t=hr(t),t!==null)if(e=Nr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=vd(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return di=t,null}function $d(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dm()){case ll:return 1;case _d:return 4;case li:case Mm:return 16;case kd:return 536870912;default:return 16}default:return 16}}var At=null,hl=null,Ks=null;function Rd(){if(Ks)return Ks;var t,e=hl,r=e.length,n,s="value"in At?At.value:At.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return Ks=s.slice(t,1<n?1-n:void 0)}function Gs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ps(){return!0}function bc(){return!1}function Ue(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ps:bc,this.isPropagationStopped=bc,this}return Z(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),e}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fl=Ue(hn),fs=Z({},hn,{view:0,detail:0}),Jm=Ue(fs),fa,ma,bn,Ii=Z({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ml,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bn&&(bn&&t.type==="mousemove"?(fa=t.screenX-bn.screenX,ma=t.screenY-bn.screenY):ma=fa=0,bn=t),fa)},movementY:function(t){return"movementY"in t?t.movementY:ma}}),jc=Ue(Ii),Xm=Z({},Ii,{dataTransfer:0}),Zm=Ue(Xm),ep=Z({},fs,{relatedTarget:0}),pa=Ue(ep),tp=Z({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),rp=Ue(tp),np=Z({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sp=Ue(np),ip=Z({},hn,{data:0}),_c=Ue(ip),ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lp[t])?!!e[t]:!1}function ml(){return cp}var up=Z({},fs,{key:function(t){if(t.key){var e=ap[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?op[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ml,charCode:function(t){return t.type==="keypress"?Gs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dp=Ue(up),hp=Z({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kc=Ue(hp),fp=Z({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ml}),mp=Ue(fp),pp=Z({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),gp=Ue(pp),yp=Z({},Ii,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xp=Ue(yp),vp=[9,13,27,32],pl=vt&&"CompositionEvent"in window,An=null;vt&&"documentMode"in document&&(An=document.documentMode);var wp=vt&&"TextEvent"in window&&!An,Ad=vt&&(!pl||An&&8<An&&11>=An),Nc=" ",Sc=!1;function Ld(t,e){switch(t){case"keyup":return vp.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Id(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dr=!1;function bp(t,e){switch(t){case"compositionend":return Id(e);case"keypress":return e.which!==32?null:(Sc=!0,Nc);case"textInput":return t=e.data,t===Nc&&Sc?null:t;default:return null}}function jp(t,e){if(Dr)return t==="compositionend"||!pl&&Ld(t,e)?(t=Rd(),Ks=hl=At=null,Dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ad&&e.locale!=="ko"?null:e.data;default:return null}}var _p={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_p[t.type]:e==="textarea"}function Dd(t,e,r,n){md(n),e=hi(e,"onChange"),0<e.length&&(r=new fl("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ln=null,Jn=null;function kp(t){Gd(t,0)}function Di(t){var e=zr(t);if(od(e))return t}function Np(t,e){if(t==="change")return e}var Md=!1;if(vt){var ga;if(vt){var ya="oninput"in document;if(!ya){var Ec=document.createElement("div");Ec.setAttribute("oninput","return;"),ya=typeof Ec.oninput=="function"}ga=ya}else ga=!1;Md=ga&&(!document.documentMode||9<document.documentMode)}function Pc(){Ln&&(Ln.detachEvent("onpropertychange",Ud),Jn=Ln=null)}function Ud(t){if(t.propertyName==="value"&&Di(Jn)){var e=[];Dd(e,Jn,t,ol(t)),xd(kp,e)}}function Sp(t,e,r){t==="focusin"?(Pc(),Ln=e,Jn=r,Ln.attachEvent("onpropertychange",Ud)):t==="focusout"&&Pc()}function Cp(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Di(Jn)}function Ep(t,e){if(t==="click")return Di(e)}function Pp(t,e){if(t==="input"||t==="change")return Di(e)}function Tp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tt=typeof Object.is=="function"?Object.is:Tp;function Xn(t,e){if(tt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Wa.call(e,s)||!tt(t[s],e[s]))return!1}return!0}function Tc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Oc(t,e){var r=Tc(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tc(r)}}function zd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fd(){for(var t=window,e=ii();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ii(t.document)}return e}function gl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Op(t){var e=Fd(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&zd(r.ownerDocument.documentElement,r)){if(n!==null&&gl(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Oc(r,i);var o=Oc(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $p=vt&&"documentMode"in document&&11>=document.documentMode,Mr=null,lo=null,In=null,co=!1;function $c(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;co||Mr==null||Mr!==ii(n)||(n=Mr,"selectionStart"in n&&gl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),In&&Xn(In,n)||(In=n,n=hi(lo,"onSelect"),0<n.length&&(e=new fl("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Mr)))}function Ts(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ur={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},xa={},Bd={};vt&&(Bd=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function Mi(t){if(xa[t])return xa[t];if(!Ur[t])return t;var e=Ur[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Bd)return xa[t]=e[r];return t}var Wd=Mi("animationend"),qd=Mi("animationiteration"),Hd=Mi("animationstart"),Vd=Mi("transitionend"),Kd=new Map,Rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zt(t,e){Kd.set(t,e),kr(e,[t])}for(var va=0;va<Rc.length;va++){var wa=Rc[va],Rp=wa.toLowerCase(),Ap=wa[0].toUpperCase()+wa.slice(1);Zt(Rp,"on"+Ap)}Zt(Wd,"onAnimationEnd");Zt(qd,"onAnimationIteration");Zt(Hd,"onAnimationStart");Zt("dblclick","onDoubleClick");Zt("focusin","onFocus");Zt("focusout","onBlur");Zt(Vd,"onTransitionEnd");tn("onMouseEnter",["mouseout","mouseover"]);tn("onMouseLeave",["mouseout","mouseover"]);tn("onPointerEnter",["pointerout","pointerover"]);tn("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tn));function Ac(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Rm(n,e,void 0,t),t.currentTarget=null}function Gd(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ac(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ac(s,l,u),i=c}}}if(oi)throw t=so,oi=!1,so=null,t}function V(t,e){var r=e[po];r===void 0&&(r=e[po]=new Set);var n=t+"__bubble";r.has(n)||(Yd(e,t,2,!1),r.add(n))}function ba(t,e,r){var n=0;e&&(n|=4),Yd(r,t,n,e)}var Os="_reactListening"+Math.random().toString(36).slice(2);function Zn(t){if(!t[Os]){t[Os]=!0,rd.forEach(function(r){r!=="selectionchange"&&(Lp.has(r)||ba(r,!1,t),ba(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Os]||(e[Os]=!0,ba("selectionchange",!1,e))}}function Yd(t,e,r,n){switch($d(e)){case 1:var s=Ym;break;case 4:s=Qm;break;default:s=dl}r=s.bind(null,e,r,t),s=void 0,!no||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function ja(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=hr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}xd(function(){var u=i,d=ol(r),h=[];e:{var f=Kd.get(t);if(f!==void 0){var y=fl,x=t;switch(t){case"keypress":if(Gs(r)===0)break e;case"keydown":case"keyup":y=dp;break;case"focusin":x="focus",y=pa;break;case"focusout":x="blur",y=pa;break;case"beforeblur":case"afterblur":y=pa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=mp;break;case Wd:case qd:case Hd:y=rp;break;case Vd:y=gp;break;case"scroll":y=Jm;break;case"wheel":y=xp;break;case"copy":case"cut":case"paste":y=sp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=kc}var b=(e&4)!==0,N=!b&&t==="scroll",g=b?f!==null?f+"Capture":null:f;b=[];for(var p=u,m;p!==null;){m=p;var j=m.stateNode;if(m.tag===5&&j!==null&&(m=j,g!==null&&(j=Kn(p,g),j!=null&&b.push(es(p,j,m)))),N)break;p=p.return}0<b.length&&(f=new y(f,x,null,r,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&r!==to&&(x=r.relatedTarget||r.fromElement)&&(hr(x)||x[wt]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(x=r.relatedTarget||r.toElement,y=u,x=x?hr(x):null,x!==null&&(N=Nr(x),x!==N||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(b=jc,j="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(b=kc,j="onPointerLeave",g="onPointerEnter",p="pointer"),N=y==null?f:zr(y),m=x==null?f:zr(x),f=new b(j,p+"leave",y,r,d),f.target=N,f.relatedTarget=m,j=null,hr(d)===u&&(b=new b(g,p+"enter",x,r,d),b.target=m,b.relatedTarget=N,j=b),N=j,y&&x)t:{for(b=y,g=x,p=0,m=b;m;m=Cr(m))p++;for(m=0,j=g;j;j=Cr(j))m++;for(;0<p-m;)b=Cr(b),p--;for(;0<m-p;)g=Cr(g),m--;for(;p--;){if(b===g||g!==null&&b===g.alternate)break t;b=Cr(b),g=Cr(g)}b=null}else b=null;y!==null&&Lc(h,f,y,b,!1),x!==null&&N!==null&&Lc(h,N,x,b,!0)}}e:{if(f=u?zr(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var _=Np;else if(Cc(f))if(Md)_=Pp;else{_=Cp;var C=Sp}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Ep);if(_&&(_=_(t,u))){Dd(h,_,r,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Qa(f,"number",f.value)}switch(C=u?zr(u):window,t){case"focusin":(Cc(C)||C.contentEditable==="true")&&(Mr=C,lo=u,In=null);break;case"focusout":In=lo=Mr=null;break;case"mousedown":co=!0;break;case"contextmenu":case"mouseup":case"dragend":co=!1,$c(h,r,d);break;case"selectionchange":if($p)break;case"keydown":case"keyup":$c(h,r,d)}var w;if(pl)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Dr?Ld(t,r)&&(k="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Ad&&r.locale!=="ko"&&(Dr||k!=="onCompositionStart"?k==="onCompositionEnd"&&Dr&&(w=Rd()):(At=d,hl="value"in At?At.value:At.textContent,Dr=!0)),C=hi(u,k),0<C.length&&(k=new _c(k,t,null,r,d),h.push({event:k,listeners:C}),w?k.data=w:(w=Id(r),w!==null&&(k.data=w)))),(w=wp?bp(t,r):jp(t,r))&&(u=hi(u,"onBeforeInput"),0<u.length&&(d=new _c("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=w))}Gd(h,e)})}function es(t,e,r){return{instance:t,listener:e,currentTarget:r}}function hi(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Kn(t,r),i!=null&&n.unshift(es(t,i,s)),i=Kn(t,e),i!=null&&n.push(es(t,i,s))),t=t.return}return n}function Cr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lc(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Kn(r,i),c!=null&&o.unshift(es(r,c,l))):s||(c=Kn(r,i),c!=null&&o.push(es(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Ip=/\r\n?/g,Dp=/\u0000|\uFFFD/g;function Ic(t){return(typeof t=="string"?t:""+t).replace(Ip,`
`).replace(Dp,"")}function $s(t,e,r){if(e=Ic(e),Ic(t)!==e&&r)throw Error(E(425))}function fi(){}var uo=null,ho=null;function fo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mo=typeof setTimeout=="function"?setTimeout:void 0,Mp=typeof clearTimeout=="function"?clearTimeout:void 0,Dc=typeof Promise=="function"?Promise:void 0,Up=typeof queueMicrotask=="function"?queueMicrotask:typeof Dc<"u"?function(t){return Dc.resolve(null).then(t).catch(zp)}:mo;function zp(t){setTimeout(function(){throw t})}function _a(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Qn(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Qn(e)}function zt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var fn=Math.random().toString(36).slice(2),it="__reactFiber$"+fn,ts="__reactProps$"+fn,wt="__reactContainer$"+fn,po="__reactEvents$"+fn,Fp="__reactListeners$"+fn,Bp="__reactHandles$"+fn;function hr(t){var e=t[it];if(e)return e;for(var r=t.parentNode;r;){if(e=r[wt]||r[it]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Mc(t);t!==null;){if(r=t[it])return r;t=Mc(t)}return e}t=r,r=t.parentNode}return null}function ms(t){return t=t[it]||t[wt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Ui(t){return t[ts]||null}var go=[],Fr=-1;function er(t){return{current:t}}function K(t){0>Fr||(t.current=go[Fr],go[Fr]=null,Fr--)}function H(t,e){Fr++,go[Fr]=t.current,t.current=e}var Yt={},xe=er(Yt),Oe=er(!1),xr=Yt;function rn(t,e){var r=t.type.contextTypes;if(!r)return Yt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $e(t){return t=t.childContextTypes,t!=null}function mi(){K(Oe),K(xe)}function Uc(t,e,r){if(xe.current!==Yt)throw Error(E(168));H(xe,e),H(Oe,r)}function Qd(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(E(108,Sm(t)||"Unknown",s));return Z({},r,n)}function pi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yt,xr=xe.current,H(xe,t),H(Oe,Oe.current),!0}function zc(t,e,r){var n=t.stateNode;if(!n)throw Error(E(169));r?(t=Qd(t,e,xr),n.__reactInternalMemoizedMergedChildContext=t,K(Oe),K(xe),H(xe,t)):K(Oe),H(Oe,r)}var ft=null,zi=!1,ka=!1;function Jd(t){ft===null?ft=[t]:ft.push(t)}function Wp(t){zi=!0,Jd(t)}function tr(){if(!ka&&ft!==null){ka=!0;var t=0,e=W;try{var r=ft;for(W=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ft=null,zi=!1}catch(s){throw ft!==null&&(ft=ft.slice(t+1)),jd(ll,tr),s}finally{W=e,ka=!1}}return null}var Br=[],Wr=0,gi=null,yi=0,ze=[],Fe=0,vr=null,pt=1,gt="";function lr(t,e){Br[Wr++]=yi,Br[Wr++]=gi,gi=t,yi=e}function Xd(t,e,r){ze[Fe++]=pt,ze[Fe++]=gt,ze[Fe++]=vr,vr=t;var n=pt;t=gt;var s=32-Ze(n)-1;n&=~(1<<s),r+=1;var i=32-Ze(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,pt=1<<32-Ze(e)+s|r<<s|n,gt=i+t}else pt=1<<i|r<<s|n,gt=t}function yl(t){t.return!==null&&(lr(t,1),Xd(t,1,0))}function xl(t){for(;t===gi;)gi=Br[--Wr],Br[Wr]=null,yi=Br[--Wr],Br[Wr]=null;for(;t===vr;)vr=ze[--Fe],ze[Fe]=null,gt=ze[--Fe],ze[Fe]=null,pt=ze[--Fe],ze[Fe]=null}var Ie=null,Le=null,Y=!1,Xe=null;function Zd(t,e){var r=Be(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Fc(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ie=t,Le=zt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ie=t,Le=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=vr!==null?{id:pt,overflow:gt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Be(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ie=t,Le=null,!0):!1;default:return!1}}function yo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xo(t){if(Y){var e=Le;if(e){var r=e;if(!Fc(t,e)){if(yo(t))throw Error(E(418));e=zt(r.nextSibling);var n=Ie;e&&Fc(t,e)?Zd(n,r):(t.flags=t.flags&-4097|2,Y=!1,Ie=t)}}else{if(yo(t))throw Error(E(418));t.flags=t.flags&-4097|2,Y=!1,Ie=t}}}function Bc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ie=t}function Rs(t){if(t!==Ie)return!1;if(!Y)return Bc(t),Y=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fo(t.type,t.memoizedProps)),e&&(e=Le)){if(yo(t))throw eh(),Error(E(418));for(;e;)Zd(t,e),e=zt(e.nextSibling)}if(Bc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Le=zt(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Le=null}}else Le=Ie?zt(t.stateNode.nextSibling):null;return!0}function eh(){for(var t=Le;t;)t=zt(t.nextSibling)}function nn(){Le=Ie=null,Y=!1}function vl(t){Xe===null?Xe=[t]:Xe.push(t)}var qp=_t.ReactCurrentBatchConfig;function jn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(E(309));var n=r.stateNode}if(!n)throw Error(E(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(E(284));if(!r._owner)throw Error(E(290,t))}return t}function As(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wc(t){var e=t._init;return e(t._payload)}function th(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function r(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=qt(g,p),g.index=0,g.sibling=null,g}function i(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,j){return p===null||p.tag!==6?(p=Oa(m,g.mode,j),p.return=g,p):(p=s(p,m),p.return=g,p)}function c(g,p,m,j){var _=m.type;return _===Ir?d(g,p,m.props.children,j,m.key):p!==null&&(p.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Pt&&Wc(_)===p.type)?(j=s(p,m.props),j.ref=jn(g,p,m),j.return=g,j):(j=ti(m.type,m.key,m.props,null,g.mode,j),j.ref=jn(g,p,m),j.return=g,j)}function u(g,p,m,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=$a(m,g.mode,j),p.return=g,p):(p=s(p,m.children||[]),p.return=g,p)}function d(g,p,m,j,_){return p===null||p.tag!==7?(p=gr(m,g.mode,j,_),p.return=g,p):(p=s(p,m),p.return=g,p)}function h(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Oa(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case _s:return m=ti(p.type,p.key,p.props,null,g.mode,m),m.ref=jn(g,null,p),m.return=g,m;case Lr:return p=$a(p,g.mode,m),p.return=g,p;case Pt:var j=p._init;return h(g,j(p._payload),m)}if(En(p)||yn(p))return p=gr(p,g.mode,m,null),p.return=g,p;As(g,p)}return null}function f(g,p,m,j){var _=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return _!==null?null:l(g,p,""+m,j);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _s:return m.key===_?c(g,p,m,j):null;case Lr:return m.key===_?u(g,p,m,j):null;case Pt:return _=m._init,f(g,p,_(m._payload),j)}if(En(m)||yn(m))return _!==null?null:d(g,p,m,j,null);As(g,m)}return null}function y(g,p,m,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(m)||null,l(p,g,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _s:return g=g.get(j.key===null?m:j.key)||null,c(p,g,j,_);case Lr:return g=g.get(j.key===null?m:j.key)||null,u(p,g,j,_);case Pt:var C=j._init;return y(g,p,m,C(j._payload),_)}if(En(j)||yn(j))return g=g.get(m)||null,d(p,g,j,_,null);As(p,j)}return null}function x(g,p,m,j){for(var _=null,C=null,w=p,k=p=0,S=null;w!==null&&k<m.length;k++){w.index>k?(S=w,w=null):S=w.sibling;var T=f(g,w,m[k],j);if(T===null){w===null&&(w=S);break}t&&w&&T.alternate===null&&e(g,w),p=i(T,p,k),C===null?_=T:C.sibling=T,C=T,w=S}if(k===m.length)return r(g,w),Y&&lr(g,k),_;if(w===null){for(;k<m.length;k++)w=h(g,m[k],j),w!==null&&(p=i(w,p,k),C===null?_=w:C.sibling=w,C=w);return Y&&lr(g,k),_}for(w=n(g,w);k<m.length;k++)S=y(w,g,k,m[k],j),S!==null&&(t&&S.alternate!==null&&w.delete(S.key===null?k:S.key),p=i(S,p,k),C===null?_=S:C.sibling=S,C=S);return t&&w.forEach(function(A){return e(g,A)}),Y&&lr(g,k),_}function b(g,p,m,j){var _=yn(m);if(typeof _!="function")throw Error(E(150));if(m=_.call(m),m==null)throw Error(E(151));for(var C=_=null,w=p,k=p=0,S=null,T=m.next();w!==null&&!T.done;k++,T=m.next()){w.index>k?(S=w,w=null):S=w.sibling;var A=f(g,w,T.value,j);if(A===null){w===null&&(w=S);break}t&&w&&A.alternate===null&&e(g,w),p=i(A,p,k),C===null?_=A:C.sibling=A,C=A,w=S}if(T.done)return r(g,w),Y&&lr(g,k),_;if(w===null){for(;!T.done;k++,T=m.next())T=h(g,T.value,j),T!==null&&(p=i(T,p,k),C===null?_=T:C.sibling=T,C=T);return Y&&lr(g,k),_}for(w=n(g,w);!T.done;k++,T=m.next())T=y(w,g,k,T.value,j),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?k:T.key),p=i(T,p,k),C===null?_=T:C.sibling=T,C=T);return t&&w.forEach(function(P){return e(g,P)}),Y&&lr(g,k),_}function N(g,p,m,j){if(typeof m=="object"&&m!==null&&m.type===Ir&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case _s:e:{for(var _=m.key,C=p;C!==null;){if(C.key===_){if(_=m.type,_===Ir){if(C.tag===7){r(g,C.sibling),p=s(C,m.props.children),p.return=g,g=p;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Pt&&Wc(_)===C.type){r(g,C.sibling),p=s(C,m.props),p.ref=jn(g,C,m),p.return=g,g=p;break e}r(g,C);break}else e(g,C);C=C.sibling}m.type===Ir?(p=gr(m.props.children,g.mode,j,m.key),p.return=g,g=p):(j=ti(m.type,m.key,m.props,null,g.mode,j),j.ref=jn(g,p,m),j.return=g,g=j)}return o(g);case Lr:e:{for(C=m.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){r(g,p.sibling),p=s(p,m.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else e(g,p);p=p.sibling}p=$a(m,g.mode,j),p.return=g,g=p}return o(g);case Pt:return C=m._init,N(g,p,C(m._payload),j)}if(En(m))return x(g,p,m,j);if(yn(m))return b(g,p,m,j);As(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(r(g,p.sibling),p=s(p,m),p.return=g,g=p):(r(g,p),p=Oa(m,g.mode,j),p.return=g,g=p),o(g)):r(g,p)}return N}var sn=th(!0),rh=th(!1),xi=er(null),vi=null,qr=null,wl=null;function bl(){wl=qr=vi=null}function jl(t){var e=xi.current;K(xi),t._currentValue=e}function vo(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Jr(t,e){vi=t,wl=qr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Te=!0),t.firstContext=null)}function He(t){var e=t._currentValue;if(wl!==t)if(t={context:t,memoizedValue:e,next:null},qr===null){if(vi===null)throw Error(E(308));qr=t,vi.dependencies={lanes:0,firstContext:t}}else qr=qr.next=t;return e}var fr=null;function _l(t){fr===null?fr=[t]:fr.push(t)}function nh(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,_l(e)):(r.next=s.next,s.next=r),e.interleaved=r,bt(t,n)}function bt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Tt=!1;function kl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ft(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,B&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,bt(t,r)}return s=n.interleaved,s===null?(e.next=e,_l(n)):(e.next=s.next,s.next=e),n.interleaved=e,bt(t,r)}function Ys(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,cl(t,r)}}function qc(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function wi(t,e,r,n){var s=t.updateQueue;Tt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,y=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,b=l;switch(f=e,y=r,b.tag){case 1:if(x=b.payload,typeof x=="function"){h=x.call(y,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,f=typeof x=="function"?x.call(y,h,f):x,f==null)break e;h=Z({},h,f);break e;case 2:Tt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);br|=o,t.lanes=o,t.memoizedState=h}}function Hc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(E(191,s));s.call(n)}}}var ps={},ot=er(ps),rs=er(ps),ns=er(ps);function mr(t){if(t===ps)throw Error(E(174));return t}function Nl(t,e){switch(H(ns,e),H(rs,t),H(ot,ps),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xa(e,t)}K(ot),H(ot,e)}function an(){K(ot),K(rs),K(ns)}function ih(t){mr(ns.current);var e=mr(ot.current),r=Xa(e,t.type);e!==r&&(H(rs,t),H(ot,r))}function Sl(t){rs.current===t&&(K(ot),K(rs))}var J=er(0);function bi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Na=[];function Cl(){for(var t=0;t<Na.length;t++)Na[t]._workInProgressVersionPrimary=null;Na.length=0}var Qs=_t.ReactCurrentDispatcher,Sa=_t.ReactCurrentBatchConfig,wr=0,X=null,ae=null,ce=null,ji=!1,Dn=!1,ss=0,Hp=0;function pe(){throw Error(E(321))}function El(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!tt(t[r],e[r]))return!1;return!0}function Pl(t,e,r,n,s,i){if(wr=i,X=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qs.current=t===null||t.memoizedState===null?Yp:Qp,t=r(n,s),Dn){i=0;do{if(Dn=!1,ss=0,25<=i)throw Error(E(301));i+=1,ce=ae=null,e.updateQueue=null,Qs.current=Jp,t=r(n,s)}while(Dn)}if(Qs.current=_i,e=ae!==null&&ae.next!==null,wr=0,ce=ae=X=null,ji=!1,e)throw Error(E(300));return t}function Tl(){var t=ss!==0;return ss=0,t}function nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ce===null?X.memoizedState=ce=t:ce=ce.next=t,ce}function Ve(){if(ae===null){var t=X.alternate;t=t!==null?t.memoizedState:null}else t=ae.next;var e=ce===null?X.memoizedState:ce.next;if(e!==null)ce=e,ae=t;else{if(t===null)throw Error(E(310));ae=t,t={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},ce===null?X.memoizedState=ce=t:ce=ce.next=t}return ce}function is(t,e){return typeof e=="function"?e(t):e}function Ca(t){var e=Ve(),r=e.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=t;var n=ae,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((wr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,X.lanes|=d,br|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,tt(n,e.memoizedState)||(Te=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,X.lanes|=i,br|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ea(t){var e=Ve(),r=e.queue;if(r===null)throw Error(E(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);tt(i,e.memoizedState)||(Te=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function ah(){}function oh(t,e){var r=X,n=Ve(),s=e(),i=!tt(n.memoizedState,s);if(i&&(n.memoizedState=s,Te=!0),n=n.queue,Ol(uh.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||ce!==null&&ce.memoizedState.tag&1){if(r.flags|=2048,as(9,ch.bind(null,r,n,s,e),void 0,null),ue===null)throw Error(E(349));wr&30||lh(r,e,s)}return s}function lh(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ch(t,e,r,n){e.value=r,e.getSnapshot=n,dh(e)&&hh(t)}function uh(t,e,r){return r(function(){dh(e)&&hh(t)})}function dh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!tt(t,r)}catch{return!0}}function hh(t){var e=bt(t,1);e!==null&&et(e,t,1,-1)}function Vc(t){var e=nt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:t},e.queue=t,t=t.dispatch=Gp.bind(null,X,t),[e.memoizedState,t]}function as(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function fh(){return Ve().memoizedState}function Js(t,e,r,n){var s=nt();X.flags|=t,s.memoizedState=as(1|e,r,void 0,n===void 0?null:n)}function Fi(t,e,r,n){var s=Ve();n=n===void 0?null:n;var i=void 0;if(ae!==null){var o=ae.memoizedState;if(i=o.destroy,n!==null&&El(n,o.deps)){s.memoizedState=as(e,r,i,n);return}}X.flags|=t,s.memoizedState=as(1|e,r,i,n)}function Kc(t,e){return Js(8390656,8,t,e)}function Ol(t,e){return Fi(2048,8,t,e)}function mh(t,e){return Fi(4,2,t,e)}function ph(t,e){return Fi(4,4,t,e)}function gh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yh(t,e,r){return r=r!=null?r.concat([t]):null,Fi(4,4,gh.bind(null,e,t),r)}function $l(){}function xh(t,e){var r=Ve();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&El(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function vh(t,e){var r=Ve();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&El(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function wh(t,e,r){return wr&21?(tt(r,e)||(r=Nd(),X.lanes|=r,br|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Te=!0),t.memoizedState=r)}function Vp(t,e){var r=W;W=r!==0&&4>r?r:4,t(!0);var n=Sa.transition;Sa.transition={};try{t(!1),e()}finally{W=r,Sa.transition=n}}function bh(){return Ve().memoizedState}function Kp(t,e,r){var n=Wt(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},jh(t))_h(e,r);else if(r=nh(t,e,r,n),r!==null){var s=_e();et(r,t,n,s),kh(r,e,n)}}function Gp(t,e,r){var n=Wt(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(jh(t))_h(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,tt(l,o)){var c=e.interleaved;c===null?(s.next=s,_l(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=nh(t,e,s,n),r!==null&&(s=_e(),et(r,t,n,s),kh(r,e,n))}}function jh(t){var e=t.alternate;return t===X||e!==null&&e===X}function _h(t,e){Dn=ji=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function kh(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,cl(t,r)}}var _i={readContext:He,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useInsertionEffect:pe,useLayoutEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useMutableSource:pe,useSyncExternalStore:pe,useId:pe,unstable_isNewReconciler:!1},Yp={readContext:He,useCallback:function(t,e){return nt().memoizedState=[t,e===void 0?null:e],t},useContext:He,useEffect:Kc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Js(4194308,4,gh.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Js(4194308,4,t,e)},useInsertionEffect:function(t,e){return Js(4,2,t,e)},useMemo:function(t,e){var r=nt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=nt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Kp.bind(null,X,t),[n.memoizedState,t]},useRef:function(t){var e=nt();return t={current:t},e.memoizedState=t},useState:Vc,useDebugValue:$l,useDeferredValue:function(t){return nt().memoizedState=t},useTransition:function(){var t=Vc(!1),e=t[0];return t=Vp.bind(null,t[1]),nt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=X,s=nt();if(Y){if(r===void 0)throw Error(E(407));r=r()}else{if(r=e(),ue===null)throw Error(E(349));wr&30||lh(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,Kc(uh.bind(null,n,i,t),[t]),n.flags|=2048,as(9,ch.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=nt(),e=ue.identifierPrefix;if(Y){var r=gt,n=pt;r=(n&~(1<<32-Ze(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ss++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Hp++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qp={readContext:He,useCallback:xh,useContext:He,useEffect:Ol,useImperativeHandle:yh,useInsertionEffect:mh,useLayoutEffect:ph,useMemo:vh,useReducer:Ca,useRef:fh,useState:function(){return Ca(is)},useDebugValue:$l,useDeferredValue:function(t){var e=Ve();return wh(e,ae.memoizedState,t)},useTransition:function(){var t=Ca(is)[0],e=Ve().memoizedState;return[t,e]},useMutableSource:ah,useSyncExternalStore:oh,useId:bh,unstable_isNewReconciler:!1},Jp={readContext:He,useCallback:xh,useContext:He,useEffect:Ol,useImperativeHandle:yh,useInsertionEffect:mh,useLayoutEffect:ph,useMemo:vh,useReducer:Ea,useRef:fh,useState:function(){return Ea(is)},useDebugValue:$l,useDeferredValue:function(t){var e=Ve();return ae===null?e.memoizedState=t:wh(e,ae.memoizedState,t)},useTransition:function(){var t=Ea(is)[0],e=Ve().memoizedState;return[t,e]},useMutableSource:ah,useSyncExternalStore:oh,useId:bh,unstable_isNewReconciler:!1};function Ye(t,e){if(t&&t.defaultProps){e=Z({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function wo(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Z({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Bi={isMounted:function(t){return(t=t._reactInternals)?Nr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=_e(),s=Wt(t),i=yt(n,s);i.payload=e,r!=null&&(i.callback=r),e=Ft(t,i,s),e!==null&&(et(e,t,s,n),Ys(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=_e(),s=Wt(t),i=yt(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Ft(t,i,s),e!==null&&(et(e,t,s,n),Ys(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_e(),n=Wt(t),s=yt(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ft(t,s,n),e!==null&&(et(e,t,n,r),Ys(e,t,n))}};function Gc(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Xn(r,n)||!Xn(s,i):!0}function Nh(t,e,r){var n=!1,s=Yt,i=e.contextType;return typeof i=="object"&&i!==null?i=He(i):(s=$e(e)?xr:xe.current,n=e.contextTypes,i=(n=n!=null)?rn(t,s):Yt),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bi,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Yc(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Bi.enqueueReplaceState(e,e.state,null)}function bo(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},kl(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=He(i):(i=$e(e)?xr:xe.current,s.context=rn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wo(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Bi.enqueueReplaceState(s,s.state,null),wi(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function on(t,e){try{var r="",n=e;do r+=Nm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Pa(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function jo(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Xp=typeof WeakMap=="function"?WeakMap:Map;function Sh(t,e,r){r=yt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ni||(Ni=!0,$o=n),jo(t,e)},r}function Ch(t,e,r){r=yt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){jo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){jo(t,e),typeof n!="function"&&(Bt===null?Bt=new Set([this]):Bt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Qc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Xp;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=hg.bind(null,t,e,r),e.then(t,t))}function Jc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xc(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=yt(-1,1),e.tag=2,Ft(r,e,1))),r.lanes|=1),t)}var Zp=_t.ReactCurrentOwner,Te=!1;function be(t,e,r,n){e.child=t===null?rh(e,null,r,n):sn(e,t.child,r,n)}function Zc(t,e,r,n,s){r=r.render;var i=e.ref;return Jr(e,s),n=Pl(t,e,r,n,i,s),r=Tl(),t!==null&&!Te?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jt(t,e,s)):(Y&&r&&yl(e),e.flags|=1,be(t,e,n,s),e.child)}function eu(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!zl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Eh(t,e,i,n,s)):(t=ti(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Xn,r(o,n)&&t.ref===e.ref)return jt(t,e,s)}return e.flags|=1,t=qt(i,n),t.ref=e.ref,t.return=e,e.child=t}function Eh(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Xn(i,n)&&t.ref===e.ref)if(Te=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Te=!0);else return e.lanes=t.lanes,jt(t,e,s)}return _o(t,e,r,n,s)}function Ph(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},H(Vr,Ae),Ae|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,H(Vr,Ae),Ae|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,H(Vr,Ae),Ae|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,H(Vr,Ae),Ae|=n;return be(t,e,s,r),e.child}function Th(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function _o(t,e,r,n,s){var i=$e(r)?xr:xe.current;return i=rn(e,i),Jr(e,s),r=Pl(t,e,r,n,i,s),n=Tl(),t!==null&&!Te?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jt(t,e,s)):(Y&&n&&yl(e),e.flags|=1,be(t,e,r,s),e.child)}function tu(t,e,r,n,s){if($e(r)){var i=!0;pi(e)}else i=!1;if(Jr(e,s),e.stateNode===null)Xs(t,e),Nh(e,r,n),bo(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=He(u):(u=$e(r)?xr:xe.current,u=rn(e,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Yc(e,o,n,u),Tt=!1;var f=e.memoizedState;o.state=f,wi(e,n,o,s),c=e.memoizedState,l!==n||f!==c||Oe.current||Tt?(typeof d=="function"&&(wo(e,r,d,n),c=e.memoizedState),(l=Tt||Gc(e,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,sh(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ye(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=He(c):(c=$e(r)?xr:xe.current,c=rn(e,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Yc(e,o,n,c),Tt=!1,f=e.memoizedState,o.state=f,wi(e,n,o,s);var x=e.memoizedState;l!==h||f!==x||Oe.current||Tt?(typeof y=="function"&&(wo(e,r,y,n),x=e.memoizedState),(u=Tt||Gc(e,r,u,n,f,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return ko(t,e,r,n,i,s)}function ko(t,e,r,n,s,i){Th(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&zc(e,r,!1),jt(t,e,i);n=e.stateNode,Zp.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=sn(e,t.child,null,i),e.child=sn(e,null,l,i)):be(t,e,l,i),e.memoizedState=n.state,s&&zc(e,r,!0),e.child}function Oh(t){var e=t.stateNode;e.pendingContext?Uc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uc(t,e.context,!1),Nl(t,e.containerInfo)}function ru(t,e,r,n,s){return nn(),vl(s),e.flags|=256,be(t,e,r,n),e.child}var No={dehydrated:null,treeContext:null,retryLane:0};function So(t){return{baseLanes:t,cachePool:null,transitions:null}}function $h(t,e,r){var n=e.pendingProps,s=J.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),H(J,s&1),t===null)return xo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Hi(o,n,0,null),t=gr(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=So(r),e.memoizedState=No,t):Rl(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return eg(t,e,o,n,l,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=qt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=qt(l,i):(i=gr(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?So(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=No,n}return i=t.child,t=i.sibling,n=qt(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Rl(t,e){return e=Hi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ls(t,e,r,n){return n!==null&&vl(n),sn(e,t.child,null,r),t=Rl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eg(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Pa(Error(E(422))),Ls(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Hi({mode:"visible",children:n.children},s,0,null),i=gr(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&sn(e,t.child,null,o),e.child.memoizedState=So(o),e.memoizedState=No,i);if(!(e.mode&1))return Ls(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(E(419)),n=Pa(i,n,void 0),Ls(t,e,o,n)}if(l=(o&t.childLanes)!==0,Te||l){if(n=ue,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,bt(t,s),et(n,t,s,-1))}return Ul(),n=Pa(Error(E(421))),Ls(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fg.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Le=zt(s.nextSibling),Ie=e,Y=!0,Xe=null,t!==null&&(ze[Fe++]=pt,ze[Fe++]=gt,ze[Fe++]=vr,pt=t.id,gt=t.overflow,vr=e),e=Rl(e,n.children),e.flags|=4096,e)}function nu(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),vo(t.return,e,r)}function Ta(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Rh(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(be(t,e,n.children,r),n=J.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nu(t,r,e);else if(t.tag===19)nu(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(H(J,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&bi(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Ta(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bi(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Ta(e,!0,r,null,i);break;case"together":Ta(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),br|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,r=qt(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=qt(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function tg(t,e,r){switch(e.tag){case 3:Oh(e),nn();break;case 5:ih(e);break;case 1:$e(e.type)&&pi(e);break;case 4:Nl(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;H(xi,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(H(J,J.current&1),e.flags|=128,null):r&e.child.childLanes?$h(t,e,r):(H(J,J.current&1),t=jt(t,e,r),t!==null?t.sibling:null);H(J,J.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Rh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),H(J,J.current),n)break;return null;case 22:case 23:return e.lanes=0,Ph(t,e,r)}return jt(t,e,r)}var Ah,Co,Lh,Ih;Ah=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Co=function(){};Lh=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,mr(ot.current);var i=null;switch(r){case"input":s=Ga(t,s),n=Ga(t,n),i=[];break;case"select":s=Z({},s,{value:void 0}),n=Z({},n,{value:void 0}),i=[];break;case"textarea":s=Ja(t,s),n=Ja(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=fi)}Za(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&V("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Ih=function(t,e,r,n){r!==n&&(e.flags|=4)};function _n(t,e){if(!Y)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function rg(t,e,r){var n=e.pendingProps;switch(xl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(e),null;case 1:return $e(e.type)&&mi(),ge(e),null;case 3:return n=e.stateNode,an(),K(Oe),K(xe),Cl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Rs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xe!==null&&(Lo(Xe),Xe=null))),Co(t,e),ge(e),null;case 5:Sl(e);var s=mr(ns.current);if(r=e.type,t!==null&&e.stateNode!=null)Lh(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(E(166));return ge(e),null}if(t=mr(ot.current),Rs(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[it]=e,n[ts]=i,t=(e.mode&1)!==0,r){case"dialog":V("cancel",n),V("close",n);break;case"iframe":case"object":case"embed":V("load",n);break;case"video":case"audio":for(s=0;s<Tn.length;s++)V(Tn[s],n);break;case"source":V("error",n);break;case"img":case"image":case"link":V("error",n),V("load",n);break;case"details":V("toggle",n);break;case"input":hc(n,i),V("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},V("invalid",n);break;case"textarea":mc(n,i),V("invalid",n)}Za(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&$s(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&$s(n.textContent,l,t),s=["children",""+l]):Hn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&V("scroll",n)}switch(r){case"input":ks(n),fc(n,i,!0);break;case"textarea":ks(n),pc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=fi)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ud(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[it]=e,t[ts]=n,Ah(t,e,!1,!1),e.stateNode=t;e:{switch(o=eo(r,n),r){case"dialog":V("cancel",t),V("close",t),s=n;break;case"iframe":case"object":case"embed":V("load",t),s=n;break;case"video":case"audio":for(s=0;s<Tn.length;s++)V(Tn[s],t);s=n;break;case"source":V("error",t),s=n;break;case"img":case"image":case"link":V("error",t),V("load",t),s=n;break;case"details":V("toggle",t),s=n;break;case"input":hc(t,n),s=Ga(t,n),V("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Z({},n,{value:void 0}),V("invalid",t);break;case"textarea":mc(t,n),s=Ja(t,n),V("invalid",t);break;default:s=n}Za(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?fd(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dd(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Vn(t,c):typeof c=="number"&&Vn(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&V("scroll",t):c!=null&&nl(t,i,c,o))}switch(r){case"input":ks(t),fc(t,n,!1);break;case"textarea":ks(t),pc(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Gt(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Kr(t,!!n.multiple,i,!1):n.defaultValue!=null&&Kr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ge(e),null;case 6:if(t&&e.stateNode!=null)Ih(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(E(166));if(r=mr(ns.current),mr(ot.current),Rs(e)){if(n=e.stateNode,r=e.memoizedProps,n[it]=e,(i=n.nodeValue!==r)&&(t=Ie,t!==null))switch(t.tag){case 3:$s(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$s(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[it]=e,e.stateNode=n}return ge(e),null;case 13:if(K(J),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Y&&Le!==null&&e.mode&1&&!(e.flags&128))eh(),nn(),e.flags|=98560,i=!1;else if(i=Rs(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(E(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[it]=e}else nn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ge(e),i=!1}else Xe!==null&&(Lo(Xe),Xe=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||J.current&1?oe===0&&(oe=3):Ul())),e.updateQueue!==null&&(e.flags|=4),ge(e),null);case 4:return an(),Co(t,e),t===null&&Zn(e.stateNode.containerInfo),ge(e),null;case 10:return jl(e.type._context),ge(e),null;case 17:return $e(e.type)&&mi(),ge(e),null;case 19:if(K(J),i=e.memoizedState,i===null)return ge(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)_n(i,!1);else{if(oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bi(t),o!==null){for(e.flags|=128,_n(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return H(J,J.current&1|2),e.child}t=t.sibling}i.tail!==null&&re()>ln&&(e.flags|=128,n=!0,_n(i,!1),e.lanes=4194304)}else{if(!n)if(t=bi(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_n(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Y)return ge(e),null}else 2*re()-i.renderingStartTime>ln&&r!==1073741824&&(e.flags|=128,n=!0,_n(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=re(),e.sibling=null,r=J.current,H(J,n?r&1|2:r&1),e):(ge(e),null);case 22:case 23:return Ml(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ae&1073741824&&(ge(e),e.subtreeFlags&6&&(e.flags|=8192)):ge(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function ng(t,e){switch(xl(e),e.tag){case 1:return $e(e.type)&&mi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return an(),K(Oe),K(xe),Cl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sl(e),null;case 13:if(K(J),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));nn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(J),null;case 4:return an(),null;case 10:return jl(e.type._context),null;case 22:case 23:return Ml(),null;case 24:return null;default:return null}}var Is=!1,ye=!1,sg=typeof WeakSet=="function"?WeakSet:Set,$=null;function Hr(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ee(t,e,n)}else r.current=null}function Eo(t,e,r){try{r()}catch(n){ee(t,e,n)}}var su=!1;function ig(t,e){if(uo=ui,t=Fd(),gl(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var y;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ho={focusedElem:t,selectionRange:r},ui=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,N=x.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ye(e.type,b),N);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(j){ee(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return x=su,su=!1,x}function Mn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Eo(e,r,i)}s=s.next}while(s!==n)}}function Wi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Po(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Dh(t){var e=t.alternate;e!==null&&(t.alternate=null,Dh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[it],delete e[ts],delete e[po],delete e[Fp],delete e[Bp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mh(t){return t.tag===5||t.tag===3||t.tag===4}function iu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function To(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fi));else if(n!==4&&(t=t.child,t!==null))for(To(t,e,r),t=t.sibling;t!==null;)To(t,e,r),t=t.sibling}function Oo(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Oo(t,e,r),t=t.sibling;t!==null;)Oo(t,e,r),t=t.sibling}var de=null,Qe=!1;function St(t,e,r){for(r=r.child;r!==null;)Uh(t,e,r),r=r.sibling}function Uh(t,e,r){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(Li,r)}catch{}switch(r.tag){case 5:ye||Hr(r,e);case 6:var n=de,s=Qe;de=null,St(t,e,r),de=n,Qe=s,de!==null&&(Qe?(t=de,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):de.removeChild(r.stateNode));break;case 18:de!==null&&(Qe?(t=de,r=r.stateNode,t.nodeType===8?_a(t.parentNode,r):t.nodeType===1&&_a(t,r),Qn(t)):_a(de,r.stateNode));break;case 4:n=de,s=Qe,de=r.stateNode.containerInfo,Qe=!0,St(t,e,r),de=n,Qe=s;break;case 0:case 11:case 14:case 15:if(!ye&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Eo(r,e,o),s=s.next}while(s!==n)}St(t,e,r);break;case 1:if(!ye&&(Hr(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ee(r,e,l)}St(t,e,r);break;case 21:St(t,e,r);break;case 22:r.mode&1?(ye=(n=ye)||r.memoizedState!==null,St(t,e,r),ye=n):St(t,e,r);break;default:St(t,e,r)}}function au(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new sg),e.forEach(function(n){var s=mg.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ke(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:de=l.stateNode,Qe=!1;break e;case 3:de=l.stateNode.containerInfo,Qe=!0;break e;case 4:de=l.stateNode.containerInfo,Qe=!0;break e}l=l.return}if(de===null)throw Error(E(160));Uh(i,o,s),de=null,Qe=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ee(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zh(e,t),e=e.sibling}function zh(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ke(e,t),rt(t),n&4){try{Mn(3,t,t.return),Wi(3,t)}catch(b){ee(t,t.return,b)}try{Mn(5,t,t.return)}catch(b){ee(t,t.return,b)}}break;case 1:Ke(e,t),rt(t),n&512&&r!==null&&Hr(r,r.return);break;case 5:if(Ke(e,t),rt(t),n&512&&r!==null&&Hr(r,r.return),t.flags&32){var s=t.stateNode;try{Vn(s,"")}catch(b){ee(t,t.return,b)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ld(s,i),eo(l,o);var u=eo(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?fd(s,h):d==="dangerouslySetInnerHTML"?dd(s,h):d==="children"?Vn(s,h):nl(s,d,h,u)}switch(l){case"input":Ya(s,i);break;case"textarea":cd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Kr(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?Kr(s,!!i.multiple,i.defaultValue,!0):Kr(s,!!i.multiple,i.multiple?[]:"",!1))}s[ts]=i}catch(b){ee(t,t.return,b)}}break;case 6:if(Ke(e,t),rt(t),n&4){if(t.stateNode===null)throw Error(E(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){ee(t,t.return,b)}}break;case 3:if(Ke(e,t),rt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qn(e.containerInfo)}catch(b){ee(t,t.return,b)}break;case 4:Ke(e,t),rt(t);break;case 13:Ke(e,t),rt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Il=re())),n&4&&au(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ye=(u=ye)||d,Ke(e,t),ye=u):Ke(e,t),rt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(h=$=d;$!==null;){switch(f=$,y=f.child,f.tag){case 0:case 11:case 14:case 15:Mn(4,f,f.return);break;case 1:Hr(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){ee(n,r,b)}}break;case 5:Hr(f,f.return);break;case 22:if(f.memoizedState!==null){lu(h);continue}}y!==null?(y.return=f,$=y):lu(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hd("display",o))}catch(b){ee(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){ee(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ke(e,t),rt(t),n&4&&au(t);break;case 21:break;default:Ke(e,t),rt(t)}}function rt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Mh(r)){var n=r;break e}r=r.return}throw Error(E(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Vn(s,""),n.flags&=-33);var i=iu(t);Oo(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=iu(t);To(t,l,o);break;default:throw Error(E(161))}}catch(c){ee(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ag(t,e,r){$=t,Fh(t)}function Fh(t,e,r){for(var n=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Is;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ye;l=Is;var u=ye;if(Is=o,(ye=c)&&!u)for($=s;$!==null;)o=$,c=o.child,o.tag===22&&o.memoizedState!==null?cu(s):c!==null?(c.return=o,$=c):cu(s);for(;i!==null;)$=i,Fh(i),i=i.sibling;$=s,Is=l,ye=u}ou(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):ou(t)}}function ou(t){for(;$!==null;){var e=$;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ye||Wi(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ye)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ye(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hc(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Hc(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Qn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}ye||e.flags&512&&Po(e)}catch(f){ee(e,e.return,f)}}if(e===t){$=null;break}if(r=e.sibling,r!==null){r.return=e.return,$=r;break}$=e.return}}function lu(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var r=e.sibling;if(r!==null){r.return=e.return,$=r;break}$=e.return}}function cu(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Wi(4,e)}catch(c){ee(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){ee(e,s,c)}}var i=e.return;try{Po(e)}catch(c){ee(e,i,c)}break;case 5:var o=e.return;try{Po(e)}catch(c){ee(e,o,c)}}}catch(c){ee(e,e.return,c)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var og=Math.ceil,ki=_t.ReactCurrentDispatcher,Al=_t.ReactCurrentOwner,We=_t.ReactCurrentBatchConfig,B=0,ue=null,ne=null,he=0,Ae=0,Vr=er(0),oe=0,os=null,br=0,qi=0,Ll=0,Un=null,Ee=null,Il=0,ln=1/0,dt=null,Ni=!1,$o=null,Bt=null,Ds=!1,Lt=null,Si=0,zn=0,Ro=null,Zs=-1,ei=0;function _e(){return B&6?re():Zs!==-1?Zs:Zs=re()}function Wt(t){return t.mode&1?B&2&&he!==0?he&-he:qp.transition!==null?(ei===0&&(ei=Nd()),ei):(t=W,t!==0||(t=window.event,t=t===void 0?16:$d(t.type)),t):1}function et(t,e,r,n){if(50<zn)throw zn=0,Ro=null,Error(E(185));hs(t,r,n),(!(B&2)||t!==ue)&&(t===ue&&(!(B&2)&&(qi|=r),oe===4&&$t(t,he)),Re(t,n),r===1&&B===0&&!(e.mode&1)&&(ln=re()+500,zi&&tr()))}function Re(t,e){var r=t.callbackNode;qm(t,e);var n=ci(t,t===ue?he:0);if(n===0)r!==null&&xc(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&xc(r),e===1)t.tag===0?Wp(uu.bind(null,t)):Jd(uu.bind(null,t)),Up(function(){!(B&6)&&tr()}),r=null;else{switch(Sd(n)){case 1:r=ll;break;case 4:r=_d;break;case 16:r=li;break;case 536870912:r=kd;break;default:r=li}r=Yh(r,Bh.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Bh(t,e){if(Zs=-1,ei=0,B&6)throw Error(E(327));var r=t.callbackNode;if(Xr()&&t.callbackNode!==r)return null;var n=ci(t,t===ue?he:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ci(t,n);else{e=n;var s=B;B|=2;var i=qh();(ue!==t||he!==e)&&(dt=null,ln=re()+500,pr(t,e));do try{ug();break}catch(l){Wh(t,l)}while(!0);bl(),ki.current=i,B=s,ne!==null?e=0:(ue=null,he=0,e=oe)}if(e!==0){if(e===2&&(s=io(t),s!==0&&(n=s,e=Ao(t,s))),e===1)throw r=os,pr(t,0),$t(t,n),Re(t,re()),r;if(e===6)$t(t,n);else{if(s=t.current.alternate,!(n&30)&&!lg(s)&&(e=Ci(t,n),e===2&&(i=io(t),i!==0&&(n=i,e=Ao(t,i))),e===1))throw r=os,pr(t,0),$t(t,n),Re(t,re()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(E(345));case 2:cr(t,Ee,dt);break;case 3:if($t(t,n),(n&130023424)===n&&(e=Il+500-re(),10<e)){if(ci(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){_e(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mo(cr.bind(null,t,Ee,dt),e);break}cr(t,Ee,dt);break;case 4:if($t(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Ze(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=re()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*og(n/1960))-n,10<n){t.timeoutHandle=mo(cr.bind(null,t,Ee,dt),n);break}cr(t,Ee,dt);break;case 5:cr(t,Ee,dt);break;default:throw Error(E(329))}}}return Re(t,re()),t.callbackNode===r?Bh.bind(null,t):null}function Ao(t,e){var r=Un;return t.current.memoizedState.isDehydrated&&(pr(t,e).flags|=256),t=Ci(t,e),t!==2&&(e=Ee,Ee=r,e!==null&&Lo(e)),t}function Lo(t){Ee===null?Ee=t:Ee.push.apply(Ee,t)}function lg(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!tt(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $t(t,e){for(e&=~Ll,e&=~qi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ze(e),n=1<<r;t[r]=-1,e&=~n}}function uu(t){if(B&6)throw Error(E(327));Xr();var e=ci(t,0);if(!(e&1))return Re(t,re()),null;var r=Ci(t,e);if(t.tag!==0&&r===2){var n=io(t);n!==0&&(e=n,r=Ao(t,n))}if(r===1)throw r=os,pr(t,0),$t(t,e),Re(t,re()),r;if(r===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cr(t,Ee,dt),Re(t,re()),null}function Dl(t,e){var r=B;B|=1;try{return t(e)}finally{B=r,B===0&&(ln=re()+500,zi&&tr())}}function jr(t){Lt!==null&&Lt.tag===0&&!(B&6)&&Xr();var e=B;B|=1;var r=We.transition,n=W;try{if(We.transition=null,W=1,t)return t()}finally{W=n,We.transition=r,B=e,!(B&6)&&tr()}}function Ml(){Ae=Vr.current,K(Vr)}function pr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Mp(r)),ne!==null)for(r=ne.return;r!==null;){var n=r;switch(xl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mi();break;case 3:an(),K(Oe),K(xe),Cl();break;case 5:Sl(n);break;case 4:an();break;case 13:K(J);break;case 19:K(J);break;case 10:jl(n.type._context);break;case 22:case 23:Ml()}r=r.return}if(ue=t,ne=t=qt(t.current,null),he=Ae=e,oe=0,os=null,Ll=qi=br=0,Ee=Un=null,fr!==null){for(e=0;e<fr.length;e++)if(r=fr[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}fr=null}return t}function Wh(t,e){do{var r=ne;try{if(bl(),Qs.current=_i,ji){for(var n=X.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ji=!1}if(wr=0,ce=ae=X=null,Dn=!1,ss=0,Al.current=null,r===null||r.return===null){oe=1,os=e,ne=null;break}e:{var i=t,o=r.return,l=r,c=e;if(e=he,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Jc(o);if(y!==null){y.flags&=-257,Xc(y,o,l,i,e),y.mode&1&&Qc(i,u,e),e=y,c=u;var x=e.updateQueue;if(x===null){var b=new Set;b.add(c),e.updateQueue=b}else x.add(c);break e}else{if(!(e&1)){Qc(i,u,e),Ul();break e}c=Error(E(426))}}else if(Y&&l.mode&1){var N=Jc(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Xc(N,o,l,i,e),vl(on(c,l));break e}}i=c=on(c,l),oe!==4&&(oe=2),Un===null?Un=[i]:Un.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Sh(i,c,e);qc(i,g);break e;case 1:l=c;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Bt===null||!Bt.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=Ch(i,l,e);qc(i,j);break e}}i=i.return}while(i!==null)}Vh(r)}catch(_){e=_,ne===r&&r!==null&&(ne=r=r.return);continue}break}while(!0)}function qh(){var t=ki.current;return ki.current=_i,t===null?_i:t}function Ul(){(oe===0||oe===3||oe===2)&&(oe=4),ue===null||!(br&268435455)&&!(qi&268435455)||$t(ue,he)}function Ci(t,e){var r=B;B|=2;var n=qh();(ue!==t||he!==e)&&(dt=null,pr(t,e));do try{cg();break}catch(s){Wh(t,s)}while(!0);if(bl(),B=r,ki.current=n,ne!==null)throw Error(E(261));return ue=null,he=0,oe}function cg(){for(;ne!==null;)Hh(ne)}function ug(){for(;ne!==null&&!Lm();)Hh(ne)}function Hh(t){var e=Gh(t.alternate,t,Ae);t.memoizedProps=t.pendingProps,e===null?Vh(t):ne=e,Al.current=null}function Vh(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=ng(r,e),r!==null){r.flags&=32767,ne=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{oe=6,ne=null;return}}else if(r=rg(r,e,Ae),r!==null){ne=r;return}if(e=e.sibling,e!==null){ne=e;return}ne=e=t}while(e!==null);oe===0&&(oe=5)}function cr(t,e,r){var n=W,s=We.transition;try{We.transition=null,W=1,dg(t,e,r,n)}finally{We.transition=s,W=n}return null}function dg(t,e,r,n){do Xr();while(Lt!==null);if(B&6)throw Error(E(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Hm(t,i),t===ue&&(ne=ue=null,he=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ds||(Ds=!0,Yh(li,function(){return Xr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=We.transition,We.transition=null;var o=W;W=1;var l=B;B|=4,Al.current=null,ig(t,r),zh(r,t),Op(ho),ui=!!uo,ho=uo=null,t.current=r,ag(r),Im(),B=l,W=o,We.transition=i}else t.current=r;if(Ds&&(Ds=!1,Lt=t,Si=s),i=t.pendingLanes,i===0&&(Bt=null),Um(r.stateNode),Re(t,re()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ni)throw Ni=!1,t=$o,$o=null,t;return Si&1&&t.tag!==0&&Xr(),i=t.pendingLanes,i&1?t===Ro?zn++:(zn=0,Ro=t):zn=0,tr(),null}function Xr(){if(Lt!==null){var t=Sd(Si),e=We.transition,r=W;try{if(We.transition=null,W=16>t?16:t,Lt===null)var n=!1;else{if(t=Lt,Lt=null,Si=0,B&6)throw Error(E(331));var s=B;for(B|=4,$=t.current;$!==null;){var i=$,o=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:Mn(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var f=d.sibling,y=d.return;if(Dh(d),d===u){$=null;break}if(f!==null){f.return=y,$=f;break}$=y}}}var x=i.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mn(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,$=g;break e}$=i.return}}var p=t.current;for($=p;$!==null;){o=$;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,$=m;else e:for(o=p;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wi(9,l)}}catch(_){ee(l,l.return,_)}if(l===o){$=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,$=j;break e}$=l.return}}if(B=s,tr(),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(Li,t)}catch{}n=!0}return n}finally{W=r,We.transition=e}}return!1}function du(t,e,r){e=on(r,e),e=Sh(t,e,1),t=Ft(t,e,1),e=_e(),t!==null&&(hs(t,1,e),Re(t,e))}function ee(t,e,r){if(t.tag===3)du(t,t,r);else for(;e!==null;){if(e.tag===3){du(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bt===null||!Bt.has(n))){t=on(r,t),t=Ch(e,t,1),e=Ft(e,t,1),t=_e(),e!==null&&(hs(e,1,t),Re(e,t));break}}e=e.return}}function hg(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=_e(),t.pingedLanes|=t.suspendedLanes&r,ue===t&&(he&r)===r&&(oe===4||oe===3&&(he&130023424)===he&&500>re()-Il?pr(t,0):Ll|=r),Re(t,e)}function Kh(t,e){e===0&&(t.mode&1?(e=Cs,Cs<<=1,!(Cs&130023424)&&(Cs=4194304)):e=1);var r=_e();t=bt(t,e),t!==null&&(hs(t,e,r),Re(t,r))}function fg(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Kh(t,r)}function mg(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(E(314))}n!==null&&n.delete(e),Kh(t,r)}var Gh;Gh=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Oe.current)Te=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Te=!1,tg(t,e,r);Te=!!(t.flags&131072)}else Te=!1,Y&&e.flags&1048576&&Xd(e,yi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Xs(t,e),t=e.pendingProps;var s=rn(e,xe.current);Jr(e,r),s=Pl(null,e,n,t,s,r);var i=Tl();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$e(n)?(i=!0,pi(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kl(e),s.updater=Bi,e.stateNode=s,s._reactInternals=e,bo(e,n,t,r),e=ko(null,e,n,!0,i,r)):(e.tag=0,Y&&i&&yl(e),be(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Xs(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=gg(n),t=Ye(n,t),s){case 0:e=_o(null,e,n,t,r);break e;case 1:e=tu(null,e,n,t,r);break e;case 11:e=Zc(null,e,n,t,r);break e;case 14:e=eu(null,e,n,Ye(n.type,t),r);break e}throw Error(E(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ye(n,s),_o(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ye(n,s),tu(t,e,n,s,r);case 3:e:{if(Oh(e),t===null)throw Error(E(387));n=e.pendingProps,i=e.memoizedState,s=i.element,sh(t,e),wi(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=on(Error(E(423)),e),e=ru(t,e,n,r,s);break e}else if(n!==s){s=on(Error(E(424)),e),e=ru(t,e,n,r,s);break e}else for(Le=zt(e.stateNode.containerInfo.firstChild),Ie=e,Y=!0,Xe=null,r=rh(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nn(),n===s){e=jt(t,e,r);break e}be(t,e,n,r)}e=e.child}return e;case 5:return ih(e),t===null&&xo(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,fo(n,s)?o=null:i!==null&&fo(n,i)&&(e.flags|=32),Th(t,e),be(t,e,o,r),e.child;case 6:return t===null&&xo(e),null;case 13:return $h(t,e,r);case 4:return Nl(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=sn(e,null,n,r):be(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ye(n,s),Zc(t,e,n,s,r);case 7:return be(t,e,e.pendingProps,r),e.child;case 8:return be(t,e,e.pendingProps.children,r),e.child;case 12:return be(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,H(xi,n._currentValue),n._currentValue=o,i!==null)if(tt(i.value,o)){if(i.children===s.children&&!Oe.current){e=jt(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=yt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),vo(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),vo(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}be(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Jr(e,r),s=He(s),n=n(s),e.flags|=1,be(t,e,n,r),e.child;case 14:return n=e.type,s=Ye(n,e.pendingProps),s=Ye(n.type,s),eu(t,e,n,s,r);case 15:return Eh(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ye(n,s),Xs(t,e),e.tag=1,$e(n)?(t=!0,pi(e)):t=!1,Jr(e,r),Nh(e,n,s),bo(e,n,s,r),ko(null,e,n,!0,t,r);case 19:return Rh(t,e,r);case 22:return Ph(t,e,r)}throw Error(E(156,e.tag))};function Yh(t,e){return jd(t,e)}function pg(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Be(t,e,r,n){return new pg(t,e,r,n)}function zl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gg(t){if(typeof t=="function")return zl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===il)return 11;if(t===al)return 14}return 2}function qt(t,e){var r=t.alternate;return r===null?(r=Be(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ti(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")zl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ir:return gr(r.children,s,i,e);case sl:o=8,s|=8;break;case qa:return t=Be(12,r,e,s|2),t.elementType=qa,t.lanes=i,t;case Ha:return t=Be(13,r,e,s),t.elementType=Ha,t.lanes=i,t;case Va:return t=Be(19,r,e,s),t.elementType=Va,t.lanes=i,t;case id:return Hi(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nd:o=10;break e;case sd:o=9;break e;case il:o=11;break e;case al:o=14;break e;case Pt:o=16,n=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=Be(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function gr(t,e,r,n){return t=Be(7,t,n,e),t.lanes=r,t}function Hi(t,e,r,n){return t=Be(22,t,n,e),t.elementType=id,t.lanes=r,t.stateNode={isHidden:!1},t}function Oa(t,e,r){return t=Be(6,t,null,e),t.lanes=r,t}function $a(t,e,r){return e=Be(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yg(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fl(t,e,r,n,s,i,o,l,c){return t=new yg(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Be(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kl(i),t}function xg(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Qh(t){if(!t)return Yt;t=t._reactInternals;e:{if(Nr(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($e(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var r=t.type;if($e(r))return Qd(t,r,e)}return e}function Jh(t,e,r,n,s,i,o,l,c){return t=Fl(r,n,!0,t,s,i,o,l,c),t.context=Qh(null),r=t.current,n=_e(),s=Wt(r),i=yt(n,s),i.callback=e??null,Ft(r,i,s),t.current.lanes=s,hs(t,s,n),Re(t,n),t}function Vi(t,e,r,n){var s=e.current,i=_e(),o=Wt(s);return r=Qh(r),e.context===null?e.context=r:e.pendingContext=r,e=yt(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ft(s,e,o),t!==null&&(et(t,s,o,i),Ys(t,s,o)),o}function Ei(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Bl(t,e){hu(t,e),(t=t.alternate)&&hu(t,e)}function vg(){return null}var Xh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wl(t){this._internalRoot=t}Ki.prototype.render=Wl.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Vi(t,e,null,null)};Ki.prototype.unmount=Wl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jr(function(){Vi(null,t,null,null)}),e[wt]=null}};function Ki(t){this._internalRoot=t}Ki.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pd();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ot.length&&e!==0&&e<Ot[r].priority;r++);Ot.splice(r,0,t),r===0&&Od(t)}};function ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gi(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fu(){}function wg(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Ei(o);i.call(u)}}var o=Jh(e,n,t,0,null,!1,!1,"",fu);return t._reactRootContainer=o,t[wt]=o.current,Zn(t.nodeType===8?t.parentNode:t),jr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ei(c);l.call(u)}}var c=Fl(t,0,!1,null,null,!1,!1,"",fu);return t._reactRootContainer=c,t[wt]=c.current,Zn(t.nodeType===8?t.parentNode:t),jr(function(){Vi(e,c,r,n)}),c}function Yi(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ei(o);l.call(c)}}Vi(e,o,t,s)}else o=wg(r,e,t,s,n);return Ei(o)}Cd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Pn(e.pendingLanes);r!==0&&(cl(e,r|1),Re(e,re()),!(B&6)&&(ln=re()+500,tr()))}break;case 13:jr(function(){var n=bt(t,1);if(n!==null){var s=_e();et(n,t,1,s)}}),Bl(t,1)}};ul=function(t){if(t.tag===13){var e=bt(t,134217728);if(e!==null){var r=_e();et(e,t,134217728,r)}Bl(t,134217728)}};Ed=function(t){if(t.tag===13){var e=Wt(t),r=bt(t,e);if(r!==null){var n=_e();et(r,t,e,n)}Bl(t,e)}};Pd=function(){return W};Td=function(t,e){var r=W;try{return W=t,e()}finally{W=r}};ro=function(t,e,r){switch(e){case"input":if(Ya(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Ui(n);if(!s)throw Error(E(90));od(n),Ya(n,s)}}}break;case"textarea":cd(t,r);break;case"select":e=r.value,e!=null&&Kr(t,!!r.multiple,e,!1)}};gd=Dl;yd=jr;var bg={usingClientEntryPoint:!1,Events:[ms,zr,Ui,md,pd,Dl]},kn={findFiberByHostInstance:hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jg={bundleType:kn.bundleType,version:kn.version,rendererPackageName:kn.rendererPackageName,rendererConfig:kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_t.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wd(t),t===null?null:t.stateNode},findFiberByHostInstance:kn.findFiberByHostInstance||vg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{Li=Ms.inject(jg),at=Ms}catch{}}Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bg;Me.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ql(e))throw Error(E(200));return xg(t,e,null,r)};Me.createRoot=function(t,e){if(!ql(t))throw Error(E(299));var r=!1,n="",s=Xh;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fl(t,1,!1,null,null,r,!1,n,s),t[wt]=e.current,Zn(t.nodeType===8?t.parentNode:t),new Wl(e)};Me.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=wd(e),t=t===null?null:t.stateNode,t};Me.flushSync=function(t){return jr(t)};Me.hydrate=function(t,e,r){if(!Gi(e))throw Error(E(200));return Yi(null,t,e,!0,r)};Me.hydrateRoot=function(t,e,r){if(!ql(t))throw Error(E(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Xh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Jh(e,null,t,1,r??null,s,!1,i,o),t[wt]=e.current,Zn(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Ki(e)};Me.render=function(t,e,r){if(!Gi(e))throw Error(E(200));return Yi(null,t,e,!1,r)};Me.unmountComponentAtNode=function(t){if(!Gi(t))throw Error(E(40));return t._reactRootContainer?(jr(function(){Yi(null,null,t,!1,function(){t._reactRootContainer=null,t[wt]=null})}),!0):!1};Me.unstable_batchedUpdates=Dl;Me.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Gi(r))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Yi(t,e,r,!1,n)};Me.version="18.3.1-next-f1338f8080-20240426";function Zh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zh)}catch(t){console.error(t)}}Zh(),Zu.exports=Me;var _g=Zu.exports,ef,mu=_g;ef=mu.createRoot,mu.hydrateRoot;const kg="modulepreload",Ng=function(t){return"/"+t},pu={},gs=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Ng(c),c in pu)return;pu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":kg,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,y)=>{h.addEventListener("load",f),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Sg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>gs(async()=>{const{default:n}=await Promise.resolve().then(()=>mn);return{default:n}},[]).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Hl extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Cg extends Hl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gu extends Hl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yu extends Hl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Io;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Io||(Io={}));var Eg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Pg{constructor(e,{headers:r={},customFetch:n,region:s=Io.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Sg(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Eg(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(b=>{throw new Cg(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new gu(h);if(!h.ok)throw new yu(h);let y=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return y==="application/json"?x=yield h.json():y==="application/octet-stream"?x=yield h.blob():y==="text/event-stream"?x=h:y==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof yu||s instanceof gu?s.context:void 0}}})}}var Pe={},Vl={},Qi={},ys={},Ji={},Xi={},Tg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cn=Tg();const Og=cn.fetch,tf=cn.fetch.bind(cn),rf=cn.Headers,$g=cn.Request,Rg=cn.Response,mn=Object.freeze(Object.defineProperty({__proto__:null,Headers:rf,Request:$g,Response:Rg,default:tf,fetch:Og},Symbol.toStringTag,{value:"Module"})),Ag=Jf(mn);var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});let Lg=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Zi.default=Lg;var nf=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xi,"__esModule",{value:!0});const Ig=nf(Ag),Dg=nf(Zi);let Mg=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ig.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,f=null,y=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=p:h=JSON.parse(p))}const N=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");N&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,y=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const N=await i.text();try{d=JSON.parse(N),Array.isArray(d)&&i.status===404&&(h=[],d=null,y=200,x="OK")}catch{i.status===404&&N===""?(y=204,x="No Content"):d={message:N}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,y=200,x="OK"),d&&this.shouldThrowOnError)throw new Dg.default(d)}return{error:d,data:h,count:f,status:y,statusText:x}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};Xi.default=Mg;var Ug=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ji,"__esModule",{value:!0});const zg=Ug(Xi);let Fg=class extends zg.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ji.default=Fg;var Bg=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ys,"__esModule",{value:!0});const Wg=Bg(Ji);let qg=class extends Wg.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};ys.default=qg;var Hg=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qi,"__esModule",{value:!0});const Nn=Hg(ys);let Vg=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Nn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Nn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Nn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Nn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Nn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Qi.default=Vg;var sf=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vl,"__esModule",{value:!0});const Kg=sf(Qi),Gg=sf(ys);let Yg=class af{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new Kg.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new af(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Gg.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Vl.default=Yg;var pn=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.PostgrestError=Pe.PostgrestBuilder=Pe.PostgrestTransformBuilder=Pe.PostgrestFilterBuilder=Pe.PostgrestQueryBuilder=Pe.PostgrestClient=void 0;const of=pn(Vl);Pe.PostgrestClient=of.default;const lf=pn(Qi);Pe.PostgrestQueryBuilder=lf.default;const cf=pn(ys);Pe.PostgrestFilterBuilder=cf.default;const uf=pn(Ji);Pe.PostgrestTransformBuilder=uf.default;const df=pn(Xi);Pe.PostgrestBuilder=df.default;const hf=pn(Zi);Pe.PostgrestError=hf.default;var Qg=Pe.default={PostgrestClient:of.default,PostgrestQueryBuilder:lf.default,PostgrestFilterBuilder:cf.default,PostgrestTransformBuilder:uf.default,PostgrestBuilder:df.default,PostgrestError:hf.default};const{PostgrestClient:Jg,PostgrestQueryBuilder:Yv,PostgrestFilterBuilder:Qv,PostgrestTransformBuilder:Jv,PostgrestBuilder:Xv,PostgrestError:Zv}=Qg;class Xg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Zg="2.15.5",e0=`realtime-js/${Zg}`,t0="1.0.0",Do=1e4,r0=1e3,n0=100;var Fn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Fn||(Fn={}));var se;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(se||(se={}));var Je;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Je||(Je={}));var Mo;(function(t){t.websocket="websocket"})(Mo||(Mo={}));var dr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(dr||(dr={}));class s0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class ff{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(q||(q={}));const xu=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=i0(o,t,e,s),i),{})},i0=(t,e,r,n)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?mf(i,o):Uo(o)},mf=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return c0(e,r)}switch(t){case q.bool:return a0(e);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return o0(e);case q.json:case q.jsonb:return l0(e);case q.timestamp:return u0(e);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return Uo(e);default:return Uo(e)}},Uo=t=>t,a0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},o0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},l0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},c0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>mf(e,l))}return t},u0=t=>typeof t=="string"?t.replace(" ","T"):t,pf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Ra{constructor(e,r,n={},s=Do){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(vu||(vu={}));class Bn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Bn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Bn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(N=>N.presence_ref),y=h.map(N=>N.presence_ref),x=d.filter(N=>y.indexOf(N.presence_ref)<0),b=h.filter(N=>f.indexOf(N.presence_ref)<0);x.length>0&&(l[u]=x),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(y=>y.presence_ref),f=d.filter(y=>h.indexOf(y.presence_ref)<0);e[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(wu||(wu={}));var Wn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wn||(Wn={}));var ht;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ht||(ht={}));class Kl{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ra(this,Je.join,this.params,this.timeout),this.rejoinTimer=new ff(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Je.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Bn(this),this.broadcastEndpointURL=pf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Wn.PRESENCE]&&this.bindings[Wn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(ht.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(ht.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){e==null||e(ht.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,N=(x=b==null?void 0:b.length)!==null&&x!==void 0?x:0,g=[];for(let p=0;p<N;p++){const m=b[p],{filter:{event:j,schema:_,table:C,filter:w}}=m,k=y&&y[p];if(k&&k.event===j&&k.schema===_&&k.table===C&&k.filter===w)g.push(Object.assign(Object.assign({},m),{id:k.id}));else{this.unsubscribe(),this.state=se.errored,e==null||e(ht.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(ht.SUBSCRIBED);return}}).receive("error",y=>{this.state=se.errored,e==null||e(ht.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ht.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===se.joined&&e===Wn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Je.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ra(this,Je.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ra(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>n0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Je;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var x,b,N;return((x=y.filter)===null||x===void 0?void 0:x.event)==="*"||((N=(b=y.filter)===null||b===void 0?void 0:b.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(y=>y.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var x,b,N,g,p,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const j=y.id,_=(x=y.filter)===null||x===void 0?void 0:x.event;return j&&((b=r.ids)===null||b===void 0?void 0:b.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const j=(p=(g=y==null?void 0:y.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return j==="*"||j===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:b,table:N,commit_timestamp:g,type:p,errors:m}=x;f=Object.assign(Object.assign({},{schema:b,table:N,commit_timestamp:g,eventType:p,new:{},old:{},errors:m}),this._getPayloadRecords(x))}y.callback(f,n)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Kl.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Je.close,{},e)}_onError(e){this._on(Je.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=xu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=xu(e.columns,e.old_record)),r}}const Aa=()=>{},Us={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d0=[1e3,2e3,5e3,1e4],h0=1e4,f0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m0{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Do,this.transport=null,this.heartbeatIntervalMs=Us.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Aa,this.ref=0,this.reconnectTimer=null,this.logger=Aa,this.conn=null,this.sendBuffer=[],this.serializer=new s0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>gs(async()=>{const{default:l}=await Promise.resolve().then(()=>mn);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Mo.websocket}`,this.httpEndpoint=pf(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Xg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t0}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Fn.connecting:return dr.Connecting;case Fn.open:return dr.Open;case Fn.closing:return dr.Closing;default:return dr.Closed}}isConnected(){return this.connectionState()===dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Kl(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(r0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Us.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Je.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([f0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:e0};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Je.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ff(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Us.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,l,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Do,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Us.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Aa,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>d0[h-1]||h0,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Gl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ie(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class p0 extends Gl{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zo extends Gl{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var g0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const gf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>gs(async()=>{const{default:n}=await Promise.resolve().then(()=>mn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},y0=()=>g0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gs(()=>Promise.resolve().then(()=>mn),void 0)).Response:Response}),Fo=t=>{if(Array.isArray(t))return t.map(r=>Fo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Fo(n)}),e},x0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Sr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const La=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),v0=(t,e,r)=>Sr(void 0,void 0,void 0,function*(){const n=yield y0();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new p0(La(s),i,o))}).catch(s=>{e(new zo(La(s),s))}):e(new zo(La(t),t))}),w0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(x0(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function xs(t,e,r,n,s,i){return Sr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,w0(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>v0(c,l,n))})})}function Pi(t,e,r,n){return Sr(this,void 0,void 0,function*(){return xs(t,"GET",e,r,n)})}function st(t,e,r,n,s){return Sr(this,void 0,void 0,function*(){return xs(t,"POST",e,n,s,r)})}function Bo(t,e,r,n,s){return Sr(this,void 0,void 0,function*(){return xs(t,"PUT",e,n,s,r)})}function b0(t,e,r,n){return Sr(this,void 0,void 0,function*(){return xs(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function yf(t,e,r,n,s){return Sr(this,void 0,void 0,function*(){return xs(t,"DELETE",e,n,s,r)})}var we=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const j0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _0{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=gf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return we(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},bu),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(e=="PUT"?Bo:st)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ie(i))return{data:null,error:i};throw i}})}upload(e,r,n){return we(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return we(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:bu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Bo(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ie(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return we(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield st(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Gl("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}update(e,r,n){return we(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return we(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}copy(e,r,n){return we(this,void 0,void 0,function*(){try{return{data:{path:(yield st(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return we(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield st(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return we(this,void 0,void 0,function*(){try{const s=yield st(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}download(e,r){return we(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Pi(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ie(l))return{data:null,error:l};throw l}})}info(e){return we(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Pi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Fo(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}exists(e){return we(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield b0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n)&&n instanceof zo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return we(this,void 0,void 0,function*(){try{return{data:yield yf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}list(e,r,n){return we(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},j0),r),{prefix:e||""});return{data:yield st(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}listV2(e,r){return we(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield st(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const k0="2.12.1",N0={"X-Client-Info":`storage-js/${k0}`};var Er=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class S0{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},N0),r),this.fetch=gf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Er(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ie(e))return{data:null,error:e};throw e}})}getBucket(e){return Er(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Er(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Er(this,void 0,void 0,function*(){try{return{data:yield Bo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Er(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Er(this,void 0,void 0,function*(){try{return{data:yield yf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}}class C0 extends S0{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new _0(this.url,this.headers,e,this.fetch)}}const E0="2.57.4";let On="";typeof Deno<"u"?On="deno":typeof document<"u"?On="web":typeof navigator<"u"&&navigator.product==="ReactNative"?On="react-native":On="node";const P0={"X-Client-Info":`supabase-js-${On}/${E0}`},T0={headers:P0},O0={schema:"public"},$0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R0={};var A0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const L0=t=>{let e;return t?e=t:typeof fetch>"u"?e=tf:e=fetch,(...r)=>e(...r)},I0=()=>typeof Headers>"u"?rf:Headers,D0=(t,e,r)=>{const n=L0(r),s=I0();return(i,o)=>A0(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var M0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function U0(t){return t.endsWith("/")?t:t+"/"}function z0(t,e){var r,n;const{db:s,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>M0(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function F0(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(U0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const xf="2.71.1",Rr=30*1e3,Wo=3,Ia=Wo*Rr,B0="http://localhost:9999",W0="supabase.auth.token",q0={"X-Client-Info":`gotrue-js/${xf}`},qo="X-Supabase-Api-Version",vf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V0=10*60*1e3;class Yl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function I(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class K0 extends Yl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function G0(t){return I(t)&&t.name==="AuthApiError"}class wf extends Yl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class rr extends Yl{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Et extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y0(t){return I(t)&&t.name==="AuthSessionMissingError"}class zs extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fs extends rr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bs extends rr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Q0(t){return I(t)&&t.name==="AuthImplicitGrantRedirectError"}class ju extends rr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ho extends rr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Da(t){return I(t)&&t.name==="AuthRetryableFetchError"}class _u extends rr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Vo extends rr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ti="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ku=` 	
\r=`.split(""),J0=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ku.length;e+=1)t[ku[e].charCodeAt(0)]=-2;for(let e=0;e<Ti.length;e+=1)t[Ti[e].charCodeAt(0)]=e;return t})();function Nu(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ti[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ti[n]),e.queuedBits-=6}}function bf(t,e,r){const n=J0[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Su(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{ey(o,n,r)};for(let o=0;o<t.length;o+=1)bf(t.charCodeAt(o),s,i);return e.join("")}function X0(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Z0(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}X0(n,e)}}function ey(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ty(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)bf(t.charCodeAt(s),r,n);return new Uint8Array(e)}function ry(t){const e=[];return Z0(t,r=>e.push(r)),new Uint8Array(e)}function ny(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Nu(s,r,n)),Nu(null,r,n),e.join("")}function sy(t){return Math.round(Date.now()/1e3)+t}function iy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ge=()=>typeof window<"u"&&typeof document<"u",ar={tested:!1,writable:!1},jf=()=>{if(!Ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ar.tested)return ar.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ar.tested=!0,ar.writable=!0}catch{ar.tested=!0,ar.writable=!1}return ar.writable};function ay(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const _f=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>gs(async()=>{const{default:n}=await Promise.resolve().then(()=>mn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},oy=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ar=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},or=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ct=async(t,e)=>{await t.removeItem(e)};class ea{constructor(){this.promise=new ea.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ea.promiseConstructor=Promise;function Ma(t){const e=t.split(".");if(e.length!==3)throw new Vo("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!H0.test(e[n]))throw new Vo("JWT not in base64url format");return{header:JSON.parse(Su(e[0])),payload:JSON.parse(Su(e[1])),signature:ty(e[2]),raw:{header:e[0],payload:e[1]}}}async function ly(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function cy(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function uy(t){return("0"+t.toString(16)).substr(-2)}function dy(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,uy).join("")}async function hy(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function fy(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await hy(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pr(t,e,r=!1){const n=dy();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ar(t,`${e}-code-verifier`,s);const i=await fy(n);return[i,n===i?"plain":"s256"]}const my=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function py(t){const e=t.headers.get(qo);if(!e||!e.match(my))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gy(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yy(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tr(t){if(!xy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ua(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Cu(t){return JSON.parse(JSON.stringify(t))}var vy=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const ur=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wy=[502,503,504];async function Eu(t){var e;if(!oy(t))throw new Ho(ur(t),0);if(wy.includes(t.status))throw new Ho(ur(t),t.status);let r;try{r=await t.json()}catch(i){throw new wf(ur(i),i)}let n;const s=py(t);if(s&&s.getTime()>=vf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new _u(ur(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Et}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new _u(ur(r),t.status,r.weak_password.reasons);throw new K0(ur(r),t.status||500,n)}const by=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function z(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[qo]||(i[qo]=vf["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await jy(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function jy(t,e,r,n,s,i){const o=by(e,n,s,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Ho(ur(c),0)}if(l.ok||await Eu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Eu(c)}}function ut(t){var e;let r=null;Sy(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=sy(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Pu(t){const e=ut(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _y(t){return{data:t,error:null}}function ky(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=vy(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Ny(t){return t}function Sy(t){return t.access_token&&t.refresh_token&&t.expires_in}const za=["global","local","others"];var Cy=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class Ey{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=_f(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=za[0]){if(za.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${za.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Cy(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ky,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(I(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ny});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(x.split(";")[1].split("=")[1]);u[`${N}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(I(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Tr(e);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rt})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Tr(e);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Rt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Tr(e);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rt})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Tr(e.userId);try{const{data:r,error:n}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(I(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Tr(e.userId),Tr(e.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}}function Tu(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Py(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Or={debug:!!(globalThis&&jf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ty extends kf{}async function Oy(t,e,r){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Or.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Or.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ty(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Or.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Py();const $y={url:B0,storageKey:W0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:q0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ou(t,e,r){return await r()}const $r={};class ls{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ls.nextInstanceID,ls.nextInstanceID+=1,this.instanceID>0&&Ge()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},$y),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ey({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=_f(s.fetch),this.lock=s.lock||Ou,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ge()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Oy:this.lock=Ou,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:jf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Tu(this.memoryStorage)),Ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=$r[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){$r[this.storageKey]=Object.assign(Object.assign({},$r[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=$r[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){$r[this.storageKey]=Object.assign(Object.assign({},$r[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=ay(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ge()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Q0(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return I(r)?{error:r}:{error:new wf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ut}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(I(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await Pr(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:x},xform:ut})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ut})}else throw new Fs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(I(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Pu})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Pu})}else throw new Fs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new zs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(I(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,i,o,l,c,u,d,h,f,y;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:N,wallet:g,statement:p,options:m}=e;let j;if(Ge())if(typeof g=="object")j=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))j=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const _=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const C=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),p?{statement:p}:null));let w;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")w=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)w=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in w&&"signature"in w&&(typeof w.signedMessage=="string"||w.signedMessage instanceof Uint8Array)&&w.signature instanceof Uint8Array)x=typeof w.signedMessage=="string"?w.signedMessage:new TextDecoder().decode(w.signedMessage),b=w.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(w=>`- ${w}`)]:[]].join(`
`);const C=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=C}}try{const{data:N,error:g}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:ny(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ut});if(g)throw g;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new zs}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:g})}catch(N){if(I(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const r=await or(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ut});if(await Ct(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new zs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(I(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,l=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ut}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new zs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(I(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Pr(this.storage,this.storageKey));const{error:h}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Fs("You must provide either an email or phone number.")}catch(l){if(I(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ut});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(I(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Pr(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:_y})}catch(i){if(I(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Et;const{error:s}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(I(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await z(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:l}=await z(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Fs("You must provide either an email or phone number and a type")}catch(r){if(I(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await or(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ia:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await or(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Ua()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Et}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rt})})}catch(r){if(I(r))return Y0(r)&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Et;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Pr(this.storage,this.storageKey));const{data:u,error:d}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Rt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(I(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Et;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Ma(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(I(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Et;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(I(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ge())throw new Bs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ju("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ju("No code detected.");const{data:p,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new Bs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const y=f-d;y*1e3<=Rr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:b,error:N}=await this._getUser(i);if(N)throw N;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(I(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await or(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(G0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=iy(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Pr(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(I(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ge()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(I(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await cy(async s=>(s>0&&await ly(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ut})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Da(i)&&Date.now()+o-n<Rr})}catch(n){if(this._debug(r,"error",n),I(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ge()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await or(this.storage,this.storageKey);if(s&&this.userStorage){let o=await or(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Ar(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Ua()}else if(s&&!s.user&&!s.user){const o=await or(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ct(this.storage,this.storageKey+"-user"),await Ar(this.storage,this.storageKey,s)):s.user=Ua()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ia;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ia}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Da(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ea;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Et;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),I(i)){const o={session:null,error:i};return Da(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ar(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Cu(s);await Ar(this.storage,this.storageKey,i)}else{const s=Cu(r);await Ar(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Ct(this.storage,this.storageKey),await Ct(this.storage,this.storageKey+"-code-verifier"),await Ct(this.storage,this.storageKey+"-user"),this.userStorage&&await Ct(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Rr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Rr}ms, refresh threshold is ${Wo} ticks`),s<=Wo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof kf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Pr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(I(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(I(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ma(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+V0>s)return n;const{data:i,error:o}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:y,error:x}=await this.getSession();if(x||!y.session)return{data:null,error:x};n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Ma(n);r!=null&&r.allowExpired||gy(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=yy(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,ry(`${l}.${c}`)))throw new Vo("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(I(n))return{data:null,error:n};throw n}}}ls.nextInstanceID=0;const Ry=ls;class Ay extends Ry{constructor(e){super(e)}}var Ly=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Iy{constructor(e,r,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=r;const l=F0(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:O0,realtime:R0,auth:Object.assign(Object.assign({},$0),{storageKey:c}),global:T0},d=z0(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=D0(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Jg(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new C0(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Pg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Ly(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ay({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new m0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dy=(t,e,r)=>new Iy(t,e,r);function My(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}My()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Uy="https://0ec90b57d6e95fcbda19832f.supabase.co",zy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJib2x0IiwicmVmIjoiMGVjOTBiNTdkNmU5NWZjYmRhMTk4MzJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4ODE1NzQsImV4cCI6MTc1ODg4MTU3NH0.9I8-U0x86Ak8t2DGaIk0HfvTSLsAyzdnz-Nw00mMkKw",R=Dy(Uy,zy),Nf=v.createContext(void 0);function Fy({children:t}){const[e,r]=v.useState(null),[n,s]=v.useState(null),[i,o]=v.useState(!0),l=async f=>{const{data:y,error:x}=await R.from("profiles").select("*").eq("id",f).maybeSingle();if(x){console.error("Error fetching profile:",x);return}s(y)},c=async()=>{e&&await l(e.id)};v.useEffect(()=>{R.auth.getSession().then(({data:{session:y}})=>{r((y==null?void 0:y.user)??null),y!=null&&y.user&&l(y.user.id),o(!1)});const{data:{subscription:f}}=R.auth.onAuthStateChange((y,x)=>{(async()=>(r((x==null?void 0:x.user)??null),x!=null&&x.user?await l(x.user.id):s(null)))()});return()=>f.unsubscribe()},[]);const u=async(f,y,x)=>{const{data:b,error:N}=await R.auth.signUp({email:f,password:y});if(N)throw N;if(b.user){const{error:g}=await R.from("profiles").insert({id:b.user.id,email:b.user.email,full_name:x});if(g)throw g}},d=async(f,y)=>{const{error:x}=await R.auth.signInWithPassword({email:f,password:y});if(x)throw x},h=async()=>{const{error:f}=await R.auth.signOut();if(f)throw f};return a.jsx(Nf.Provider,{value:{user:e,profile:n,loading:i,signUp:u,signIn:d,signOut:h,refreshProfile:c},children:t})}function Se(){const t=v.useContext(Nf);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Sf=v.createContext(void 0);function By({children:t}){const{user:e}=Se(),[r,n]=v.useState(null),[s,i]=v.useState(!0);v.useEffect(()=>{e?o():(n(null),i(!1))},[e]);const o=async()=>{if(!e)return;const{data:u,error:d}=await R.from("subscriptions").select("*").eq("user_id",e.id).maybeSingle();if(d&&d.code!=="PGRST116"){console.error("Error fetching subscription:",d),i(!1);return}if(u)n(u);else{const{data:h,error:f}=await R.from("subscriptions").insert({user_id:e.id,tier:"free",status:"active"}).select().single();f?console.error("Error creating subscription:",f):n(h)}i(!1)},l=async()=>{if(!e)return;const u=new Date;u.setFullYear(u.getFullYear()+1);const{error:d}=await R.from("subscriptions").update({tier:"premium",status:"active",expires_at:u.toISOString()}).eq("user_id",e.id);if(d){console.error("Error upgrading subscription:",d);return}await o()},c=(r==null?void 0:r.tier)==="premium"&&(r==null?void 0:r.status)==="active";return a.jsx(Sf.Provider,{value:{subscription:r,isPremium:c,loading:s,upgradeToPremium:l},children:t})}function ta(){const t=v.useContext(Sf);if(t===void 0)throw new Error("useSubscription must be used within a SubscriptionProvider");return t}const Cf=v.createContext(void 0);function Wy({children:t}){const[e,r]=v.useState("day");return a.jsx(Cf.Provider,{value:{theme:e,isDayTime:e==="day"},children:t})}function Ql(){const t=v.useContext(Cf);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function qy(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),[s,i]=v.useState(""),[o,l]=v.useState(""),[c,u]=v.useState(""),[d,h]=v.useState(!1),{signIn:f,signUp:y}=Se(),x=async b=>{b.preventDefault(),u(""),h(!0);try{if(t){if(!o.trim()){u("Please enter your name");return}await y(r,s,o)}else await f(r,s)}catch(N){u(N instanceof Error?N.message:"An error occurred")}finally{h(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("img",{src:"/logo-wordmark.svg",alt:"Ditch",className:"w-full max-w-md mx-auto mb-6 object-contain transition-transform duration-300 hover:scale-105"}),a.jsx("p",{className:"",children:"Track your journey to quit vaping"})]}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[t&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{id:"fullName",type:"text",value:o,onChange:b=>l(b.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition",placeholder:"John Doe",required:t})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{id:"email",type:"email",value:r,onChange:b=>n(b.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition",placeholder:"you@example.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{id:"password",type:"password",value:s,onChange:b=>i(b.target.value),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition",placeholder:"",required:!0,minLength:6})]}),c&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:c}),a.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-3 rounded-lg font-semibold hover:from-primary-600 hover:to-secondary-600 hover:shadow-lg hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:d?"Loading...":t?"Sign Up":"Sign In"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:()=>{e(!t),u("")},className:"text-primary-600 hover:text-primary-700 font-medium transition",children:t?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),M=(t,e)=>{const r=v.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>v.createElement("svg",{ref:d,...Hy,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Vy(t)}`,l].join(" "),...u},[...e.map(([h,f])=>v.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=M("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=M("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=M("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=M("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=M("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=M("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=M("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=M("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=M("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=M("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=M("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=M("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=M("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=M("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=M("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=M("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=M("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=M("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=M("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=M("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=M("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=M("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=M("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=M("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=M("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=M("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=M("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=M("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=M("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=M("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=M("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=M("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=M("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=M("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=M("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=M("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=M("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=M("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=M("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),un=[{id:"com.ditch.app.premium.yearly",name:"Ditch Plus Yearly",description:"Annual subscription to Ditch Plus with full access to premium features",price:25,currency:"usd",type:"paid subscription"},{id:"com.ditch.app.premium.monthly",name:"Ditch Plus",description:"Monthly subscription to Ditch Plus with premium features",price:2.99,currency:"usd",type:"paid subscription"}],tx=(t,e)=>new Intl.NumberFormat("en-US",{style:"currency",currency:e.toUpperCase()}).format(t);function rx(){const{user:t,refreshProfile:e,profile:r}=Se(),[n,s]=v.useState("splash"),[i,o]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState({displayName:"",gender:"",ageRange:"",goal:"",currentDailyPuffs:"",quitStatus:"",whyQuit:"",biggestChallenge:"",supportLevel:"",costPerDevice:"",devicesPerWeek:"",dailyLimit:"",notificationsEnabled:!1}),h=[{label:"Quit completely",value:"quit"},{label:"Reduce gradually",value:"reduce"},{label:"Track my usage",value:"track"}],f=[{label:"I haven't started yet",value:"not-started"},{label:"I've already quit",value:"quit"},{label:"I'm actively reducing",value:"reducing"}],y=[{label:"Health concerns",value:"health"},{label:"Save money",value:"money"},{label:"For my family",value:"family"},{label:"Feel better",value:"wellness"}],x=[{label:"Social situations",value:"social"},{label:"Stress & anxiety",value:"stress"},{label:"Cravings",value:"cravings"},{label:"Habit & routine",value:"habit"}],b=[{label:"Very supported",value:"high"},{label:"Somewhat supported",value:"medium"},{label:"On my own",value:"low"}],N=()=>{const w=parseInt(u.currentDailyPuffs);return isNaN(w)?50:Math.max(Math.floor(w*.75),5)},g=async()=>{o(!0);const w=u.dailyLimit?parseInt(u.dailyLimit):N(),{data:k,error:S}=await R.from("profiles").update({full_name:u.displayName||null,gender:u.gender||null,age_range:u.ageRange||null,onboarding_completed:!0,current_daily_puffs:parseInt(u.currentDailyPuffs)||0,daily_limit:w,motivation:u.whyQuit||null,biggest_challenge:u.biggestChallenge||null,support_system:u.supportLevel||null,cost_per_device:parseFloat(u.costPerDevice)||null,devices_per_week:parseFloat(u.devicesPerWeek)||null,quit_date:u.quitStatus==="quit"?new Date().toISOString().split("T")[0]:null,updated_at:new Date().toISOString()}).eq("id",t.id).select();if(S){console.error("Error updating profile:",S),o(!1);return}console.log("Profile updated successfully:",k),u.goal&&await R.from("goals").insert({user_id:t.id,title:u.goal==="quit"?"Quit completely":u.goal==="reduce"?"Reduce usage":"Track my progress",target_puffs:w}),await e(),o(!1),s("premium-splash")},p=()=>["name","gender","age","goal","current-usage","quit-status","why-quit","biggest-challenge","support-level","financial","daily-limit","notifications"].indexOf(n)+1,m=12,j=p()/m*100,_=({label:w,selected:k,onClick:S})=>a.jsx("button",{onClick:S,className:`w-full p-6 rounded-2xl border-2 text-left font-medium text-lg transition-all ${k?"border-primary-600 bg-primary-600 text-white shadow-lg":"border-gray-200 bg-white text-gray-900 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:w}),k&&a.jsx("div",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center",children:a.jsx(mt,{className:"w-4 h-4 text-primary-600"})})]})}),C=()=>{switch(n){case"splash":return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"text-center space-y-12 animate-fade-in",children:[a.jsx("img",{src:"/logo-wordmark.svg",alt:"Ditch",className:"w-full max-w-lg mx-auto transition-transform duration-300 hover:scale-105"}),a.jsx("button",{onClick:()=>s("fact-1"),className:"bg-gradient-to-r from-primary-500 to-secondary-500 text-white px-12 py-5 rounded-full font-bold text-xl hover:from-primary-600 hover:to-secondary-600 hover:shadow-lg hover:scale-105 transition-all duration-300 shadow-2xl",children:"Start"})]})});case"fact-1":return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"max-w-2xl w-full text-center space-y-12",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-7xl font-bold ",children:"72 hours"}),a.jsx("p",{className:"text-3xl font-medium leading-relaxed text-gray-700",children:"That's all it takes for your body to start recovering after you quit vaping"})]}),a.jsx("button",{onClick:()=>s("fact-2"),className:"mx-auto w-16 h-16 rounded-full bg-primary-500 hover:-translate-y-2 hover:shadow-[0_20px_60px_rgba(6,182,212,0.2)] transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) flex items-center justify-center",children:a.jsx(ct,{className:"w-8 h-8 text-white"})})]})});case"fact-2":return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"max-w-2xl w-full text-center space-y-12",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-7xl font-bold ",children:"$1,500+"}),a.jsx("p",{className:"text-3xl font-medium leading-relaxed text-gray-700",children:"Average amount saved per year by people who quit vaping"})]}),a.jsx("button",{onClick:()=>s("fact-3"),className:"mx-auto w-16 h-16 rounded-full bg-primary-500 hover:-translate-y-2 hover:shadow-[0_20px_60px_rgba(6,182,212,0.2)] transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) flex items-center justify-center",children:a.jsx(ct,{className:"w-8 h-8 text-white"})})]})});case"fact-3":return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"max-w-2xl w-full text-center space-y-12",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-7xl font-bold ",children:"3x"}),a.jsx("p",{className:"text-3xl font-medium leading-relaxed text-gray-700",children:"You're 3 times more likely to succeed with a structured plan and tracking"})]}),a.jsx("button",{onClick:()=>s("welcome"),className:"mx-auto w-16 h-16 rounded-full bg-primary-500 hover:-translate-y-2 hover:shadow-[0_20px_60px_rgba(6,182,212,0.2)] transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) flex items-center justify-center",children:a.jsx(ct,{className:"w-8 h-8 text-white"})})]})});case"welcome":return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"max-w-lg w-full text-center space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-5xl font-bold tracking-tight ",children:"Welcome to Ditch"}),a.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:"Your personal journey to a healthier, vape-free life starts here."})]}),a.jsx("button",{onClick:()=>s("name"),className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:-translate-y-2 hover:shadow-[0_20px_60px_rgba(6,182,212,0.2)] transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1)",children:"Get Started"}),a.jsx("p",{className:" text-sm",children:"Takes 2 minutes"})]})});case"name":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"What should we call you?"}),a.jsx("p",{className:"text-xl ",children:"This helps personalize your experience"})]}),a.jsx("input",{type:"text",value:u.displayName,onChange:S=>d({...u,displayName:S.target.value}),placeholder:"Enter your name",className:"w-full px-6 py-5 rounded-2xl border-2 border-gray-200 focus:border-primary-600 focus:ring-0 text-xl placeholder:text-gray-400 transition",autoFocus:!0}),a.jsxs("button",{onClick:()=>s("gender"),disabled:!u.displayName.trim(),className:"w-full bg-primary-600 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:bg-primary-700 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[a.jsx("span",{children:"Continue"}),a.jsx(ct,{className:"w-6 h-6"})]})]});case"gender":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"What's your gender?"}),a.jsx("p",{className:"text-xl ",children:"This helps us personalize your journey"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(_,{label:"Male",selected:u.gender==="male",onClick:()=>d({...u,gender:"male"})}),a.jsx(_,{label:"Female",selected:u.gender==="female",onClick:()=>d({...u,gender:"female"})}),a.jsx(_,{label:"Non-binary",selected:u.gender==="non-binary",onClick:()=>d({...u,gender:"non-binary"})}),a.jsx(_,{label:"Prefer not to say",selected:u.gender==="prefer-not-to-say",onClick:()=>d({...u,gender:"prefer-not-to-say"})})]}),a.jsxs("button",{onClick:()=>s("age"),disabled:!u.gender,className:"w-full bg-primary-600 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:bg-primary-700 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[a.jsx("span",{children:"Continue"}),a.jsx(ct,{className:"w-6 h-6"})]})]});case"age":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"What's your age range?"}),a.jsx("p",{className:"text-xl ",children:"This helps us understand your needs better"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(_,{label:"18-24",selected:u.ageRange==="18-24",onClick:()=>d({...u,ageRange:"18-24"})}),a.jsx(_,{label:"25-34",selected:u.ageRange==="25-34",onClick:()=>d({...u,ageRange:"25-34"})}),a.jsx(_,{label:"35-44",selected:u.ageRange==="35-44",onClick:()=>d({...u,ageRange:"35-44"})}),a.jsx(_,{label:"45-54",selected:u.ageRange==="45-54",onClick:()=>d({...u,ageRange:"45-54"})}),a.jsx(_,{label:"55+",selected:u.ageRange==="55+",onClick:()=>d({...u,ageRange:"55+"})})]}),a.jsxs("button",{onClick:()=>s("goal"),disabled:!u.ageRange,className:"w-full bg-primary-600 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:bg-primary-700 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[a.jsx("span",{children:"Continue"}),a.jsx(ct,{className:"w-6 h-6"})]})]});case"goal":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"What's your main goal?"}),a.jsx("p",{className:"text-xl ",children:"Choose the one that resonates most"})]}),a.jsx("div",{className:"space-y-3",children:h.map(S=>a.jsx(_,{label:S.label,selected:u.goal===S.value,onClick:()=>{d({...u,goal:S.value}),setTimeout(()=>s("current-usage"),300)}},S.value))})]});case"current-usage":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"How many puffs per day?"}),a.jsx("p",{className:"text-xl ",children:"Your current typical usage"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:u.currentDailyPuffs,onChange:S=>d({...u,currentDailyPuffs:S.target.value}),placeholder:"0",className:"w-full px-6 py-5 rounded-2xl border-2 border-gray-200 focus:border-primary-600 focus:ring-0 text-5xl font-bold text-center placeholder:text-gray-300 transition",min:"0"}),a.jsx("p",{className:"text-center text-gray-500 mt-4",children:"Just an estimate is fine"})]}),a.jsxs("button",{onClick:()=>s("quit-status"),disabled:!u.currentDailyPuffs||parseInt(u.currentDailyPuffs)<=0,className:"w-full bg-primary-600 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:bg-primary-700 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[a.jsx("span",{children:"Continue"}),a.jsx(ct,{className:"w-6 h-6"})]})]});case"quit-status":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"Where are you now?"}),a.jsx("p",{className:"text-xl ",children:"Your current status"})]}),a.jsx("div",{className:"space-y-3",children:f.map(S=>a.jsx(_,{label:S.label,selected:u.quitStatus===S.value,onClick:()=>{d({...u,quitStatus:S.value}),setTimeout(()=>s("why-quit"),300)}},S.value))})]});case"why-quit":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"Why quit?"}),a.jsx("p",{className:"text-xl ",children:"Your main motivation"})]}),a.jsx("div",{className:"space-y-3",children:y.map(S=>a.jsx(_,{label:S.label,selected:u.whyQuit===S.value,onClick:()=>{d({...u,whyQuit:S.value}),setTimeout(()=>s("biggest-challenge"),300)}},S.value))})]});case"biggest-challenge":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"Your biggest challenge?"}),a.jsx("p",{className:"text-xl ",children:"What makes it hardest for you?"})]}),a.jsx("div",{className:"space-y-3",children:x.map(S=>a.jsx(_,{label:S.label,selected:u.biggestChallenge===S.value,onClick:()=>{d({...u,biggestChallenge:S.value}),setTimeout(()=>s("support-level"),300)}},S.value))})]});case"support-level":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"How supported do you feel?"}),a.jsx("p",{className:"text-xl ",children:"By friends, family, or community"})]}),a.jsx("div",{className:"space-y-3",children:b.map(S=>a.jsx(_,{label:S.label,selected:u.supportLevel===S.value,onClick:()=>{d({...u,supportLevel:S.value}),setTimeout(()=>s("financial"),300)}},S.value))})]});case"financial":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"Let's calculate your savings"}),a.jsx("p",{className:"text-xl ",children:"How much do you spend on vaping?"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cost per device"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-3xl font-bold text-gray-400",children:"$"}),a.jsx("input",{type:"number",step:"0.01",value:u.costPerDevice,onChange:S=>d({...u,costPerDevice:S.target.value}),placeholder:"25",className:"w-full pl-14 pr-6 py-5 rounded-2xl border-2 border-gray-200 focus:border-primary-600 focus:ring-0 text-3xl font-bold placeholder:text-gray-300 transition",min:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Devices per week"}),a.jsx("input",{type:"number",step:"0.5",value:u.devicesPerWeek,onChange:S=>d({...u,devicesPerWeek:S.target.value}),placeholder:"2",className:"w-full px-6 py-5 rounded-2xl border-2 border-gray-200 focus:border-primary-600 focus:ring-0 text-3xl font-bold text-center placeholder:text-gray-300 transition",min:"0"})]}),u.costPerDevice&&u.devicesPerWeek&&a.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-6 text-center",children:[a.jsx("p",{className:"text-sm font-semibold text-green-800 mb-1",children:"Monthly savings potential"}),a.jsxs("p",{className:"text-5xl font-bold text-green-900",children:["$",(parseFloat(u.costPerDevice)*parseFloat(u.devicesPerWeek)*52/12).toFixed(0)]})]})]}),a.jsxs("button",{onClick:()=>s("daily-limit"),disabled:!u.costPerDevice||!u.devicesPerWeek,className:"w-full bg-primary-600 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:bg-primary-700 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[a.jsx("span",{children:"Continue"}),a.jsx(ct,{className:"w-6 h-6"})]})]});case"daily-limit":const w=N();return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"Set your daily limit"}),a.jsx("p",{className:"text-xl ",children:"We recommend starting with a 25% reduction"})]}),a.jsxs("div",{className:"bg-primary-50 border-2 border-primary-200 rounded-2xl p-8 text-center",children:[a.jsx("p",{className:"text-sm font-semibold text-primary-800 mb-2",children:"Recommended limit"}),a.jsx("p",{className:"text-7xl font-bold text-primary-900 mb-2",children:w}),a.jsx("p",{className:"text-lg text-primary-700",children:"puffs per day"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 text-center",children:"Or set your own limit"}),a.jsx("input",{type:"number",value:u.dailyLimit,onChange:S=>d({...u,dailyLimit:S.target.value}),placeholder:w.toString(),className:"w-full px-6 py-5 rounded-2xl border-2 border-gray-200 focus:border-primary-600 focus:ring-0 text-4xl font-bold text-center placeholder:text-gray-300 transition",min:"0"})]}),a.jsxs("button",{onClick:()=>s("notifications"),className:"w-full bg-primary-600 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:bg-primary-700 transition flex items-center justify-center space-x-2",children:[a.jsx("span",{children:"Continue"}),a.jsx(ct,{className:"w-6 h-6"})]})]});case"notifications":return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-4xl font-bold ",children:"Stay on track"}),a.jsx("p",{className:"text-xl ",children:"Enable notifications for daily reminders and motivation"})]}),a.jsxs("div",{className:"bg-primary-50 border-2 border-primary-200 rounded-2xl p-8 text-center",children:[a.jsx(Zr,{className:"w-20 h-20 text-primary-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl font-bold  mb-3",children:"Get gentle reminders"}),a.jsxs("ul",{className:"text-left space-y-3 max-w-md mx-auto",children:[a.jsxs("li",{className:"flex items-start space-x-3",children:[a.jsx(mt,{className:"w-6 h-6 text-primary-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-700",children:"Daily check-ins to log your progress"})]}),a.jsxs("li",{className:"flex items-start space-x-3",children:[a.jsx(mt,{className:"w-6 h-6 text-primary-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-700",children:"Milestone celebrations"})]}),a.jsxs("li",{className:"flex items-start space-x-3",children:[a.jsx(mt,{className:"w-6 h-6 text-primary-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-700",children:"Encouragement when you need it"})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>{d({...u,notificationsEnabled:!0}),g()},disabled:i,className:"w-full bg-primary-600 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:bg-primary-700 transition disabled:opacity-40",children:i?"Setting up...":"Enable Notifications"}),a.jsx("button",{onClick:()=>{g()},disabled:i,className:"w-full  py-4 px-8 rounded-2xl font-semibold hover:bg-gray-100 transition",children:"Maybe later"})]})]});case"complete":return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"max-w-lg w-full text-center space-y-8",children:[a.jsx("div",{className:"w-24 h-24 rounded-full bg-primary-500 flex items-center justify-center mx-auto",children:a.jsx(mt,{className:"w-16 h-16 text-white"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h1",{className:"text-5xl font-bold tracking-tight ",children:["All set, ",u.displayName,"!"]}),a.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:"Setting up your personalized experience..."})]}),a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-600 mx-auto"})]})});case"premium-splash":const k=async(S,T)=>{if(t){c(!0);try{const P=await(await fetch("https://0ec90b57d6e95fcbda19832f.supabase.co/functions/v1/stripe-checkout",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJib2x0IiwicmVmIjoiMGVjOTBiNTdkNmU5NWZjYmRhMTk4MzJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4ODE1NzQsImV4cCI6MTc1ODg4MTU3NH0.9I8-U0x86Ak8t2DGaIk0HfvTSLsAyzdnz-Nw00mMkKw","Content-Type":"application/json"},body:JSON.stringify({price_id:S,success_url:`${window.location.origin}/?success=true`,cancel_url:`${window.location.origin}/`,mode:T})})).json();P.url?window.location.href=P.url:(console.error("No checkout URL returned:",P),alert("Failed to create checkout session. Please try again."),c(!1))}catch(A){console.error("Error creating checkout session:",A),alert("Failed to create checkout session. Please try again."),c(!1)}}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center mx-auto shadow-2xl",children:a.jsx(Qt,{className:"w-14 h-14 text-white"})}),a.jsx("h1",{className:"text-5xl font-bold tracking-tight ",children:"Unlock Premium"}),a.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:"Get the most out of your journey with advanced features"})]}),a.jsxs("div",{className:"bg-slate-800 rounded-3xl p-8 space-y-6 border border-slate-700 hover:-translate-y-2 hover:border-primary-500 hover:shadow-[0_20px_60px_rgba(6,182,212,0.2)] transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1)",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:a.jsx(Ht,{className:"w-7 h-7 text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-1 text-white",children:"AI-Powered Insights"}),a.jsx("p",{className:"text-gray-300",children:"Personalized recommendations based on your patterns and behavior"})]})]}),a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:a.jsx(Jl,{className:"w-7 h-7 text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-1 text-white",children:"Savings Tracker"}),a.jsx("p",{className:"text-gray-300",children:"See exactly how much money you're saving in real-time"})]})]}),a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:a.jsx(en,{className:"w-7 h-7 text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-1 text-white",children:"Craving Analysis"}),a.jsx("p",{className:"text-gray-300",children:"Identify triggers and patterns to overcome challenges"})]})]}),a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary-500/20 flex items-center justify-center flex-shrink-0",children:a.jsx(Kt,{className:"w-7 h-7 text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-1 text-white",children:"Advanced Analytics"}),a.jsx("p",{className:"text-gray-300",children:"Deep insights into your progress with detailed charts"})]})]})]}),a.jsxs("div",{className:"bg-primary-500/10 rounded-2xl p-6 text-center border border-primary-500/20",children:[a.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Special Launch Offer"}),a.jsxs("div",{className:"flex items-baseline justify-center mb-2",children:[a.jsx("span",{className:"text-6xl font-bold text-white",children:"$2.99"}),a.jsx("span",{className:"text-2xl ml-2 text-gray-300",children:"/month"})]}),a.jsx("p",{className:"text-sm text-gray-400",children:"or $25/year  Cancel anytime"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>k(un[1].id,"subscription"),disabled:l,className:"w-full bg-gradient-to-r from-cyan-500 to-teal-500 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:-translate-y-2 hover:shadow-[0_20px_60px_rgba(6,182,212,0.2)] transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:l?"Opening checkout...":"Upgrade Monthly - $2.99/mo"}),a.jsx("button",{onClick:()=>k(un[0].id,"payment"),disabled:l,className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-5 px-8 rounded-2xl font-bold text-xl hover:-translate-y-2 hover:shadow-[0_20px_60px_rgba(6,182,212,0.2)] transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:l?"Opening checkout...":"Upgrade Yearly - $25/year"}),a.jsx("button",{onClick:async()=>{await e(),window.location.href="/"},className:"w-full text-gray-700 py-4 px-8 rounded-2xl font-semibold hover:bg-white/50 transition-all",children:"Continue for Free"})]})]})})}};return n==="splash"||n==="fact-1"||n==="fact-2"||n==="fact-3"||n==="welcome"||n==="complete"||n==="premium-splash"?C():a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("button",{onClick:()=>{const w=["name","gender","age","goal","current-usage","quit-status","why-quit","biggest-challenge","support-level","financial","daily-limit","notifications"],k=w.indexOf(n);k>0&&s(w[k-1])},className:"text-gray-600 hover: font-medium",children:" Back"}),a.jsxs("span",{className:"text-sm font-semibold ",children:[p()," of ",m]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:"bg-primary-600 h-2 transition-all duration-500 ease-out",style:{width:`${j}%`}})})]})}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full max-w-2xl",children:C()})})]})}function nx(){const{user:t,profile:e}=Se(),[r,n]=v.useState(0),[s,i]=v.useState(!1),[o,l]=v.useState(!0);v.useEffect(()=>{t&&c()},[t,e==null?void 0:e.daily_limit]);const c=async()=>{const y=new Date().toISOString().split("T")[0],{data:x,error:b}=await R.from("daily_stats").select("total_puffs").eq("user_id",t.id).eq("date",y).maybeSingle();b&&b.code!=="PGRST116"&&console.error("Error fetching today count:",b),n((x==null?void 0:x.total_puffs)||0),l(!1)},u=async()=>{if(!t)return;i(!0),setTimeout(()=>i(!1),300);const y=r+1;n(y);const x=new Date().toISOString().split("T")[0],{error:b}=await R.from("puffs").insert({user_id:t.id,puff_count:1,recorded_at:new Date().toISOString()});if(b){console.error("Error adding puff:",b),n(r);return}const{data:N}=await R.from("daily_stats").select("id, total_puffs").eq("user_id",t.id).eq("date",x).maybeSingle();N?await R.from("daily_stats").update({total_puffs:y,updated_at:new Date().toISOString()}).eq("id",N.id):await R.from("daily_stats").insert({user_id:t.id,date:x,total_puffs:y})};if(o)return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});const d=(e==null?void 0:e.daily_limit)||50,h=r/d*100,f=r>d;return a.jsxs("div",{className:"flex flex-col items-center justify-center space-y-8 p-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold  mb-2",children:"Today's Count"}),a.jsx("p",{className:"",children:"Tap the counter to track each puff"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`w-64 h-64 rounded-full bg-gradient-to-br ${f?"from-red-400 to-orange-400":"from-primary-500 to-secondary-500"} shadow-2xl flex items-center justify-center cursor-pointer transform transition-all duration-300 hover:scale-110 hover:shadow-[0_0_40px_rgba(20,184,142,0.4)] active:scale-95 ${s?"scale-110":""}`,onClick:u,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-7xl font-bold text-white mb-2",children:r}),a.jsx("div",{className:"text-xl text-white opacity-90",children:"puffs"})]})}),s&&a.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white animate-ping"})]}),a.jsxs("div",{className:"w-full max-w-md space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-gray-700 font-medium",children:"Daily Goal"}),a.jsxs("span",{className:" font-bold",children:[d," puffs"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-300 ${f?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-primary-500 to-secondary-500"}`,style:{width:`${Math.min(h,100)}%`}})}),a.jsx("div",{className:"mt-2 text-right",children:a.jsx("span",{className:`text-sm font-medium ${f?"text-red-600":"text-gray-600"}`,children:f?`${r-d} over limit`:`${d-r} remaining`})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[f?a.jsx(Kt,{className:"w-5 h-5 text-red-500"}):a.jsx($f,{className:"w-5 h-5 text-green-500"}),a.jsx("span",{className:" text-sm",children:"Status"})]}),a.jsx("p",{className:`text-lg font-bold ${f?"text-red-600":"text-green-600"}`,children:f?"Over Limit":"On Track"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx(Jt,{className:"w-5 h-5 text-primary-500"}),a.jsx("span",{className:" text-sm",children:"Progress"})]}),a.jsxs("p",{className:"text-lg font-bold ",children:[Math.round(h),"%"]})]})]})]})]})}function sx(){const{user:t}=Se(),[e,r]=v.useState("week"),[n,s]=v.useState([]),[i,o]=v.useState(!0);v.useEffect(()=>{t&&l()},[t,e]);const l=async()=>{o(!0);let y=new Date;e==="week"?y.setDate(y.getDate()-7):e==="month"?y.setDate(y.getDate()-30):y.setFullYear(y.getFullYear()-1);const{data:x,error:b}=await R.from("daily_stats").select("*").eq("user_id",t.id).gte("date",y.toISOString().split("T")[0]).order("date",{ascending:!0});if(b){console.error("Error fetching stats:",b),o(!1);return}s(x||[]),o(!1)},c=n.reduce((y,x)=>y+x.total_puffs,0),u=n.length>0?Math.round(c/n.length):0,d=n.length>0?Math.max(...n.map(y=>y.total_puffs)):0,h=n.length>0?Math.min(...n.map(y=>y.total_puffs)):0,f=y=>d===0?0:y/d*100;return i?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Statistics"}),a.jsxs("div",{className:"flex space-x-2 bg-white rounded-lg shadow p-1",children:[a.jsx("button",{onClick:()=>r("week"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${e==="week"?"bg-primary-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Week"}),a.jsx("button",{onClick:()=>r("month"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${e==="month"?"bg-primary-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Month"}),a.jsx("button",{onClick:()=>r("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition ${e==="all"?"bg-primary-500 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"All Time"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pb-2.5",children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:a.jsx(Oi,{className:"w-5 h-5 text-primary-600"})}),a.jsx("span",{className:" font-medium",children:"Total"})]}),a.jsx("p",{className:"text-3xl font-bold ",children:c}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"puffs"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx($f,{className:"w-5 h-5 text-green-600"})}),a.jsx("span",{className:" font-medium",children:"Average"})]}),a.jsx("p",{className:"text-3xl font-bold ",children:u}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"per day"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(_r,{className:"w-5 h-5 text-red-600"})}),a.jsx("span",{className:" font-medium",children:"Peak"})]}),a.jsx("p",{className:"text-3xl font-bold ",children:d}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"highest day"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-100 flex items-center justify-center",children:a.jsx(_r,{className:"w-5 h-5 text-secondary-600"})}),a.jsx("span",{className:" font-medium",children:"Best"})]}),a.jsx("p",{className:"text-3xl font-bold ",children:h}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"lowest day"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Daily Breakdown"}),n.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Oi,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),a.jsx("p",{children:"No data available for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Start tracking to see your statistics"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-end justify-between h-64 space-x-2",children:n.map((y,x)=>a.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[a.jsx("div",{className:"w-full bg-gradient-to-t from-blue-500 to-cyan-400 rounded-t-lg transition-all duration-300 hover:from-blue-600 hover:to-cyan-500 relative group",style:{height:`${f(y.total_puffs)}%`,minHeight:y.total_puffs>0?"4px":"0"},children:a.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity",children:y.total_puffs})}),a.jsx("div",{className:"mt-2 text-xs  text-center",children:new Date(y.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},y.id))}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-3 px-4 text-gray-700 font-semibold",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-gray-700 font-semibold",children:"Puffs"}),a.jsx("th",{className:"text-right py-3 px-4 text-gray-700 font-semibold",children:"vs Average"})]})}),a.jsx("tbody",{children:n.slice().reverse().map(y=>{const x=y.total_puffs-u,b=u>0?Math.round(x/u*100):0;return a.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[a.jsx("td",{className:"py-3 px-4 ",children:new Date(y.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),a.jsx("td",{className:"py-3 px-4 text-right font-semibold ",children:y.total_puffs}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsxs("span",{className:`font-medium ${x>0?"text-red-600":x<0?"text-green-600":"text-gray-600"}`,children:[x>0?"+":"",b,"%"]})})]},y.id)})})]})})]})]})]})}function ix(){const{user:t,profile:e,refreshProfile:r}=Se(),[n,s]=v.useState([]),[i,o]=v.useState(!0),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[h,f]=v.useState({title:"",description:"",target_puffs:""});v.useEffect(()=>{t&&y()},[t]);const y=async()=>{const{data:g,error:p}=await R.from("goals").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});p?console.error("Error fetching goals:",p):s(g||[]),o(!1)},x=async g=>{g.preventDefault();const p=parseInt(h.target_puffs),{error:m}=await R.from("goals").insert({user_id:t.id,title:h.title,description:h.description,target_puffs:p});if(m){console.error("Error adding goal:",m);return}if(u){const{error:j}=await R.from("profiles").update({daily_limit:p,updated_at:new Date().toISOString()}).eq("id",t.id);j?console.error("Error updating daily limit:",j):await r()}f({title:"",description:"",target_puffs:""}),d(!1),c(!1),y()},b=async g=>{const{error:p}=await R.from("goals").update({is_completed:!g.is_completed,completed_at:g.is_completed?null:new Date().toISOString()}).eq("id",g.id);if(p){console.error("Error updating goal:",p);return}y()},N=async g=>{const{error:p}=await R.from("goals").delete().eq("id",g);if(p){console.error("Error deleting goal:",p);return}y()};return i?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold ",children:"Goals"}),a.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 transition",children:[a.jsx(Of,{className:"w-5 h-5"}),a.jsx("span",{children:"Add Goal"})]})]}),l&&a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold  mb-4",children:"Create New Goal"}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal Title"}),a.jsx("input",{type:"text",value:h.title,onChange:g=>f({...h,title:g.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Stay under 30 puffs per day",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:h.description,onChange:g=>f({...h,description:g.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Optional: Add more details about your goal",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Daily Puffs"}),a.jsx("input",{type:"number",value:h.target_puffs,onChange:g=>f({...h,target_puffs:g.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., 30",required:!0,min:"0"})]}),a.jsx("div",{className:"bg-primary-50 rounded-lg p-4 border border-primary-200",children:a.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:u,onChange:g=>d(g.target.checked),className:"mt-1 w-5 h-5 text-primary-600 rounded focus:ring-2 focus:ring-primary-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"font-medium  block",children:"Update my dashboard to this goal"}),a.jsxs("span",{className:"text-sm ",children:["This will adjust your daily limit on the counter dashboard to match this goal",e&&h.target_puffs&&a.jsxs("span",{className:"font-medium",children:[" (",e.daily_limit,"  ",h.target_puffs," puffs)"]})]})]})]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-primary-500 text-white py-2 rounded-lg hover:bg-primary-600 transition",children:"Create Goal"}),a.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300 transition",children:"Cancel"})]})]})]}),a.jsx("div",{className:"space-y-4",children:n.length===0?a.jsxs("div",{className:"bg-white rounded-xl p-12 shadow-lg text-center",children:[a.jsx(Jt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("h3",{className:"text-xl font-semibold  mb-2",children:"No Goals Yet"}),a.jsx("p",{className:" mb-6",children:"Set goals to help track your progress toward quitting"}),a.jsx("button",{onClick:()=>c(!0),className:"bg-primary-500 text-white px-6 py-3 rounded-lg hover:bg-primary-600 transition",children:"Create Your First Goal"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(g=>a.jsxs("div",{className:`bg-white rounded-xl p-6 shadow-lg transition-all ${g.is_completed?"opacity-75":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[a.jsx("button",{onClick:()=>b(g),className:`mt-1 w-6 h-6 rounded-full border-2 flex items-center justify-center transition ${g.is_completed?"bg-green-500 border-green-500":"border-gray-300 hover:border-green-500"}`,children:g.is_completed&&a.jsx(mt,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-lg font-semibold ${g.is_completed?"text-gray-500 line-through":"text-gray-800"}`,children:g.title}),g.description&&a.jsx("p",{className:" text-sm mt-1",children:g.description})]})]}),a.jsx("button",{onClick:()=>N(g.id),className:"text-gray-400 hover:text-red-500 transition",children:a.jsx(ex,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Jt,{className:"w-5 h-5 text-primary-500"}),a.jsxs("span",{className:"text-gray-700 font-medium",children:["Target: ",g.target_puffs," puffs/day"]})]}),g.is_completed&&g.completed_at&&a.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["Completed ",new Date(g.completed_at).toLocaleDateString()]})]})]},g.id))})})]})}function ax(){const{user:t,profile:e,signOut:r,refreshProfile:n}=Se(),[s,i]=v.useState(!1),[o,l]=v.useState(!1),[c,u]=v.useState({full_name:"",daily_limit:"",quit_goal_date:""});v.useEffect(()=>{e&&u({full_name:e.full_name||"",daily_limit:e.daily_limit.toString(),quit_goal_date:e.quit_goal_date||""})},[e]);const d=async f=>{f.preventDefault(),l(!0);const{error:y}=await R.from("profiles").update({full_name:c.full_name,daily_limit:parseInt(c.daily_limit),quit_goal_date:c.quit_goal_date||null,updated_at:new Date().toISOString()}).eq("id",t.id);if(y){console.error("Error updating profile:",y),l(!1);return}await n(),i(!1),l(!1)},h=async()=>{await r()};return e?a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold ",children:"Profile & Settings"}),s?a.jsx("button",{onClick:()=>i(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancel"}):a.jsx("button",{onClick:()=>i(!0),className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 transition",children:"Edit Profile"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center",children:a.jsx(Go,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold ",children:e.full_name||"User"}),a.jsx("p",{className:"",children:e.email})]})]}),s?a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",value:c.full_name,onChange:f=>u({...c,full_name:f.target.value}),className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Limit"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Jt,{className:"w-5 h-5 text-primary-500"}),a.jsx("input",{type:"number",value:c.daily_limit,onChange:f=>u({...c,daily_limit:f.target.value}),className:"flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",required:!0}),a.jsx("span",{className:"",children:"puffs per day"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Set your target maximum puffs per day to help track your progress"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quit Goal Date"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_r,{className:"w-5 h-5 text-primary-500"}),a.jsx("input",{type:"date",value:c.quit_goal_date,onChange:f=>u({...c,quit_goal_date:f.target.value}),className:"flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Optional: Set a target date for when you want to quit completely"})]}),a.jsxs("button",{type:"submit",disabled:o,className:"w-full bg-primary-500 text-white py-3 rounded-lg hover:bg-primary-600 transition flex items-center justify-center space-x-2 disabled:opacity-50",children:[a.jsx(Xy,{className:"w-5 h-5"}),a.jsx("span",{children:o?"Saving...":"Save Changes"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-primary-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Jt,{className:"w-5 h-5 text-primary-600"}),a.jsx("span",{className:"text-gray-700 font-medium",children:"Daily Limit"})]}),a.jsxs("p",{className:"text-2xl font-bold ",children:[e.daily_limit," puffs"]}),a.jsx("p",{className:"text-sm  mt-1",children:"Your daily target"})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(_r,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-gray-700 font-medium",children:"Quit Goal Date"})]}),a.jsx("p",{className:"text-2xl font-bold ",children:e.quit_goal_date?new Date(e.quit_goal_date).toLocaleDateString():"Not set"}),a.jsx("p",{className:"text-sm  mt-1",children:"Target quit date"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold  mb-2",children:"Account Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"",children:"Email:"}),a.jsx("span",{className:" font-medium",children:e.email})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"",children:"Member since:"}),a.jsx("span",{className:" font-medium",children:new Date(e.created_at).toLocaleDateString()})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold  mb-4",children:"About Ditch"}),a.jsx("p",{className:" mb-4",children:"Ditch helps you track your vaping habits and work toward quitting. Monitor your daily usage, set goals, and visualize your progress over time."}),a.jsxs("div",{className:"space-y-2 text-sm ",children:[a.jsx("p",{children:"Track every puff with a simple tap"}),a.jsx("p",{children:"View detailed statistics and trends"}),a.jsx("p",{children:"Set daily limits and personal goals"}),a.jsx("p",{children:"Monitor your progress toward quitting"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold  mb-4",children:"Legal"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-privacy")),className:"w-full text-left text-primary-600 hover:text-primary-700 font-medium",children:"Privacy Policy"}),a.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-terms")),className:"w-full text-left text-primary-600 hover:text-primary-700 font-medium",children:"Terms of Service"})]})]}),a.jsx("button",{onClick:h,className:"w-full bg-red-500 text-white py-3 rounded-lg hover:bg-red-600 transition font-semibold mb-6",children:"Sign Out"})]}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})})}function ox({children:t,feature:e="This feature"}){const{isPremium:r}=ta();return r?a.jsx(a.Fragment,{children:t}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"blur-sm pointer-events-none select-none",children:t}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-blue-500/10 to-cyan-500/10 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Qt,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold  mb-2",children:"Premium Feature"}),a.jsxs("p",{className:" mb-6",children:[e," is only available to premium members."]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>{const n=new CustomEvent("navigate-to-upgrade");window.dispatchEvent(n)},className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-3 rounded-lg font-semibold hover:from-primary-600 hover:to-secondary-600 transition flex items-center justify-center space-x-2",children:[a.jsx(Qt,{className:"w-5 h-5"}),a.jsx("span",{children:"Upgrade to Premium"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Free 3-day trial  Then $2.99/month"})]})]})})]})}function lx(){return a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:[a.jsx(Qt,{className:"w-3 h-3 mr-1"}),"PRO"]})}function cx(){const{user:t,profile:e}=Se(),{isPremium:r}=ta(),[n,s]=v.useState([]),[i,o]=v.useState([]),[l,c]=v.useState(!0),[u,d]=v.useState(!1),[h,f]=v.useState({intensity:5,trigger:"",notes:""}),[y,x]=v.useState([]);v.useEffect(()=>{t&&r?b():c(!1)},[t,r]),v.useEffect(()=>{t&&r&&!l&&m()},[t,r,l,n]);const b=async()=>{const[w,k]=await Promise.all([R.from("cravings").select("*").eq("user_id",t.id).order("recorded_at",{ascending:!1}),R.from("health_milestones").select("*").eq("user_id",t.id).order("achieved_at",{ascending:!1})]);w.data&&s(w.data),k.data&&o(k.data),c(!1)},N=async w=>{w.preventDefault();const{error:k}=await R.from("cravings").insert({user_id:t.id,intensity:h.intensity,trigger:h.trigger||null,notes:h.notes||null});if(k){console.error("Error adding craving:",k);return}f({intensity:5,trigger:"",notes:""}),d(!1),b()},g=()=>{if(!(e!=null&&e.quit_date)||!e.cost_per_device||!e.devices_per_week)return 0;const w=new Date(e.quit_date),S=Math.floor((new Date().getTime()-w.getTime())/(1e3*60*60*24));return S<0?0:S/7*e.devices_per_week*e.cost_per_device},p=()=>{if(!(e!=null&&e.quit_date))return[];const w=new Date(e.quit_date),S=(new Date().getTime()-w.getTime())/(1e3*60*60),T=S/24,A=[];return S>=2&&A.push({title:"Nicotine levels dropping",description:"Your body is starting to eliminate nicotine",icon:us}),S>=8&&A.push({title:"Oxygen levels normalizing",description:"Blood oxygen levels are improving",icon:je}),T>=1&&A.push({title:"Sense of taste improving",description:"Your taste buds are recovering",icon:en}),T>=2&&A.push({title:"Breathing easier",description:"Lung function is starting to improve",icon:je}),T>=7&&A.push({title:"Increased energy",description:"Your body has adjusted to being nicotine-free",icon:Kt}),T>=30&&A.push({title:"Reduced cravings",description:"Physical addiction is diminishing",icon:Ht}),A},m=async()=>{const w=[],{data:k}=await R.from("puffs").select("*").eq("user_id",t.id).order("recorded_at",{ascending:!0}),{data:S}=await R.from("daily_stats").select("*").eq("user_id",t.id).order("date",{ascending:!0});if(S&&S.length>=14){const T=S.slice(-7),A=S.slice(-14,-7),P=T.reduce((G,ve)=>G+ve.count,0)/7,L=A.reduce((G,ve)=>G+ve.count,0)/7;if(P<L){const G=((L-P)/L*100).toFixed(1);w.push({type:"progress",title:"Great Progress!",message:`Your average daily count decreased by ${G}% this week (${P.toFixed(1)} vs ${L.toFixed(1)} last week). Keep it up!`})}else if(P>L){const G=((P-L)/L*100).toFixed(1);w.push({type:"warning",title:"Trend Alert",message:`Your daily count increased by ${G}% this week. Review your triggers and consider adjusting your strategy.`})}else w.push({type:"stable",title:"Steady Progress",message:`Your usage has remained stable at ${P.toFixed(1)} per day. Consider setting a new reduction goal.`})}if(n.length>=5){const T={},A={};n.forEach(Q=>{const Ce=new Date(Q.recorded_at).getHours();if(T[Ce]=(T[Ce]||0)+1,Q.trigger&&Q.trigger.trim()){const O=Q.trigger.toLowerCase().trim();A[O]=(A[O]||0)+1}});const P=Object.entries(T).sort(([,Q],[,Ce])=>Ce-Q).slice(0,2).map(([Q])=>parseInt(Q));if(P.length>0){const Q=P[0]<12?"morning":P[0]<17?"afternoon":"evening";w.push({type:"pattern",title:"Craving Pattern Detected",message:`Most of your cravings occur in the ${Q} (around ${P[0]}:00). Plan alternative activities during this time.`})}const L=Object.entries(A).sort(([,Q],[,Ce])=>Ce-Q).slice(0,2);if(L.length>0){const[Q,Ce]=L[0];w.push({type:"trigger",title:"Top Trigger Identified",message:`"${Q}" is your most common trigger (${Ce} times). Consider developing coping strategies for this situation.`})}const G=n.slice(0,7),ve=G.reduce((Q,Ce)=>Q+Ce.intensity,0)/G.length;ve<5?w.push({type:"success",title:"Craving Intensity Decreasing",message:`Your average craving intensity is ${ve.toFixed(1)}/10. Your body is adapting well!`}):ve>7&&w.push({type:"support",title:"High Craving Intensity",message:`Your recent cravings average ${ve.toFixed(1)}/10. Consider reaching out to support resources or trying relaxation techniques.`})}if(k&&k.length>0){const T=new Date().toISOString().split("T")[0],A=k.filter(P=>P.recorded_at.startsWith(T)).length;if(S&&S.length>=7){const L=S.slice(-7).reduce((G,ve)=>G+ve.count,0)/7;A<L*.7&&w.push({type:"achievement",title:"Outstanding Day!",message:`You're at ${A} today, well below your 7-day average of ${L.toFixed(1)}. Excellent self-control!`})}}if(e!=null&&e.quit_date){const T=Math.floor((new Date().getTime()-new Date(e.quit_date).getTime())/864e5);T===7?w.push({type:"milestone",title:"1 Week Milestone!",message:"Congratulations on one week! The hardest part is behind you. Your body is already healing."}):T===30?w.push({type:"milestone",title:"1 Month Achievement!",message:"Amazing! 30 days nicotine-free. Your lung function has improved by up to 30%."}):T===90&&w.push({type:"milestone",title:"3 Months Strong!",message:"Incredible achievement! Your circulation and lung function continue to improve significantly."})}w.length===0&&w.push({type:"general",title:"Getting Started",message:"Keep logging your cravings and daily counts to receive personalized insights based on your patterns."}),x(w)},j=async()=>{const{data:w}=await R.from("puffs").select("*").eq("user_id",t.id).order("recorded_at",{ascending:!0}),{data:k}=await R.from("daily_stats").select("*").eq("user_id",t.id).order("date",{ascending:!0}),S={profile:e,puffs:w,stats:k,cravings:n,exportedAt:new Date().toISOString()},T=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),A=URL.createObjectURL(T),P=document.createElement("a");P.href=A,P.download=`puffcount-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(A)};if(l)return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});const _=g(),C=p();if(!r){const w=()=>{window.dispatchEvent(new Event("navigate-to-upgrade"))};return a.jsx("div",{className:"p-6",children:a.jsx(ox,{feature:"Premium Analytics",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-6 text-white shadow-lg h-32"}),a.jsx("div",{className:"bg-gradient-to-br from-primary-500 to-secondary-600 rounded-xl p-6 text-white shadow-lg h-32"})]}),a.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg h-64"}),a.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg h-96"}),a.jsx("div",{className:"flex justify-center mt-8",children:a.jsx("button",{onClick:w,className:"bg-gradient-to-r from-cyan-500 to-teal-500 text-white px-8 py-4 rounded-xl text-lg font-bold hover:from-cyan-600 hover:to-teal-600 transition shadow-lg transform hover:scale-105",children:"Upgrade to Premium"})})]})})})}return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold ",children:"Premium Analytics"}),a.jsx("p",{className:"",children:"Advanced insights and tracking"})]}),a.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 transition",children:[a.jsx(Pf,{className:"w-5 h-5"}),a.jsx("span",{children:"Export Data"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-6 text-white shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:a.jsx(Jl,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:"Money Saved"}),a.jsxs("p",{className:"text-3xl font-bold",children:["$",_.toFixed(2)]})]})]}),a.jsx("p",{className:"text-sm opacity-80",children:e!=null&&e.quit_date?`Since ${new Date(e.quit_date).toLocaleDateString()}`:"Set your quit date to track savings"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-secondary-600 rounded-xl p-6 text-white shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:a.jsx(_r,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:"Current Streak"}),a.jsxs("p",{className:"text-3xl font-bold",children:[(e==null?void 0:e.longest_streak)||0," days"]})]})]}),a.jsx("p",{className:"text-sm opacity-80",children:"Keep going strong!"})]})]}),C.length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(je,{className:"w-6 h-6 text-red-500"}),a.jsx("h3",{className:"text-xl font-bold ",children:"Health Benefits Achieved"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map((w,k)=>{const S=w.icon;return a.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-green-50 rounded-lg",children:[a.jsx(S,{className:"w-5 h-5 text-green-600 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold ",children:w.title}),a.jsx("p",{className:"text-sm ",children:w.description})]})]},k)})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(yr,{className:"w-6 h-6 text-orange-500"}),a.jsx("h3",{className:"text-xl font-bold ",children:"Craving Tracker"})]}),r&&a.jsx("button",{onClick:()=>d(!u),className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition text-sm",children:"Log Craving"})]}),u&&a.jsxs("form",{onSubmit:N,className:"mb-6 p-4 bg-orange-50 rounded-lg space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Intensity (1-10): ",h.intensity]}),a.jsx("input",{type:"range",min:"1",max:"10",value:h.intensity,onChange:w=>f({...h,intensity:parseInt(w.target.value)}),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trigger"}),a.jsx("input",{type:"text",value:h.trigger,onChange:w=>f({...h,trigger:w.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-orange-500",placeholder:"e.g., stress, social situation"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{value:h.notes,onChange:w=>f({...h,notes:w.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-orange-500",rows:2,placeholder:"How did you handle it?"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600 transition",children:"Save"}),a.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300 transition",children:"Cancel"})]})]}),n.length>0?a.jsx("div",{className:"space-y-3",children:n.map(w=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${w.intensity>=7?"bg-red-500":w.intensity>=4?"bg-orange-500":"bg-green-500"}`}),a.jsxs("span",{className:"font-semibold ",children:["Intensity: ",w.intensity,"/10"]})]}),a.jsx("span",{className:"text-sm text-gray-500",children:new Date(w.recorded_at).toLocaleString()})]}),w.trigger&&a.jsxs("p",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Trigger:"})," ",w.trigger]}),w.notes&&a.jsx("p",{className:"text-sm ",children:w.notes})]},w.id))}):a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No cravings logged yet. Track your cravings to identify patterns."})]}),a.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-secondary-600 rounded-xl p-6 text-white shadow-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Ht,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"Dynamic Insights"}),a.jsx("p",{className:"text-sm opacity-90",children:"AI-powered personalized analysis"})]})]}),a.jsx("div",{className:"space-y-3",children:y.length>0?y.map((w,k)=>a.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsxs("div",{className:"flex-shrink-0 mt-1",children:[w.type==="progress"&&a.jsx(Kt,{className:"w-5 h-5"}),w.type==="warning"&&a.jsx(yr,{className:"w-5 h-5"}),w.type==="pattern"&&a.jsx(Ht,{className:"w-5 h-5"}),w.type==="trigger"&&a.jsx(yr,{className:"w-5 h-5"}),w.type==="success"&&a.jsx(en,{className:"w-5 h-5"}),w.type==="achievement"&&a.jsx(Qt,{className:"w-5 h-5"}),w.type==="milestone"&&a.jsx(_r,{className:"w-5 h-5"}),w.type==="support"&&a.jsx(je,{className:"w-5 h-5"}),w.type==="stable"&&a.jsx(Kt,{className:"w-5 h-5"}),w.type==="general"&&a.jsx(en,{className:"w-5 h-5"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold mb-1",children:w.title}),a.jsx("p",{className:"text-sm opacity-90",children:w.message})]})]})},k)):a.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:a.jsx("p",{className:"text-sm opacity-90",children:"Analyzing your data to generate personalized insights..."})})})]})]})}function ra(){const[t,e]=v.useState(null),[r,n]=v.useState(!0);return v.useEffect(()=>{R.auth.getSession().then(({data:{session:o}})=>{e((o==null?void 0:o.user)??null),n(!1)});const{data:{subscription:i}}=R.auth.onAuthStateChange(async(o,l)=>{e((l==null?void 0:l.user)??null),n(!1)});return()=>i.unsubscribe()},[]),{user:t,loading:r,signOut:async()=>{await R.auth.signOut()}}}const ux=()=>{const[t,e]=v.useState(!1),[r,n]=v.useState([]),[s,i]=v.useState(!1),{user:o}=ra();v.useEffect(()=>{typeof window<"u"&&window.store&&l()},[]);const l=async()=>{if(!window.store||s)return;const f=window.store;f.verbosity=f.DEBUG,un.forEach(y=>{f.register({id:y.id,type:y.type})}),f.when("product").approved(y=>y.verify()),f.when("product").verified(y=>y.finish()),f.when("product").owned(y=>{y.id.includes("premium")&&c(y.id)}),f.when("product").updated(y=>{n(x=>{const b=x.findIndex(N=>N.id===y.id);if(b>=0){const N=[...x];return N[b]=y,N}return[...x,y]})}),f.error(y=>{console.error("IAP Error:",y)}),await f.refresh(),i(!0)},c=async f=>{if(!o)return;const y=f.includes("yearly"),x=new Date;y?x.setFullYear(x.getFullYear()+1):x.setMonth(x.getMonth()+1);const{error:b}=await R.from("subscriptions").update({tier:"premium",status:"active",expires_at:x.toISOString(),platform:"ios",product_id:f}).eq("user_id",o.id);b&&console.error("Error updating subscription:",b)};return{purchaseProduct:async f=>{if(!window.store||!s){console.error("Store not initialized");return}e(!0);try{window.store.get(f)&&window.store.order(f)}catch(y){console.error("Purchase error:",y)}finally{e(!1)}},restorePurchases:async()=>{if(!window.store||!s){console.error("Store not initialized");return}e(!0);try{await window.store.refresh()}catch(f){console.error("Restore error:",f)}finally{e(!1)}},getProduct:f=>window.store?window.store.get(f):null,products:r,loading:t,initialized:s}};function dx(){const{user:t}=Se(),{isPremium:e}=ta(),{purchaseProduct:r,loading:n,initialized:s}=ux(),i=async l=>{if(t){if(!s){alert("In-App Purchase system is not ready. Please try again in a moment.");return}await r(l)}};if(e)return a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl p-8 text-white text-center shadow-xl",children:[a.jsx(Qt,{className:"w-16 h-16 mx-auto mb-4"}),a.jsx("h2",{className:"text-3xl font-bold mb-2",children:"You're a Premium Member!"}),a.jsx("p",{className:"text-lg opacity-90",children:"Thank you for supporting Ditch. Enjoy all premium features!"})]})});const o=[{icon:Ht,title:"AI-Powered Insights",description:"Get personalized recommendations based on your usage patterns"},{icon:Kt,title:"Advanced Analytics",description:"Detailed charts and trend analysis of your progress"},{icon:Jl,title:"Money Saved Tracker",description:"Calculate exactly how much money you've saved by quitting"},{icon:je,title:"Health Benefits Timeline",description:"Track your health improvements day by day"},{icon:yr,title:"Craving Logger",description:"Log and analyze your cravings to identify triggers"},{icon:us,title:"Streak Tracking",description:"Monitor your longest streaks and maintain motivation"},{icon:Pf,title:"Data Export",description:"Export all your data anytime in JSON format"}];return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full mb-4",children:a.jsx(Qt,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-4xl font-bold  mb-3",children:"Upgrade to Premium"}),a.jsx("p",{className:"text-xl ",children:"Unlock powerful features to accelerate your journey to quit vaping"})]}),a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-secondary-600 rounded-2xl shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-white text-center",children:[a.jsx("p",{className:"text-lg mb-2 opacity-90",children:"Premium Plan"}),a.jsxs("div",{className:"flex items-baseline justify-center mb-2",children:[a.jsx("span",{className:"text-6xl font-bold",children:"$2.99"}),a.jsx("span",{className:"text-2xl ml-2",children:"/month"})]}),a.jsx("p",{className:"text-sm opacity-80",children:"or $25/year (save 30%)"})]}),a.jsxs("div",{className:"bg-white p-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:o.map((l,c)=>{const u=l.icon;return a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:a.jsx(u,{className:"w-5 h-5 text-primary-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold  mb-1",children:l.title}),a.jsx("p",{className:"text-sm ",children:l.description})]})]},c)})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("button",{onClick:()=>i(un[1].id),disabled:n||!s,className:"w-full bg-gradient-to-r from-cyan-500 to-teal-500 text-white py-4 rounded-xl text-lg font-bold hover:from-cyan-600 hover:to-teal-600 transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Processing...":"Subscribe Monthly - $2.99/mo"}),a.jsx("button",{onClick:()=>i(un[0].id),disabled:n||!s,className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-4 rounded-xl text-lg font-bold hover:from-primary-600 hover:to-secondary-600 transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Processing...":"Subscribe Yearly - $25/year (Save 30%)"})]}),a.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"Secure payment powered by Apple  Cancel anytime in Settings"})]})]}),a.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(mt,{className:"w-6 h-6 text-green-600"})}),a.jsx("h3",{className:"font-semibold  mb-2",children:"Evidence-Based"}),a.jsx("p",{className:"text-sm ",children:"Built on proven cessation techniques and behavioral science"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(je,{className:"w-6 h-6 text-primary-600"})}),a.jsx("h3",{className:"font-semibold  mb-2",children:"Privacy First"}),a.jsx("p",{className:"text-sm ",children:"Your data is encrypted and never shared with third parties"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(us,{className:"w-6 h-6 text-orange-600"})}),a.jsx("h3",{className:"font-semibold  mb-2",children:"Instant Access"}),a.jsx("p",{className:"text-sm ",children:"All premium features unlock immediately after upgrade"})]})]}),a.jsxs("div",{className:"mt-8 bg-gray-50 rounded-xl p-6",children:[a.jsx("h3",{className:"font-semibold  mb-4 text-center",children:"What Our Premium Users Say"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:`"The AI insights helped me identify my triggers. I'm now 60 days vape-free!"`}),a.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"- Sarah M."})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:`"Seeing how much money I've saved was the motivation I needed to keep going."`}),a.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"- Mike R."})]})]})]})]})]})}const hx=[{hours:2,title:"Nicotine Levels Dropping",message:"Your body is starting to eliminate nicotine from your system.",icon:"Zap"},{hours:8,title:"Oxygen Levels Normalizing",message:"Blood oxygen levels are returning to normal, improving circulation.",icon:"Heart"},{hours:24,title:"Carbon Monoxide Cleared",message:"Carbon monoxide has been eliminated from your body.",icon:"TrendingUp"},{hours:48,title:"Senses Improving",message:"Your sense of taste and smell are starting to improve significantly.",icon:"Star"},{hours:72,title:"Breathing Easier",message:"Bronchial tubes are relaxing, making breathing easier. Energy levels increasing.",icon:"Heart"},{days:7,title:"Week Milestone",message:"One week nicotine-free! Physical addiction is subsiding.",icon:"Trophy"},{days:14,title:"Two Weeks Clean",message:"Circulation is improving. Lung function is increasing up to 30%.",icon:"TrendingUp"},{days:30,title:"One Month Achievement",message:"Coughing and shortness of breath are decreasing. Cilia in lungs are regenerating.",icon:"Award"},{days:90,title:"Three Months Strong",message:"Lung function has improved significantly. Risk of heart attack is dropping.",icon:"Heart"},{days:180,title:"Six Months Milestone",message:"Your body has healed significantly. Cravings are rare and manageable.",icon:"Trophy"},{days:365,title:"One Year Celebration",message:"Risk of heart disease is now half that of a smoker. Incredible achievement!",icon:"Star"}],Iu=["Every day without vaping is a victory for your health.","Your lungs are thanking you right now.","You're stronger than your cravings.","Each smoke-free day adds time to your life.","Your body is healing with every passing hour.","You've already come so far. Keep going!","Breaking free from nicotine is one of the best gifts you can give yourself.","Your future self will thank you for this decision.","Every craving you overcome makes you stronger.","You're not giving up something, you're gaining freedom.","Your health improvements are happening right now, even if you can't see them.","You're proving to yourself that you can do hard things."],Du=[{type:"first_day",title:"First 24 Hours",description:"Completed your first day without vaping",icon:"",days:1},{type:"three_days",title:"Three Day Warrior",description:"Made it through the hardest three days",icon:"",days:3},{type:"one_week",title:"Week Champion",description:"Seven days of freedom",icon:"",days:7},{type:"two_weeks",title:"Fortnight Victor",description:"Two weeks of strength",icon:"",days:14},{type:"one_month",title:"Monthly Master",description:"One full month nicotine-free",icon:"",days:30},{type:"three_months",title:"Quarterly Hero",description:"Three months of dedication",icon:"",days:90},{type:"six_months",title:"Half-Year Legend",description:"Six months of transformation",icon:"",days:180},{type:"one_year",title:"Annual Champion",description:"One full year of freedom",icon:"",days:365}];function fx(){const{user:t,profile:e}=Se(),[r,n]=v.useState([]),[s,i]=v.useState([]),[o,l]=v.useState(null),[c,u]=v.useState(!0),[d,h]=v.useState("notifications");v.useEffect(()=>{t&&(f(),x())},[t]);const f=async()=>{const[m,j,_]=await Promise.all([R.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(50),R.from("achievements").select("*").eq("user_id",t.id).order("unlocked_at",{ascending:!1}),R.from("user_progress").select("*").eq("user_id",t.id).maybeSingle()]);m.data&&n(m.data),j.data&&i(j.data),_.data?l(_.data):await y(),u(!1)},y=async()=>{const{data:m,error:j}=await R.from("user_progress").insert({user_id:t.id,days_smoke_free:0,total_puffs_avoided:0,current_streak:0}).select().single();m&&l(m)},x=async()=>{if(!(e!=null&&e.quit_date))return;const m=new Date(e.quit_date),_=(new Date().getTime()-m.getTime())/(1e3*60*60),C=Math.floor(_/24);for(const S of hx){const T=S.hours||(S.days||0)*24;_>=T&&(r.some(P=>P.title===S.title)||await R.from("notifications").insert({user_id:t.id,type:"health_benefit",title:S.title,message:S.message}))}for(const S of Du)C>=S.days&&(s.some(A=>A.achievement_type===S.type)||(await R.from("achievements").insert({user_id:t.id,achievement_type:S.type,title:S.title,description:S.description,badge_icon:S.icon}),await R.from("notifications").insert({user_id:t.id,type:"achievement",title:` Achievement Unlocked: ${S.title}`,message:S.description})));const w=Iu[Math.floor(Math.random()*Iu.length)];!r.some(S=>S.type==="motivation"&&new Date(S.created_at).toDateString()===new Date().toDateString())&&C>=0&&await R.from("notifications").insert({user_id:t.id,type:"motivation",title:" Daily Motivation",message:w}),f()},b=async m=>{await R.from("notifications").update({is_read:!0}).eq("id",m),n(r.map(j=>j.id===m?{...j,is_read:!0}:j))},N=async()=>{await R.from("notifications").update({is_read:!0}).eq("user_id",t.id).eq("is_read",!1),n(r.map(m=>({...m,is_read:!0})))},g=m=>{switch(m){case"health_benefit":return je;case"achievement":return $u;case"motivation":return us;case"milestone":return qn;default:return Zr}};if(c)return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});const p=r.filter(m=>!m.is_read).length;return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold ",children:"Notifications & Achievements"}),a.jsx("p",{className:"",children:"Track your progress and celebrate victories"})]}),p>0&&a.jsx("button",{onClick:N,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Mark all as read"})]}),(e==null?void 0:e.quit_date)&&o&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx(_r,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:"Days Smoke-Free"}),a.jsx("p",{className:"text-3xl font-bold",children:Math.floor((new Date().getTime()-new Date(e.quit_date).getTime())/(1e3*60*60*24))})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx($i,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:"Current Streak"}),a.jsx("p",{className:"text-3xl font-bold",children:o.current_streak})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl p-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx(qn,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:"Achievements"}),a.jsx("p",{className:"text-3xl font-bold",children:s.length})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex",children:[a.jsx("button",{onClick:()=>h("notifications"),className:`flex-1 px-6 py-4 text-center font-medium transition ${d==="notifications"?"text-primary-600 border-b-2 border-primary-600 bg-primary-50":"text-gray-600 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(Zr,{className:"w-5 h-5"}),a.jsx("span",{children:"Notifications"}),p>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:p})]})}),a.jsx("button",{onClick:()=>h("achievements"),className:`flex-1 px-6 py-4 text-center font-medium transition ${d==="achievements"?"text-primary-600 border-b-2 border-primary-600 bg-primary-50":"text-gray-600 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx($u,{className:"w-5 h-5"}),a.jsx("span",{children:"Achievements"})]})})]})}),a.jsx("div",{className:"p-6",children:d==="notifications"?a.jsx("div",{className:"space-y-4",children:r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Zr,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No notifications yet"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Set your quit date to start receiving health benefit updates"})]}):r.map(m=>{const j=g(m.type);return a.jsx("div",{onClick:()=>!m.is_read&&b(m.id),className:`p-4 rounded-lg border-2 transition cursor-pointer ${m.is_read?"border-gray-200 bg-gray-50":"border-primary-200 bg-primary-50"}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${m.type==="health_benefit"?"bg-green-100":m.type==="achievement"?"bg-yellow-100":m.type==="motivation"?"bg-primary-100":"bg-purple-100"}`,children:a.jsx(j,{className:`w-5 h-5 ${m.type==="health_benefit"?"text-green-600":m.type==="achievement"?"text-yellow-600":m.type==="motivation"?"text-primary-600":"text-purple-600"}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h3",{className:"font-semibold ",children:m.title}),!m.is_read&&a.jsx("span",{className:"w-2 h-2 bg-primary-600 rounded-full"})]}),a.jsx("p",{className:"text-sm text-gray-700",children:m.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(m.created_at).toLocaleString()})]})]})},m.id)})}):a.jsxs("div",{className:"space-y-4",children:[s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(qn,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No achievements unlocked yet"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Keep going smoke-free to unlock amazing achievements"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(m=>a.jsx("div",{className:"p-6 rounded-xl border-2 border-yellow-200 bg-gradient-to-br from-yellow-50 to-orange-50 shadow-md",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"text-5xl",children:m.badge_icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold  mb-1",children:m.title}),a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:m.description}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Unlocked ",new Date(m.unlocked_at).toLocaleDateString()]})]}),a.jsx(Vt,{className:"w-6 h-6 text-green-600"})]})},m.id))}),s.length>0&&a.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-xl",children:[a.jsx("h3",{className:"font-bold  mb-4",children:"Upcoming Achievements"}),a.jsx("div",{className:"space-y-3",children:Du.filter(m=>!s.some(j=>j.achievement_type===m.type)).slice(0,3).map(m=>a.jsxs("div",{className:"flex items-center space-x-3 opacity-60",children:[a.jsx("div",{className:"text-3xl grayscale",children:m.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-700",children:m.title}),a.jsx("p",{className:"text-sm ",children:m.description})]}),a.jsx(Jt,{className:"w-5 h-5 text-gray-400"})]},m.type))})]})]})})]})]})}function mx(){const{user:t}=Se(),[e,r]=v.useState(!1),[n,s]=v.useState(5),[i,o]=v.useState(""),[l,c]=v.useState(""),[u,d]=v.useState(""),[h,f]=v.useState([]),[y,x]=v.useState(!1),[b,N]=v.useState(!1);v.useEffect(()=>{t&&g()},[t]);const g=async()=>{const{data:k,error:S}=await R.from("cravings").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(5);!S&&k&&f(k)},p=async()=>{if(!t)return;x(!0);const{error:k}=await R.from("cravings").insert({user_id:t.id,intensity:n,trigger_type:i||null,trigger_description:l||null,emotional_state:u||null,overcame:!1});k||(await g(),r(!1),j()),x(!1)},m=async k=>{const S=h.find(A=>A.id===k);if(!S)return;const T=Math.floor((Date.now()-new Date(S.created_at).getTime())/6e4);await R.from("cravings").update({overcame:!0,duration_minutes:T}).eq("id",k),await g()},j=()=>{s(5),o(""),c(""),d("")},_=["Stress","Social","Boredom","After meals","Morning routine","Alcohol","Break time","Other"],C=["Anxious","Stressed","Happy","Sad","Angry","Lonely","Excited","Tired"],w=h.find(k=>!k.overcame);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Craving Support"}),!e&&!w&&a.jsx("button",{onClick:()=>r(!0),className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition",children:"Having a Craving?"})]}),w&&a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border-2 border-orange-300 rounded-2xl p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(yr,{className:"w-6 h-6 text-orange-600"}),a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Active Craving"})]}),a.jsxs("p",{className:"text-gray-700",children:["Intensity: ",a.jsxs("span",{className:"font-bold text-orange-600",children:[w.intensity,"/10"]})]}),w.trigger_type&&a.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Trigger: ",w.trigger_type]}),a.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Started ",new Date(w.created_at).toLocaleTimeString()]})]}),a.jsxs("button",{onClick:()=>m(w.id),className:"px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition flex items-center space-x-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:"Overcame It!"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>N(!0),className:"bg-white border-2 border-cyan-500 text-cyan-700 px-4 py-3 rounded-xl font-semibold hover:bg-cyan-50 transition flex items-center justify-center space-x-2",children:[a.jsx(je,{className:"w-5 h-5"}),a.jsx("span",{children:"Breathing Exercise"})]}),a.jsxs("button",{onClick:()=>window.dispatchEvent(new CustomEvent("show-distraction")),className:"bg-white border-2 border-purple-500 text-purple-700 px-4 py-3 rounded-xl font-semibold hover:bg-purple-50 transition flex items-center justify-center space-x-2",children:[a.jsx(Ht,{className:"w-5 h-5"}),a.jsx("span",{children:"Distraction Tips"})]})]})]}),e&&!w&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold",children:"Log Your Craving"}),a.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx(Rf,{className:"w-6 h-6"})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["How intense is your craving? (",n,"/10)"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"range",min:"1",max:"10",value:n,onChange:k=>s(parseInt(k.target.value)),className:"w-full h-3 bg-gradient-to-r from-green-200 via-yellow-200 to-red-300 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #86efac 0%, #fef08a ${n*10}%, #fca5a5 100%)`}}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:"Mild"}),a.jsx("span",{children:"Moderate"}),a.jsx("span",{children:"Severe"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"What triggered this craving?"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:_.map(k=>a.jsx("button",{onClick:()=>o(k),className:`px-3 py-2 rounded-lg text-sm font-medium transition ${i===k?"bg-cyan-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:k},k))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Additional details (optional)"}),a.jsx("textarea",{value:l,onChange:k=>c(k.target.value),placeholder:"What else was happening when you felt the craving?",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent resize-none",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"How are you feeling emotionally?"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:C.map(k=>a.jsx("button",{onClick:()=>d(k),className:`px-3 py-2 rounded-lg text-sm font-medium transition ${u===k?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:k},k))})]}),a.jsx("button",{onClick:p,disabled:y,className:"w-full py-4 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Logging...":"Log Craving & Get Help"})]}),h.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Recent Cravings"}),a.jsx("div",{className:"space-y-3",children:h.map(k=>a.jsx("div",{className:`p-4 rounded-xl border-2 ${k.overcame?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[k.overcame?a.jsx(Vt,{className:"w-5 h-5 text-green-600"}):a.jsx(Gy,{className:"w-5 h-5 text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:["Intensity: ",k.intensity,"/10"]}),k.trigger_type&&a.jsxs("span",{className:"text-sm text-gray-600",children:[" ",k.trigger_type]})]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(k.created_at).toLocaleString(),k.overcame&&k.duration_minutes&&a.jsxs("span",{className:"ml-2 text-green-600 font-semibold",children:["Lasted ",k.duration_minutes," min"]})]})]}),!k.overcame&&a.jsx("button",{onClick:()=>m(k.id),className:"px-3 py-1 bg-green-500 text-white rounded-lg text-sm font-semibold hover:bg-green-600 transition",children:"Mark Overcome"})]})},k.id))}),a.jsxs("div",{className:"mt-4 p-4 bg-cyan-50 rounded-xl",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Kt,{className:"w-5 h-5 text-cyan-600"}),a.jsx("span",{className:"font-semibold text-gray-800",children:"Your Progress"})]}),a.jsxs("p",{className:"text-sm text-gray-700",children:["You've overcome"," ",a.jsx("span",{className:"font-bold text-cyan-600",children:h.filter(k=>k.overcame).length})," ","out of ",h.length," recent cravings (",Math.round(h.filter(k=>k.overcame).length/h.length*100),"%)"]})]})]}),b&&a.jsx(px,{onClose:()=>N(!1)})]})}function px({onClose:t}){const[e,r]=v.useState("inhale"),[n,s]=v.useState(4),[i,o]=v.useState(!1);v.useEffect(()=>{if(!i)return;const u=setInterval(()=>{s(d=>d===1?e==="inhale"?(r("hold"),7):e==="hold"?(r("exhale"),8):(r("inhale"),4):d-1)},1e3);return()=>clearInterval(u)},[i,e]);const l=()=>{switch(e){case"inhale":return"from-cyan-400 to-blue-500";case"hold":return"from-purple-400 to-pink-500";case"exhale":return"from-green-400 to-teal-500"}},c=()=>{switch(e){case"inhale":return"Breathe In";case"hold":return"Hold";case"exhale":return"Breathe Out"}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold",children:"4-7-8 Breathing"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(Rf,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"text-center space-y-6",children:[a.jsxs("div",{className:"relative mx-auto w-64 h-64",children:[a.jsx("div",{className:`absolute inset-0 rounded-full bg-gradient-to-br ${l()} transition-all duration-1000 ${i?"scale-100 opacity-100":"scale-75 opacity-50"}`,style:{transform:e==="inhale"?"scale(1.2)":e==="exhale"?"scale(0.8)":"scale(1)",transition:`transform ${e==="inhale"?"4s":e==="hold"?"7s":"8s"} ease-in-out`}}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[a.jsx("p",{className:"text-white text-5xl font-bold mb-2",children:n}),a.jsx("p",{className:"text-white text-xl font-semibold",children:c()})]})]}),i?a.jsx("button",{onClick:()=>{o(!1),r("inhale"),s(4)},className:"px-8 py-4 bg-gray-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition",children:"Stop"}):a.jsx("button",{onClick:()=>o(!0),className:"px-8 py-4 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition",children:"Start Exercise"}),a.jsx("div",{className:"text-left bg-cyan-50 rounded-xl p-4",children:a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:"The 4-7-8 technique calms your nervous system and reduces cravings. Breathe in for 4 seconds, hold for 7, and exhale for 8. Repeat 3-4 times."})})]})]})})}function gx(){const{user:t,profile:e}=Se(),[r,n]=v.useState([]),[s,i]=v.useState(!0),[o,l]=v.useState(!1),[c,u]=v.useState(""),[d,h]=v.useState("story"),[f,y]=v.useState(!1),[x,b]=v.useState(!1);v.useEffect(()=>{t&&N()},[t]);const N=async()=>{const{data:_,error:C}=await R.from("community_posts").select(`
        *,
        profiles:user_id (full_name),
        user_reaction:post_reactions!inner(reaction_type)
      `).order("created_at",{ascending:!1}).limit(20);!C&&_&&n(_),i(!1)},g=async()=>{if(!t||!c.trim())return;b(!0);let _=null;if(d==="milestone"){const w=new Date,k=e!=null&&e.quit_date?new Date(e.quit_date):w,S=Math.floor((w.getTime()-k.getTime())/(1e3*60*60*24));_={days_clean:S,puffs_avoided:e!=null&&e.current_daily_puffs?e.current_daily_puffs*S:0}}const{error:C}=await R.from("community_posts").insert({user_id:t.id,content:c,post_type:d,is_anonymous:f,milestone_data:_});C||(await N(),l(!1),u(""),h("story"),y(!1)),b(!1)},p=async(_,C)=>{if(!t)return;const w=r.find(S=>S.id===_);(w==null?void 0:w.user_reaction)&&w.user_reaction.length>0?(await R.from("post_reactions").delete().eq("post_id",_).eq("user_id",t.id),await R.from("community_posts").update({reaction_count:((w==null?void 0:w.reaction_count)||1)-1}).eq("id",_)):(await R.from("post_reactions").insert({post_id:_,user_id:t.id,reaction_type:C}),await R.from("community_posts").update({reaction_count:((w==null?void 0:w.reaction_count)||0)+1}).eq("id",_)),await N()},m=_=>{switch(_){case"milestone":return a.jsx(qn,{className:"w-5 h-5 text-yellow-500"});case"story":return a.jsx(Ko,{className:"w-5 h-5 text-blue-500"});case"encouragement":return a.jsx(je,{className:"w-5 h-5 text-pink-500"});case"tip":return a.jsx(Au,{className:"w-5 h-5 text-purple-500"});default:return a.jsx(Ko,{className:"w-5 h-5 text-gray-500"})}},j=_=>{switch(_){case"milestone":return"Milestone";case"story":return"Story";case"encouragement":return"Encouragement";case"tip":return"Tip";default:return"Post"}};return s?a.jsx("div",{className:"flex items-center justify-center h-full p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500"})}):a.jsxs("div",{className:"p-6 space-y-6 max-w-3xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center space-x-2",children:[a.jsx(It,{className:"w-7 h-7 text-cyan-600"}),a.jsx("span",{children:"Community"})]}),a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Share your journey and support others"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition flex items-center space-x-2",children:[a.jsx(Of,{className:"w-5 h-5"}),a.jsx("span",{children:"Share"})]})]}),o&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-4 border-2 border-cyan-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Create Post"}),a.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx(Af,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex space-x-2",children:["milestone","story","encouragement","tip"].map(_=>a.jsx("button",{onClick:()=>h(_),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition ${d===_?"bg-cyan-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:j(_)},_))}),a.jsx("textarea",{value:c,onChange:_=>u(_.target.value),placeholder:`Share your ${j(d).toLowerCase()}...`,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent resize-none",rows:4}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:f,onChange:_=>y(_.target.checked),className:"w-4 h-4 text-cyan-500 rounded focus:ring-cyan-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Post anonymously"})]}),a.jsx("button",{onClick:g,disabled:x||!c.trim(),className:"px-6 py-2 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-lg font-semibold shadow hover:shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Posting...":"Post"})]})]}),a.jsx("div",{className:"space-y-4",children:r.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow-lg",children:[a.jsx(It,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"No posts yet"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Be the first to share your journey!"})]}):r.map(_=>{var C,w,k;return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-400 to-teal-400 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:_.is_anonymous?"?":((w=(C=_.profiles)==null?void 0:C.full_name)==null?void 0:w[0])||"U"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:_.is_anonymous?"Anonymous":((k=_.profiles)==null?void 0:k.full_name)||"User"}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(_.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[m(_.post_type),a.jsx("span",{className:"text-sm font-medium text-gray-600",children:j(_.post_type)})]})]}),_.milestone_data&&a.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:_.milestone_data.days_clean}),a.jsx("p",{className:"text-xs text-gray-600",children:"Days Clean"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl font-bold text-orange-600",children:_.milestone_data.puffs_avoided}),a.jsx("p",{className:"text-xs text-gray-600",children:"Puffs Avoided"})]})]})}),a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:_.content}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:()=>p(_.id,"support"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition ${_.user_reaction&&_.user_reaction.length>0?"bg-pink-100 text-pink-600":"bg-gray-100 text-gray-600 hover:bg-pink-50"}`,children:[a.jsx(je,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:_.reaction_count})]}),a.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[a.jsx($i,{className:"w-4 h-4 text-orange-500"}),a.jsx(us,{className:"w-4 h-4 text-yellow-500"}),a.jsx(Au,{className:"w-4 h-4 text-purple-500"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[a.jsx(Kt,{className:"w-4 h-4"}),a.jsx("span",{children:"Inspiring"})]})]})]},_.id)})})]})}const Mu=[{days:1,title:"Oxygen Levels Normalizing",description:"Your blood oxygen levels begin to return to normal, improving energy.",icon:Yy,color:"blue",category:"respiratory"},{days:2,title:"Nicotine Elimination",description:"Nicotine is nearly eliminated from your body. Cravings may peak.",icon:cs,color:"purple",category:"mental"},{days:3,title:"Breathing Easier",description:"Lung function begins to improve. Breathing feels easier.",icon:ri,color:"cyan",category:"respiratory"},{days:5,title:"Taste & Smell Returning",description:"Your sense of taste and smell start to recover and enhance.",icon:Ru,color:"pink",category:"sensory"},{days:7,title:"Circulation Boost",description:"Blood circulation to hands and feet improves significantly.",icon:je,color:"red",category:"cardiovascular"},{days:14,title:"Mental Clarity",description:"Brain fog lifts. Concentration and mental focus improve.",icon:Ht,color:"indigo",category:"mental"},{days:21,title:"Skin Improvement",description:"Skin tone and texture improve due to better circulation.",icon:Ru,color:"orange",category:"sensory"},{days:30,title:"Lung Capacity Increase",description:"Lung capacity increases by up to 30%. Exercise feels easier.",icon:ri,color:"green",category:"respiratory"},{days:90,title:"Complete Lung Recovery",description:"Lung function is significantly improved. Coughing reduced.",icon:ri,color:"teal",category:"respiratory"},{days:180,title:"Heart Health Restored",description:"Risk of heart disease drops dramatically.",icon:je,color:"rose",category:"cardiovascular"},{days:365,title:"One Year Milestone",description:"Major health improvements. Long-term health risks significantly reduced.",icon:Vt,color:"emerald",category:"cardiovascular"}];function yx(){const{profile:t}=Se(),[e,r]=v.useState(0),[n,s]=v.useState("all");v.useEffect(()=>{if(t!=null&&t.quit_date){const d=new Date,h=new Date(t.quit_date),f=Math.floor((d.getTime()-h.getTime())/(1e3*60*60*24));r(Math.max(0,f))}},[t]);const i=(d,h)=>{if(!h)return{bg:"bg-gray-100",border:"border-gray-300",icon:"bg-gray-300 text-gray-500",text:"text-gray-500"};const f={blue:{bg:"bg-blue-50",border:"border-blue-300",icon:"bg-blue-500 text-white",text:"text-blue-700"},purple:{bg:"bg-purple-50",border:"border-purple-300",icon:"bg-purple-500 text-white",text:"text-purple-700"},cyan:{bg:"bg-cyan-50",border:"border-cyan-300",icon:"bg-cyan-500 text-white",text:"text-cyan-700"},pink:{bg:"bg-pink-50",border:"border-pink-300",icon:"bg-pink-500 text-white",text:"text-pink-700"},red:{bg:"bg-red-50",border:"border-red-300",icon:"bg-red-500 text-white",text:"text-red-700"},indigo:{bg:"bg-indigo-50",border:"border-indigo-300",icon:"bg-indigo-500 text-white",text:"text-indigo-700"},orange:{bg:"bg-orange-50",border:"border-orange-300",icon:"bg-orange-500 text-white",text:"text-orange-700"},green:{bg:"bg-green-50",border:"border-green-300",icon:"bg-green-500 text-white",text:"text-green-700"},teal:{bg:"bg-teal-50",border:"border-teal-300",icon:"bg-teal-500 text-white",text:"text-teal-700"},rose:{bg:"bg-rose-50",border:"border-rose-300",icon:"bg-rose-500 text-white",text:"text-rose-700"},emerald:{bg:"bg-emerald-50",border:"border-emerald-300",icon:"bg-emerald-500 text-white",text:"text-emerald-700"}};return f[d]||f.blue},o=[{id:"all",label:"All",icon:cs},{id:"respiratory",label:"Breathing",icon:ri},{id:"cardiovascular",label:"Heart",icon:je},{id:"sensory",label:"Senses",icon:Qy},{id:"mental",label:"Mental",icon:Ht}],l=n==="all"?Mu:Mu.filter(d=>d.category===n),c=l.filter(d=>e>=d.days).length,u=l.find(d=>e<d.days);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Health Recovery Timeline"}),a.jsx("p",{className:"text-gray-600",children:"Track your body's healing journey"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-teal-500 rounded-2xl shadow-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-cyan-100 text-sm mb-1",children:"Days Clean"}),a.jsx("p",{className:"text-5xl font-bold",children:e})]}),a.jsx("div",{className:"w-24 h-24 bg-white bg-opacity-20 rounded-full flex items-center justify-center backdrop-blur",children:a.jsx(cs,{className:"w-12 h-12"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:"Milestones Achieved"}),a.jsxs("p",{className:"text-2xl font-bold",children:[c," / ",l.length]})]}),a.jsx("div",{className:"w-full max-w-xs bg-white bg-opacity-20 rounded-full h-3 ml-4",children:a.jsx("div",{className:"bg-white h-3 rounded-full transition-all duration-500",style:{width:`${c/l.length*100}%`}})})]})]}),u&&a.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-yellow-50 border-2 border-orange-300 rounded-2xl p-6",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center flex-shrink-0",children:a.jsx(u.icon,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-orange-700",children:"Next Milestone"}),a.jsxs("span",{className:"text-xs bg-orange-200 text-orange-800 px-2 py-1 rounded-full font-semibold",children:[u.days-e," days to go"]})]}),a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:u.title}),a.jsx("p",{className:"text-sm text-gray-700",children:u.description})]})]})}),a.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:o.map(d=>a.jsxs("button",{onClick:()=>s(d.id),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium whitespace-nowrap transition ${n===d.id?"bg-cyan-500 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 shadow"}`,children:[a.jsx(d.icon,{className:"w-4 h-4"}),a.jsx("span",{children:d.label})]},d.id))}),a.jsx("div",{className:"space-y-4",children:l.map((d,h)=>{const f=e>=d.days,y=i(d.color,f),x=d.icon;return a.jsxs("div",{className:`relative pl-12 pb-8 ${h===l.length-1?"pb-0":""}`,children:[h<l.length-1&&a.jsx("div",{className:`absolute left-6 top-12 bottom-0 w-0.5 ${f?"bg-gradient-to-b from-cyan-500 to-teal-500":"bg-gray-300"}`}),a.jsx("div",{className:"absolute left-0 top-0",children:a.jsx("div",{className:`w-12 h-12 rounded-full ${y.icon} flex items-center justify-center shadow-lg relative`,children:f?a.jsx(x,{className:"w-6 h-6"}):a.jsx(Jy,{className:"w-6 h-6"})})}),a.jsxs("div",{className:`${y.bg} border-2 ${y.border} rounded-xl p-5 transition-all duration-300 ${f?"shadow-lg":"opacity-60"}`,children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800",children:d.title}),f&&a.jsx(Vt,{className:"w-5 h-5 text-green-500"})]}),a.jsx("p",{className:"text-sm text-gray-700",children:d.description})]})}),a.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200",children:[a.jsxs("span",{className:"text-xs font-semibold text-gray-600",children:["Day ",d.days]}),f?a.jsxs("span",{className:"text-xs font-semibold text-green-600 flex items-center space-x-1",children:[a.jsx(Vt,{className:"w-3 h-3"}),a.jsx("span",{children:"Achieved"})]}):a.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:[d.days-e," days remaining"]})]})]})]},h)})}),e>=365&&a.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-500 rounded-2xl shadow-2xl p-8 text-center text-white",children:[a.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur",children:a.jsx(Vt,{className:"w-12 h-12"})}),a.jsx("h3",{className:"text-3xl font-bold mb-2",children:"Congratulations!"}),a.jsx("p",{className:"text-xl opacity-90 mb-4",children:"One Year Smoke-Free"}),a.jsx("p",{className:"text-emerald-100 leading-relaxed max-w-md mx-auto",children:"You've achieved incredible health improvements. Your body has healed significantly, and your long-term health risks have been dramatically reduced. Keep going strong!"})]})]})}function xx(){var T,A;const{user:t,profile:e}=Se(),[r,n]=v.useState([]),[s,i]=v.useState([]),[o,l]=v.useState(null),[c,u]=v.useState([]),[d,h]=v.useState(""),[f,y]=v.useState(""),[x,b]=v.useState(null),[N,g]=v.useState(!0);v.useEffect(()=>{t&&(p(),m())},[t]),v.useEffect(()=>{o&&w(o.id)},[o]);const p=async()=>{const{data:P,error:L}=await R.from("buddy_connections").select(`
        *,
        buddy_profile:buddy_id (full_name, longest_streak)
      `).eq("status","accepted").or(`user_id.eq.${t.id},buddy_id.eq.${t.id}`).order("last_interaction_at",{ascending:!1});!L&&P&&n(P),g(!1)},m=async()=>{const{data:P,error:L}=await R.from("buddy_connections").select(`
        *,
        buddy_profile:user_id (full_name, longest_streak)
      `).eq("status","pending").eq("buddy_id",t.id);!L&&P&&i(P)},j=async()=>{if(!f.trim())return;const{data:P,error:L}=await R.from("profiles").select("id, email, full_name, longest_streak").eq("email",f.trim()).maybeSingle();if(P&&P.id!==t.id){const{data:G}=await R.from("buddy_connections").select("*").or(`user_id.eq.${t.id},buddy_id.eq.${t.id}`).or(`user_id.eq.${P.id},buddy_id.eq.${P.id}`).maybeSingle();b(G?{...P,alreadyConnected:!0}:P)}else b(null)},_=async P=>{const{error:L}=await R.from("buddy_connections").insert({user_id:t.id,buddy_id:P,initiated_by:t.id,status:"pending"});L||(y(""),b(null))},C=async(P,L)=>{const{error:G}=await R.from("buddy_connections").update({status:L?"accepted":"declined"}).eq("id",P);G||(await p(),await m())},w=async P=>{const{data:L,error:G}=await R.from("buddy_messages").select("*").eq("connection_id",P).order("created_at",{ascending:!0});!G&&L&&(u(L),await R.from("buddy_messages").update({is_read:!0}).eq("connection_id",P).neq("sender_id",t.id))},k=async()=>{if(!o||!d.trim())return;const{error:P}=await R.from("buddy_messages").insert({connection_id:o.id,sender_id:t.id,message:d});P||(await R.from("buddy_connections").update({last_interaction_at:new Date().toISOString()}).eq("id",o.id),h(""),w(o.id))},S=["Keep going! You've got this! ","Proud of your progress! ","Stay strong today! ","Thinking of you! You're doing amazing! ","Let's crush our goals together! "];return N?a.jsx("div",{className:"flex items-center justify-center h-full p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500"})}):o?(o.user_id===t.id?o.buddy_id:o.user_id,a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"bg-white border-b p-4 flex items-center justify-between",children:[a.jsx("button",{onClick:()=>l(null),className:"text-cyan-600 hover:text-cyan-700 font-semibold",children:" Back"}),a.jsxs("div",{className:"text-center flex-1",children:[a.jsx("p",{className:"font-bold text-gray-800",children:((T=o.buddy_profile)==null?void 0:T.full_name)||"Buddy"}),((A=o.buddy_profile)==null?void 0:A.longest_streak)&&a.jsxs("p",{className:"text-xs text-gray-500 flex items-center justify-center space-x-1",children:[a.jsx($i,{className:"w-3 h-3 text-orange-500"}),a.jsxs("span",{children:[o.buddy_profile.longest_streak," day streak"]})]})]}),a.jsx("div",{className:"w-20"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:c.map(P=>{const L=P.sender_id===t.id;return a.jsx("div",{className:`flex ${L?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs px-4 py-3 rounded-2xl ${L?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white":"bg-white text-gray-800 shadow"}`,children:[a.jsx("p",{className:"leading-relaxed",children:P.message}),a.jsx("p",{className:`text-xs mt-1 ${L?"text-cyan-100":"text-gray-500"}`,children:new Date(P.created_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})},P.id)})}),a.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[a.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:S.map((P,L)=>a.jsx("button",{onClick:()=>{h(P)},className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm whitespace-nowrap hover:bg-gray-200 transition",children:P},L))}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:d,onChange:P=>h(P.target.value),onKeyPress:P=>P.key==="Enter"&&k(),placeholder:"Send encouragement...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-cyan-500 focus:border-transparent"}),a.jsx("button",{onClick:k,disabled:!d.trim(),className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-xl font-semibold shadow hover:shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:a.jsx(Zy,{className:"w-5 h-5"})})]})]})]})):a.jsxs("div",{className:"p-6 space-y-6 max-w-3xl mx-auto",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center space-x-2 mb-2",children:[a.jsx(It,{className:"w-7 h-7 text-cyan-600"}),a.jsx("span",{children:"Accountability Buddies"})]}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Connect with others on the same journey for mutual support"})]}),s.length>0&&a.jsxs("div",{className:"bg-orange-50 border-2 border-orange-300 rounded-2xl p-6",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[a.jsx(Lu,{className:"w-5 h-5 text-orange-600"}),a.jsx("span",{children:"Pending Requests"})]}),a.jsx("div",{className:"space-y-3",children:s.map(P=>{var L;return a.jsxs("div",{className:"bg-white rounded-xl p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:((L=P.buddy_profile)==null?void 0:L.full_name)||"User"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Wants to be your buddy"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>C(P.id,!0),className:"px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition flex items-center space-x-1",children:[a.jsx(mt,{className:"w-4 h-4"}),a.jsx("span",{children:"Accept"})]}),a.jsxs("button",{onClick:()=>C(P.id,!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition flex items-center space-x-1",children:[a.jsx(Af,{className:"w-4 h-4"}),a.jsx("span",{children:"Decline"})]})]})]},P.id)})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-4",children:[a.jsx("h3",{className:"font-bold text-gray-800",children:"Find a Buddy"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"email",value:f,onChange:P=>y(P.target.value),onKeyPress:P=>P.key==="Enter"&&j(),placeholder:"Enter email address",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent"}),a.jsx("button",{onClick:j,className:"px-6 py-3 bg-cyan-500 text-white rounded-lg font-semibold hover:bg-cyan-600 transition",children:"Search"})]}),x&&a.jsx("div",{className:"bg-cyan-50 border border-cyan-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:x.full_name||"User"}),a.jsx("p",{className:"text-sm text-gray-600",children:x.email}),x.longest_streak&&a.jsxs("p",{className:"text-xs text-gray-500 flex items-center space-x-1 mt-1",children:[a.jsx(qn,{className:"w-3 h-3 text-yellow-500"}),a.jsxs("span",{children:[x.longest_streak," day streak"]})]})]}),x.alreadyConnected?a.jsx("span",{className:"text-sm text-gray-500",children:"Already connected"}):a.jsxs("button",{onClick:()=>_(x.id),className:"px-4 py-2 bg-cyan-500 text-white rounded-lg font-semibold hover:bg-cyan-600 transition flex items-center space-x-2",children:[a.jsx(Lu,{className:"w-4 h-4"}),a.jsx("span",{children:"Send Request"})]})]})})]}),r.length>0?a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Your Buddies"}),a.jsx("div",{className:"space-y-3",children:r.map(P=>{var L,G,ve,Q;return a.jsxs("button",{onClick:()=>l(P),className:"w-full bg-gradient-to-r from-cyan-50 to-teal-50 hover:from-cyan-100 hover:to-teal-100 border border-cyan-200 rounded-xl p-4 flex items-center justify-between transition",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-400 to-teal-400 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:((G=(L=P.buddy_profile)==null?void 0:L.full_name)==null?void 0:G[0])||"B"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold text-gray-800",children:((ve=P.buddy_profile)==null?void 0:ve.full_name)||"Buddy"}),((Q=P.buddy_profile)==null?void 0:Q.longest_streak)&&a.jsxs("p",{className:"text-xs text-gray-600 flex items-center space-x-1",children:[a.jsx($i,{className:"w-3 h-3 text-orange-500"}),a.jsxs("span",{children:[P.buddy_profile.longest_streak," day streak"]})]})]})]}),a.jsx(Ko,{className:"w-5 h-5 text-cyan-600"})]},P.id)})})]}):a.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow-lg",children:[a.jsx(It,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"No buddies yet"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Search for someone to start your support network"})]})]})}const vx=()=>{const[t,e]=v.useState(!1),{user:r}=ra();return{createCheckoutSession:async({id:i,mode:o})=>{if(!r)throw new Error("User must be authenticated");e(!0);try{const l=await fetch("https://0ec90b57d6e95fcbda19832f.supabase.co/functions/v1/create-checkout",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJib2x0IiwicmVmIjoiMGVjOTBiNTdkNmU5NWZjYmRhMTk4MzJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4ODE1NzQsImV4cCI6MTc1ODg4MTU3NH0.9I8-U0x86Ak8t2DGaIk0HfvTSLsAyzdnz-Nw00mMkKw","Content-Type":"application/json"},body:JSON.stringify({id:i,mode:o,userId:r.id,successUrl:`${window.location.origin}/checkout/success`,cancelUrl:`${window.location.origin}/pricing`})});if(!l.ok)throw new Error("Failed to create checkout session");const{url:c}=await l.json();window.location.href=c}catch(l){throw console.error("Checkout error:",l),l}finally{e(!1)}},getUserSubscription:async()=>{if(!r)return null;const{data:i,error:o}=await R.from("stripe_user_subscriptions").select("*").single();return o&&o.code!=="PGRST116"?(console.error("Error fetching subscription:",o),null):i},loading:t}},wx=({product:t,isPopular:e=!1})=>{const{createCheckoutSession:r,loading:n}=vx(),{user:s}=ra(),i=async()=>{s&&alert("IAP integration in progress. This will work once the app is built and running on iOS with Apple In-App Purchase configured.")},o=["Advanced progress tracking","Personalized insights","Premium support","Export data","Custom goals"];return a.jsxs("div",{className:`relative bg-white rounded-2xl shadow-lg p-8 ${e?"ring-2 ring-cyan-500 scale-105":""}`,children:[e&&a.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:a.jsx("span",{className:"bg-gradient-to-r from-cyan-500 to-teal-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),a.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),a.jsxs("div",{className:"mb-6",children:[a.jsx("span",{className:"text-4xl font-bold text-gray-900",children:tx(t.price,t.currency)}),a.jsx("span",{className:"text-gray-600 ml-2",children:t.id.includes("monthly")?"/month":"/year"})]})]}),a.jsx("ul",{className:"space-y-4 mb-8",children:o.map((l,c)=>a.jsxs("li",{className:"flex items-center",children:[a.jsx(mt,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:l})]},c))}),a.jsx("button",{onClick:i,disabled:n||!s,className:`w-full py-3 px-6 rounded-lg font-medium transition-colors ${e?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white hover:from-cyan-600 hover:to-teal-600":"bg-gray-900 text-white hover:bg-gray-800"} disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center`,children:n?a.jsxs(a.Fragment,{children:[a.jsx(Tf,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):`Get ${t.name}`}),!s&&a.jsx("p",{className:"text-sm text-gray-500 text-center mt-3",children:"Please sign in to subscribe"})]})},bx=()=>a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-teal-50 py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Unlock premium features to accelerate your journey to quit vaping"})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:un.map((t,e)=>a.jsx(wx,{product:t,isPopular:e===0},t.id))}),a.jsx("div",{className:"text-center mt-12",children:a.jsx("p",{className:"text-gray-600",children:"All plans include a 7-day free trial. Cancel anytime."})})]})});/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Yo({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Xl(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Lf(t,e,r="/"){return jx(t,e,r,!1)}function jx(t,e,r,n){let s=typeof e=="string"?Xl(e):e,i=Xt(s.pathname||"/",r);if(i==null)return null;let o=If(t);_x(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Ax(i);l=$x(o[c],u,n)}return l}function If(t,e=[],r=[],n="",s=!1){let i=(o,l,c=s,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;fe(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let h=xt([n,d.relativePath]),f=r.concat(d);o.children&&o.children.length>0&&(fe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),If(o.children,e,f,h,c)),!(o.path==null&&!o.index)&&e.push({path:h,score:Tx(h,o.index),routesMeta:f})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let u of Df(o.path))i(o,l,!0,u)}),e}function Df(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Df(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function _x(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Ox(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var kx=/^:[\w-]+$/,Nx=3,Sx=2,Cx=1,Ex=10,Px=-2,Uu=t=>t==="*";function Tx(t,e){let r=t.split("/"),n=r.length;return r.some(Uu)&&(n+=Px),e&&(n+=Sx),r.filter(s=>!Uu(s)).reduce((s,i)=>s+(kx.test(i)?Nx:i===""?Cx:Ex),n)}function Ox(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function $x(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Ri({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Ri({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:xt([i,h.pathname]),pathnameBase:Mx(xt([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=xt([i,h.pathnameBase]))}return o}function Ri(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Rx(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:h},f)=>{if(d==="*"){let x=l[f]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const y=l[f];return h&&!y?u[d]=void 0:u[d]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Rx(t,e=!1,r=!0){lt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Ax(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Xt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Lx(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Xl(t):t;return{pathname:r?r.startsWith("/")?r:Ix(r,e):e,search:Ux(n),hash:zx(s)}}function Ix(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Fa(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Dx(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Mf(t){let e=Dx(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function Uf(t,e,r,n=!1){let s;typeof t=="string"?s=Xl(t):(s={...t},fe(!s.pathname||!s.pathname.includes("?"),Fa("?","pathname","search",s)),fe(!s.pathname||!s.pathname.includes("#"),Fa("#","pathname","hash",s)),fe(!s.search||!s.search.includes("#"),Fa("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=Lx(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var xt=t=>t.join("/").replace(/\/\/+/g,"/"),Mx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ux=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Fx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var zf=["POST","PUT","PATCH","DELETE"];new Set(zf);var Bx=["GET",...zf];new Set(Bx);var gn=v.createContext(null);gn.displayName="DataRouter";var na=v.createContext(null);na.displayName="DataRouterState";v.createContext(!1);var Ff=v.createContext({isTransitioning:!1});Ff.displayName="ViewTransition";var Wx=v.createContext(new Map);Wx.displayName="Fetchers";var qx=v.createContext(null);qx.displayName="Await";var kt=v.createContext(null);kt.displayName="Navigation";var Zl=v.createContext(null);Zl.displayName="Location";var Nt=v.createContext({outlet:null,matches:[],isDataRoute:!1});Nt.displayName="Route";var ec=v.createContext(null);ec.displayName="RouteError";function Hx(t,{relative:e}={}){fe(sa(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(kt),{hash:s,pathname:i,search:o}=vs(t,{relative:e}),l=i;return r!=="/"&&(l=i==="/"?r:xt([r,i])),n.createHref({pathname:l,search:o,hash:s})}function sa(){return v.useContext(Zl)!=null}function nr(){return fe(sa(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Zl).location}var Bf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Wf(t){v.useContext(kt).static||v.useLayoutEffect(t)}function tc(){let{isDataRoute:t}=v.useContext(Nt);return t?sv():Vx()}function Vx(){fe(sa(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(gn),{basename:e,navigator:r}=v.useContext(kt),{matches:n}=v.useContext(Nt),{pathname:s}=nr(),i=JSON.stringify(Mf(n)),o=v.useRef(!1);return Wf(()=>{o.current=!0}),v.useCallback((c,u={})=>{if(lt(o.current,Bf),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=Uf(c,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:xt([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,i,s,t])}v.createContext(null);function vs(t,{relative:e}={}){let{matches:r}=v.useContext(Nt),{pathname:n}=nr(),s=JSON.stringify(Mf(r));return v.useMemo(()=>Uf(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function Kx(t,e,r,n,s){fe(sa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(kt),{matches:o}=v.useContext(Nt),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let p=h&&h.path||"";qf(u,!h||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let f=nr(),y;y=f;let x=y.pathname||"/",b=x;if(d!=="/"){let p=d.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(p.length).join("/")}let N=Lf(t,{pathname:b});return lt(h||N!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),lt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Xx(N&&N.map(p=>Object.assign({},p,{params:Object.assign({},c,p.params),pathname:xt([d,i.encodeLocation?i.encodeLocation(p.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?d:xt([d,i.encodeLocation?i.encodeLocation(p.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:p.pathnameBase])})),o,r,n,s)}function Gx(){let t=nv(),e=Fx(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:s},r):null,o)}var Yx=v.createElement(Gx,null),Qx=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?v.createElement(Nt.Provider,{value:this.props.routeContext},v.createElement(ec.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Jx({routeContext:t,match:e,children:r}){let n=v.useContext(gn);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Nt.Provider,{value:t},r)}function Xx(t,e=[],r=null,n=null,s=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=r==null?void 0:r.errors;if(o!=null){let u=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);fe(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(r)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=r,y=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let f,y=!1,x=null,b=null;r&&(f=o&&d.route.id?o[d.route.id]:void 0,x=d.route.errorElement||Yx,l&&(c<0&&h===0?(qf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):c===h&&(y=!0,b=d.route.hydrateFallbackElement||null)));let N=e.concat(i.slice(0,h+1)),g=()=>{let p;return f?p=x:y?p=b:d.route.Component?p=v.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=u,v.createElement(Jx,{match:d,routeContext:{outlet:u,matches:N,isDataRoute:r!=null},children:p})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?v.createElement(Qx,{location:r.location,revalidation:r.revalidation,component:x,error:f,children:g(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:n}):g()},null)}function rc(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zx(t){let e=v.useContext(gn);return fe(e,rc(t)),e}function ev(t){let e=v.useContext(na);return fe(e,rc(t)),e}function tv(t){let e=v.useContext(Nt);return fe(e,rc(t)),e}function nc(t){let e=tv(t),r=e.matches[e.matches.length-1];return fe(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function rv(){return nc("useRouteId")}function nv(){var n;let t=v.useContext(ec),e=ev("useRouteError"),r=nc("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function sv(){let{router:t}=Zx("useNavigate"),e=nc("useNavigate"),r=v.useRef(!1);return Wf(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{lt(r.current,Bf),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var zu={};function qf(t,e,r){!e&&!zu[t]&&(zu[t]=!0,lt(!1,r))}v.memo(iv);function iv({routes:t,future:e,state:r,unstable_onError:n}){return Kx(t,void 0,r,n,e)}var ni="get",si="application/x-www-form-urlencoded";function ia(t){return t!=null&&typeof t.tagName=="string"}function av(t){return ia(t)&&t.tagName.toLowerCase()==="button"}function ov(t){return ia(t)&&t.tagName.toLowerCase()==="form"}function lv(t){return ia(t)&&t.tagName.toLowerCase()==="input"}function cv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uv(t,e){return t.button===0&&(!e||e==="_self")&&!cv(t)}function Qo(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function dv(t,e){let r=Qo(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}var Ws=null;function hv(){if(Ws===null)try{new FormData(document.createElement("form"),0),Ws=!1}catch{Ws=!0}return Ws}var fv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ba(t){return t!=null&&!fv.has(t)?(lt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${si}"`),null):t}function mv(t,e){let r,n,s,i,o;if(ov(t)){let l=t.getAttribute("action");n=l?Xt(l,e):null,r=t.getAttribute("method")||ni,s=Ba(t.getAttribute("enctype"))||si,i=new FormData(t)}else if(av(t)||lv(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?Xt(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||ni,s=Ba(t.getAttribute("formenctype"))||Ba(l.getAttribute("enctype"))||si,i=new FormData(l,t),!hv()){let{name:u,type:d,value:h}=t;if(d==="image"){let f=u?`${u}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else u&&i.append(u,h)}}else{if(ia(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ni,n=null,s=si,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pv(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Xt(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function gv(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yv(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xv(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await gv(i,r);return o.links?o.links():[]}return[]}));return jv(n.flat(1).filter(yv).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Fu(t,e,r,n,s,i){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?e.filter((c,u)=>{var h;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function vv(t,e,{includeHydrateFallback:r}={}){return wv(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function wv(t){return[...new Set(t)]}function bv(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function jv(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(bv(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function Hf(){let t=v.useContext(gn);return sc(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _v(){let t=v.useContext(na);return sc(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ic=v.createContext(void 0);ic.displayName="FrameworkContext";function Vf(){let t=v.useContext(ic);return sc(t,"You must render this element inside a <HydratedRouter> element"),t}function kv(t,e){let r=v.useContext(ic),[n,s]=v.useState(!1),[i,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,f=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let b=g=>{g.forEach(p=>{o(p.isIntersecting)})},N=new IntersectionObserver(b,{threshold:.5});return f.current&&N.observe(f.current),()=>{N.disconnect()}}},[t]),v.useEffect(()=>{if(n){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[n]);let y=()=>{s(!0)},x=()=>{s(!1),o(!1)};return r?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Sn(l,y),onBlur:Sn(c,x),onMouseEnter:Sn(u,y),onMouseLeave:Sn(d,x),onTouchStart:Sn(h,y)}]:[!1,f,{}]}function Sn(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function Nv({page:t,...e}){let{router:r}=Hf(),n=v.useMemo(()=>Lf(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(Cv,{page:t,matches:n,...e}):null}function Sv(t){let{manifest:e,routeModules:r}=Vf(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return xv(t,e,r).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,r]),n}function Cv({page:t,matches:e,...r}){let n=nr(),{manifest:s,routeModules:i}=Vf(),{basename:o}=Hf(),{loaderData:l,matches:c}=_v(),u=v.useMemo(()=>Fu(t,e,c,s,n,"data"),[t,e,c,s,n]),d=v.useMemo(()=>Fu(t,e,c,s,n,"assets"),[t,e,c,s,n]),h=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let x=new Set,b=!1;if(e.forEach(g=>{var m;let p=s.routes[g.route.id];!p||!p.hasLoader||(!u.some(j=>j.route.id===g.route.id)&&g.route.id in l&&((m=i[g.route.id])!=null&&m.shouldRevalidate)||p.hasClientLoader?b=!0:x.add(g.route.id))}),x.size===0)return[];let N=pv(t,o,"data");return b&&x.size>0&&N.searchParams.set("_routes",e.filter(g=>x.has(g.route.id)).map(g=>g.route.id).join(",")),[N.pathname+N.search]},[o,l,n,s,u,e,t,i]),f=v.useMemo(()=>vv(d,s),[d,s]),y=Sv(d);return v.createElement(v.Fragment,null,h.map(x=>v.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),f.map(x=>v.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),y.map(({key:x,link:b})=>v.createElement("link",{key:x,nonce:r.nonce,...b})))}function Ev(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Kf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kf&&(window.__reactRouterVersion="7.9.3")}catch{}var Gf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yf=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,...f},y){let{basename:x}=v.useContext(kt),b=typeof u=="string"&&Gf.test(u),N,g=!1;if(typeof u=="string"&&b&&(N=u,Kf))try{let S=new URL(window.location.href),T=u.startsWith("//")?new URL(S.protocol+u):new URL(u),A=Xt(T.pathname,x);T.origin===S.origin&&A!=null?u=A+T.search+T.hash:g=!0}catch{lt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let p=Hx(u,{relative:s}),[m,j,_]=kv(n,f),C=$v(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function w(S){e&&e(S),S.defaultPrevented||C(S)}let k=v.createElement("a",{...f,..._,href:N||p,onClick:g||i?e:w,ref:Ev(y,j),target:c,"data-discover":!b&&r==="render"?"true":void 0});return m&&!b?v.createElement(v.Fragment,null,k,v.createElement(Nv,{page:p})):k});Yf.displayName="Link";var Pv=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let h=vs(o,{relative:u.relative}),f=nr(),y=v.useContext(na),{navigator:x,basename:b}=v.useContext(kt),N=y!=null&&Mv(h)&&l===!0,g=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,p=f.pathname,m=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(p=p.toLowerCase(),m=m?m.toLowerCase():null,g=g.toLowerCase()),m&&b&&(m=Xt(m,b)||m);const j=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let _=p===g||!s&&p.startsWith(g)&&p.charAt(j)==="/",C=m!=null&&(m===g||!s&&m.startsWith(g)&&m.charAt(g.length)==="/"),w={isActive:_,isPending:C,isTransitioning:N},k=_?e:void 0,S;typeof n=="function"?S=n(w):S=[n,_?"active":null,C?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let T=typeof i=="function"?i(w):i;return v.createElement(Yf,{...u,"aria-current":k,className:S,ref:d,style:T,to:o,viewTransition:l},typeof c=="function"?c(w):c)});Pv.displayName="NavLink";var Tv=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:o=ni,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...f},y)=>{let x=Iv(),b=Dv(l,{relative:u}),N=o.toLowerCase()==="get"?"get":"post",g=typeof l=="string"&&Gf.test(l),p=m=>{if(c&&c(m),m.defaultPrevented)return;m.preventDefault();let j=m.nativeEvent.submitter,_=(j==null?void 0:j.getAttribute("formmethod"))||o;x(j||m.currentTarget,{fetcherKey:e,method:_,navigate:r,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:h})};return v.createElement("form",{ref:y,method:N,action:b,onSubmit:n?c:p,...f,"data-discover":!g&&t==="render"?"true":void 0})});Tv.displayName="Form";function Ov(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qf(t){let e=v.useContext(gn);return fe(e,Ov(t)),e}function $v(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=tc(),c=nr(),u=vs(t,{relative:i});return v.useCallback(d=>{if(uv(d,e)){d.preventDefault();let h=r!==void 0?r:Yo(c)===Yo(u);l(t,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,u,r,n,e,t,s,i,o])}function Rv(t){lt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(Qo(t)),r=v.useRef(!1),n=nr(),s=v.useMemo(()=>dv(n.search,r.current?null:e.current),[n.search]),i=tc(),o=v.useCallback((l,c)=>{const u=Qo(typeof l=="function"?l(new URLSearchParams(s)):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}var Av=0,Lv=()=>`__${String(++Av)}__`;function Iv(){let{router:t}=Qf("useSubmit"),{basename:e}=v.useContext(kt),r=rv();return v.useCallback(async(n,s={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=mv(n,e);if(s.navigate===!1){let d=s.fetcherKey||Lv();await t.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function Dv(t,{relative:e}={}){let{basename:r}=v.useContext(kt),n=v.useContext(Nt);fe(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...vs(t||".",{relative:e})},o=nr();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:xt([r,i.pathname])),Yo(i)}function Mv(t,{relative:e}={}){let r=v.useContext(Ff);fe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Qf("useViewTransitionState"),s=vs(t,{relative:e});if(!r.isTransitioning)return!1;let i=Xt(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Xt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ri(s.pathname,o)!=null||Ri(s.pathname,i)!=null}const Uv=()=>{const[t]=Rv(),e=tc(),{user:r}=ra(),[n,s]=v.useState(!0),i=t.get("session_id");return v.useEffect(()=>{if(!r){e("/auth");return}if(!i){e("/pricing");return}const o=setTimeout(()=>{s(!1)},2e3);return()=>clearTimeout(o)},[r,i,e]),n?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-teal-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Tf,{className:"w-12 h-12 text-cyan-500 animate-spin mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Processing your payment..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your subscription"})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 to-teal-50 flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md mx-auto text-center p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(Vt,{className:"w-20 h-20 text-green-500 mx-auto mb-6"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Payment Successful!"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Welcome to Ditch Plus! Your subscription is now active and you have access to all premium features."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:()=>e("/dashboard"),className:"w-full bg-gradient-to-r from-cyan-500 to-teal-500 text-white py-3 px-6 rounded-lg font-medium hover:from-cyan-600 hover:to-teal-600 transition-colors flex items-center justify-center",children:["Go to Dashboard",a.jsx(Ky,{className:"w-4 h-4 ml-2"})]}),a.jsx("button",{onClick:()=>e("/profile"),className:"w-full bg-white text-gray-700 py-3 px-6 rounded-lg font-medium border border-gray-300 hover:bg-gray-50 transition-colors",children:"Manage Subscription"})]}),a.jsxs("div",{className:"mt-8 p-4 bg-white rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"What's Next?"}),a.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("li",{children:" Access advanced tracking features"}),a.jsx("li",{children:" Get personalized insights"}),a.jsx("li",{children:" Export your progress data"}),a.jsx("li",{children:" Set custom goals"})]})]})]})})};function zv({onBack:t}){const{isDayTime:e}=Ql();return a.jsx("div",{className:`min-h-screen p-6 ${e?"bg-gradient-to-br from-cyan-50 to-teal-50":"bg-slate-950"}`,children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("button",{onClick:t,className:`flex items-center space-x-2 mb-6 ${e?"text-gray-700 hover:text-gray-900":"text-gray-300 hover:text-white"}`,children:[a.jsx(Ef,{className:"w-5 h-5"}),a.jsx("span",{children:"Back"})]}),a.jsxs("div",{className:`rounded-xl p-8 shadow-lg ${e?"bg-white":"bg-slate-800"}`,children:[a.jsx("h1",{className:`text-3xl font-bold mb-6 ${e?"text-gray-900":"text-white"}`,children:"Privacy Policy"}),a.jsxs("div",{className:`space-y-6 ${e?"text-gray-700":"text-gray-300"}`,children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated: October 5, 2025"}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"1. Information We Collect"}),a.jsx("p",{className:"mb-2",children:"We collect information that you provide directly to us, including:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[a.jsx("li",{children:"Email address and authentication credentials"}),a.jsx("li",{children:"Usage tracking data (puff counts, quit dates, milestones)"}),a.jsx("li",{children:"Profile information (age, gender, vaping history)"}),a.jsx("li",{children:"Health milestone achievements and progress data"}),a.jsx("li",{children:"Community posts and buddy system messages"}),a.jsx("li",{children:"Craving logs and trigger information"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"2. How We Use Your Information"}),a.jsx("p",{className:"mb-2",children:"We use the information we collect to:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[a.jsx("li",{children:"Provide, maintain, and improve our services"}),a.jsx("li",{children:"Track your progress toward quitting vaping"}),a.jsx("li",{children:"Send you notifications and reminders"}),a.jsx("li",{children:"Enable community features and buddy system"}),a.jsx("li",{children:"Process your subscription through Apple In-App Purchases"}),a.jsx("li",{children:"Analyze usage patterns to improve the app experience"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"3. Data Storage and Security"}),a.jsx("p",{children:"Your data is securely stored using Supabase, a secure cloud database service. We implement industry-standard security measures including:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1 mt-2",children:[a.jsx("li",{children:"Encryption of data in transit and at rest"}),a.jsx("li",{children:"Row-level security policies to protect your data"}),a.jsx("li",{children:"Regular security audits and updates"}),a.jsx("li",{children:"Secure authentication via Supabase Auth"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"4. Data Sharing"}),a.jsx("p",{children:"We do not sell your personal information. We may share your information only in the following circumstances:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1 mt-2",children:[a.jsx("li",{children:"With your explicit consent"}),a.jsx("li",{children:"To comply with legal obligations"}),a.jsx("li",{children:"To protect our rights and safety"}),a.jsx("li",{children:"With service providers who assist in operating our app (Supabase, Apple)"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"5. Community Features"}),a.jsx("p",{children:"When you use community features:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1 mt-2",children:[a.jsx("li",{children:"Posts can be made anonymously or with your profile"}),a.jsx("li",{children:"Anonymous posts do not reveal your identity"}),a.jsx("li",{children:"Buddy messages are private between connected users"}),a.jsx("li",{children:"You can delete your posts and messages at any time"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"6. Your Rights"}),a.jsx("p",{className:"mb-2",children:"You have the right to:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[a.jsx("li",{children:"Access your personal data"}),a.jsx("li",{children:"Correct inaccurate data"}),a.jsx("li",{children:"Request deletion of your data"}),a.jsx("li",{children:"Export your data"}),a.jsx("li",{children:"Opt out of notifications"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"7. Children's Privacy"}),a.jsx("p",{children:"Ditch is intended for users 18 years and older. We do not knowingly collect information from anyone under 18."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"8. Apple In-App Purchases"}),a.jsx("p",{children:"When you make purchases through Apple In-App Purchases, Apple processes your payment information. We do not have access to your payment details. Your purchase is governed by Apple's privacy policy and terms of service."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"9. Changes to This Policy"}),a.jsx("p",{children:"We may update this privacy policy from time to time. We will notify you of any changes by posting the new policy in the app."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"10. Contact Us"}),a.jsx("p",{children:"If you have questions about this privacy policy, please contact us through the app's support feature."})]})]})]})]})})}function Fv({onBack:t}){const{isDayTime:e}=Ql();return a.jsx("div",{className:`min-h-screen p-6 ${e?"bg-gradient-to-br from-cyan-50 to-teal-50":"bg-slate-950"}`,children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("button",{onClick:t,className:`flex items-center space-x-2 mb-6 ${e?"text-gray-700 hover:text-gray-900":"text-gray-300 hover:text-white"}`,children:[a.jsx(Ef,{className:"w-5 h-5"}),a.jsx("span",{children:"Back"})]}),a.jsxs("div",{className:`rounded-xl p-8 shadow-lg ${e?"bg-white":"bg-slate-800"}`,children:[a.jsx("h1",{className:`text-3xl font-bold mb-6 ${e?"text-gray-900":"text-white"}`,children:"Terms of Service"}),a.jsxs("div",{className:`space-y-6 ${e?"text-gray-700":"text-gray-300"}`,children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated: October 5, 2025"}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"1. Acceptance of Terms"}),a.jsx("p",{children:"By accessing and using Ditch, you accept and agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the app."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"2. Description of Service"}),a.jsx("p",{children:"Ditch is a mobile application designed to help users track and reduce their vaping habits. The app provides:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1 mt-2",children:[a.jsx("li",{children:"Usage tracking and statistics"}),a.jsx("li",{children:"Health milestone tracking"}),a.jsx("li",{children:"Community support features"}),a.jsx("li",{children:"Craving management tools"}),a.jsx("li",{children:"Buddy accountability system"}),a.jsx("li",{children:"Premium features via subscription"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"3. Age Requirement"}),a.jsx("p",{children:"You must be at least 18 years old to use Ditch. By using the app, you represent and warrant that you are at least 18 years of age."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"4. Medical Disclaimer"}),a.jsx("p",{className:"mb-2",children:"Ditch is a tracking and support tool, not medical advice. Important points:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[a.jsx("li",{children:"The app does not provide medical advice, diagnosis, or treatment"}),a.jsx("li",{children:"Consult with healthcare professionals for medical guidance"}),a.jsx("li",{children:"Health timelines are based on general research, not personalized medical advice"}),a.jsx("li",{children:"We are not responsible for any health outcomes related to app use"}),a.jsx("li",{children:"If you experience medical issues, seek professional help immediately"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"5. User Accounts"}),a.jsx("p",{children:"When creating an account, you agree to:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1 mt-2",children:[a.jsx("li",{children:"Provide accurate and complete information"}),a.jsx("li",{children:"Maintain the security of your account credentials"}),a.jsx("li",{children:"Accept responsibility for all activities under your account"}),a.jsx("li",{children:"Notify us immediately of any unauthorized access"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"6. Subscriptions and Payments"}),a.jsx("p",{className:"mb-2",children:"Premium subscriptions are processed through Apple In-App Purchases:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[a.jsx("li",{children:"Monthly subscription: $2.99/month, auto-renewable"}),a.jsx("li",{children:"Yearly subscription: $25.00/year, auto-renewable"}),a.jsx("li",{children:"Subscriptions automatically renew unless canceled"}),a.jsx("li",{children:"Cancel anytime through your Apple ID settings"}),a.jsx("li",{children:"Refunds are subject to Apple's refund policy"}),a.jsx("li",{children:"Prices may vary by region"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"7. Community Guidelines"}),a.jsx("p",{className:"mb-2",children:"When using community features, you agree to:"}),a.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[a.jsx("li",{children:"Be respectful and supportive to other users"}),a.jsx("li",{children:"Not post offensive, abusive, or inappropriate content"}),a.jsx("li",{children:"Not share personal information of others"}),a.jsx("li",{children:"Not use the platform for spam or commercial purposes"}),a.jsx("li",{children:"Not impersonate others"}),a.jsx("li",{children:"Report inappropriate content or behavior"})]}),a.jsx("p",{className:"mt-2",children:"We reserve the right to remove content and suspend accounts that violate these guidelines."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"8. Intellectual Property"}),a.jsx("p",{children:"All content, features, and functionality of Ditch are owned by us and protected by copyright, trademark, and other intellectual property laws. You may not copy, modify, or distribute our content without permission."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"9. User-Generated Content"}),a.jsx("p",{children:"By posting content in Ditch, you grant us a non-exclusive, worldwide license to use, display, and distribute your content within the app. You retain ownership of your content."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"10. Limitation of Liability"}),a.jsx("p",{children:"To the maximum extent permitted by law, we are not liable for any indirect, incidental, special, or consequential damages arising from your use of Ditch."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"11. Termination"}),a.jsx("p",{children:"We reserve the right to suspend or terminate your access to Ditch at any time for violations of these terms or for any other reason, without prior notice."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"12. Changes to Terms"}),a.jsx("p",{children:"We may modify these terms at any time. Continued use of the app after changes constitutes acceptance of the new terms."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"13. Governing Law"}),a.jsx("p",{children:"These terms are governed by the laws of the United States. Any disputes will be resolved in the courts of the United States."})]}),a.jsxs("section",{children:[a.jsx("h2",{className:`text-xl font-semibold mb-3 ${e?"text-gray-900":"text-white"}`,children:"14. Contact"}),a.jsx("p",{children:"For questions about these terms, please contact us through the app's support feature."})]})]})]})]})})}function Bv(){const{user:t,profile:e,loading:r}=Se(),{isPremium:n}=ta(),{isDayTime:s}=Ql(),[i,o]=v.useState("counter"),[l,c]=v.useState(0);v.useEffect(()=>{const d=()=>{o("upgrade")},h=()=>{o("privacy")},f=()=>{o("terms")};return window.addEventListener("navigate-to-upgrade",d),window.addEventListener("navigate-to-privacy",h),window.addEventListener("navigate-to-terms",f),()=>{window.removeEventListener("navigate-to-upgrade",d),window.removeEventListener("navigate-to-privacy",h),window.removeEventListener("navigate-to-terms",f)}},[]),v.useEffect(()=>{if(t){u();const d=setInterval(u,3e4);return()=>clearInterval(d)}},[t]);const u=async()=>{const{count:d}=await R.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",t.id).eq("is_read",!1);c(d||0)};return r?a.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors duration-500 ${s?"bg-gradient-to-br from-cyan-50 to-teal-50":"bg-slate-950"}`,children:a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-cyan-500"})}):t?e!=null&&e.onboarding_completed?a.jsx("div",{className:`min-h-screen transition-colors duration-500 ${s?"bg-gradient-to-br from-cyan-50 to-teal-50":"bg-slate-950"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("header",{className:`hidden md:block shadow-md sticky top-0 z-10 ${s?"bg-white":"bg-slate-800 border-b border-slate-700"}`,children:a.jsxs("div",{className:"px-6 py-4",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("img",{src:"/logo-wordmark.svg",alt:"Ditch",className:"object-contain h-[80px] w-[80px]"})}),a.jsx("div",{className:"flex items-center justify-between mt-3",children:a.jsxs("nav",{className:"flex space-x-1 mx-auto flex-wrap justify-center",children:[a.jsxs("button",{onClick:()=>o("counter"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="counter"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"}`,children:[a.jsx(cs,{className:"w-5 h-5"}),a.jsx("span",{children:"Counter"})]}),a.jsxs("button",{onClick:()=>o("cravings"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="cravings"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"}`,children:[a.jsx(yr,{className:"w-5 h-5"}),a.jsx("span",{children:"Cravings"})]}),a.jsxs("button",{onClick:()=>o("stats"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="stats"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"}`,children:[a.jsx(Oi,{className:"w-5 h-5"}),a.jsx("span",{children:"Statistics"})]}),a.jsxs("button",{onClick:()=>o("health"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="health"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"}`,children:[a.jsx(je,{className:"w-5 h-5"}),a.jsx("span",{children:"Health"})]}),a.jsxs("button",{onClick:()=>o("community"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="community"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"}`,children:[a.jsx(It,{className:"w-5 h-5"}),a.jsx("span",{children:"Community"})]}),a.jsxs("button",{onClick:()=>o("buddies"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="buddies"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"}`,children:[a.jsx(It,{className:"w-5 h-5"}),a.jsx("span",{children:"Buddies"})]}),a.jsxs("button",{onClick:()=>o("goals"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="goals"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"}`,children:[a.jsx(Jt,{className:"w-5 h-5"}),a.jsx("span",{children:"Goals"})]}),a.jsxs("button",{onClick:()=>{o("notifications"),c(0)},className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="notifications"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"} relative`,children:[a.jsx(Zr,{className:"w-5 h-5"}),a.jsx("span",{children:"Notifications"}),l>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-2 py-0.5 min-w-[20px] text-center",children:l})]}),a.jsxs("button",{onClick:()=>o("premium"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="premium"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"} relative`,children:[a.jsx(en,{className:"w-5 h-5"}),a.jsx("span",{children:"Premium"}),!n&&a.jsx("span",{className:"absolute -top-1 -right-1",children:a.jsx(lx,{})})]}),a.jsxs("button",{onClick:()=>o("profile"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-[400ms] cubic-bezier(0.4,0,0.2,1) ${i==="profile"?"bg-gradient-to-r from-cyan-500 to-teal-500 text-white shadow-lg":s?"text-gray-600 hover:bg-cyan-50 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]":"text-slate-400 hover:bg-slate-700 hover:-translate-y-1 hover:shadow-[0_10px_30px_rgba(6,182,212,0.15)]"}`,children:[a.jsx(Go,{className:"w-5 h-5"}),a.jsx("span",{children:"Profile"})]})]})})]})}),a.jsxs("main",{className:"py-8 min-h-[calc(100vh-88px)]",children:[i==="counter"&&a.jsx(nx,{}),i==="stats"&&a.jsx(sx,{}),i==="goals"&&a.jsx(ix,{}),i==="notifications"&&a.jsx(fx,{}),i==="cravings"&&a.jsx(mx,{}),i==="community"&&a.jsx(gx,{}),i==="health"&&a.jsx(yx,{}),i==="buddies"&&a.jsx(xx,{}),i==="premium"&&a.jsx(cx,{}),i==="upgrade"&&a.jsx(dx,{}),i==="profile"&&a.jsx(ax,{}),i==="pricing"&&a.jsx(bx,{}),i==="checkout-success"&&a.jsx(Uv,{}),i==="privacy"&&a.jsx(zv,{onBack:()=>o("profile")}),i==="terms"&&a.jsx(Fv,{onBack:()=>o("profile")})]}),a.jsx("nav",{className:`md:hidden fixed bottom-0 left-0 right-0 border-t shadow-lg overflow-x-auto ${s?"bg-white":"bg-slate-800 border-slate-700"}`,children:a.jsxs("div",{className:"grid grid-cols-9 min-w-max",children:[a.jsxs("button",{onClick:()=>o("counter"),className:`flex flex-col items-center py-3 transition ${i==="counter"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(cs,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Counter"})]}),a.jsxs("button",{onClick:()=>o("stats"),className:`flex flex-col items-center py-3 transition ${i==="stats"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(Oi,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Stats"})]}),a.jsxs("button",{onClick:()=>o("cravings"),className:`flex flex-col items-center py-3 px-2 transition ${i==="cravings"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(yr,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Cravings"})]}),a.jsxs("button",{onClick:()=>o("health"),className:`flex flex-col items-center py-3 px-2 transition ${i==="health"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(je,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Health"})]}),a.jsxs("button",{onClick:()=>o("community"),className:`flex flex-col items-center py-3 px-2 transition ${i==="community"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(It,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Community"})]}),a.jsxs("button",{onClick:()=>o("buddies"),className:`flex flex-col items-center py-3 px-2 transition ${i==="buddies"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(It,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Buddies"})]}),a.jsxs("button",{onClick:()=>o("goals"),className:`flex flex-col items-center py-3 px-2 transition ${i==="goals"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(Jt,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Goals"})]}),a.jsxs("button",{onClick:()=>{o("notifications"),c(0)},className:`flex flex-col items-center py-3 transition relative ${i==="notifications"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(Zr,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Alerts"}),l>0&&a.jsx("span",{className:"absolute top-1 right-2 bg-red-500 text-white text-xs rounded-full px-1.5 min-w-[18px] text-center",children:l})]}),a.jsxs("button",{onClick:()=>o("premium"),className:`flex flex-col items-center py-3 transition relative ${i==="premium"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(en,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Premium"}),!n&&a.jsx("span",{className:"absolute top-1 right-2",children:a.jsx(Qt,{className:"w-3 h-3 text-orange-500"})})]}),a.jsxs("button",{onClick:()=>o("profile"),className:`flex flex-col items-center py-3 transition ${i==="profile"?"text-cyan-500":s?"text-gray-600":"text-slate-400"}`,children:[a.jsx(Go,{className:"w-6 h-6 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})]})}):a.jsx(rx,{}):a.jsx(qy,{})}function Wv(){return a.jsx(Wy,{children:a.jsx(Fy,{children:a.jsx(By,{children:a.jsx(Bv,{})})})})}ef(document.getElementById("root")).render(a.jsx(v.StrictMode,{children:a.jsx(Wv,{})}));
